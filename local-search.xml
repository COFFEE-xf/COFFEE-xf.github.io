<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>软件设计师 上午题 软件工程</title>
    <link href="/2025/05/08/note35/"/>
    <url>/2025/05/08/note35/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 上午题 软件工程</h1>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>上午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 上午题 结构化开发</title>
    <link href="/2025/05/08/note34/"/>
    <url>/2025/05/08/note34/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 上午题 结构化开发</h1><p>结构化开发是一种系统化的软件开发方法，强调通过清晰的步骤、模块化设计和标准化工具来提升软件的可维护性、可靠性和开发效率。其核心思想是将复杂问题分解为更小、更易管理的部分，通常与​​结构化编程​​和​​结构化设计​​密切相关。</p><h2 id="一、系统分析与设计概述">一、系统分析与设计概述</h2><h3 id="Ⅰ-系统设计的基本原理">Ⅰ 系统设计的基本原理</h3><h4 id="1-抽象">1. 抽象</h4><p>抽象，即将一个复杂的现象简化到可以分析、实验或者可以理解的程度。例如在设计用户登录模块时，在较高层次的抽象中只需定义输入（账号/密码）、输出（成功/失败），无需关心密码加密的具体算法。具体的算法可以在较低的抽象层次中细化。</p><h4 id="2-模块化">2. 模块化</h4><p>模块化即将系统分解为功能独立的模块，每个模块完成单一职责。这是一种对复杂问题分而治之的原则。</p><h4 id="3-信息隐蔽">3. 信息隐蔽</h4><p>信息隐蔽意味着将每个程序的成分封装在一个单一的设计模块中，在定义每一个模块时尽可能少地显露其内部的处理。</p><h4 id="4-模块独立">4. 模块独立</h4><p>模块独立是指每个模块完成一个相对独立的特定子功能，并且要求模块之间的联系要尽可能简单。我们可以使用两个指标来衡量模块独立的程度：</p><h5 id="1）耦合">1）耦合</h5><p>耦合定义的是模块间依赖关系的紧密程度。耦合越低，独立性越强。一般来说，模块之间的耦合会有以下几种类型：</p><div class="center"><style>.smuymtkfjcbv{}</style><img src="/2025/05/08/note34/note34_pic01.png" class="smuymtkfjcbv"></div><ul><li><strong>无直接耦合</strong>：两个模块间没有直接的关系。</li><li><strong>数据耦合</strong>：两个模块之间存在值传递。</li><li><strong>标记耦合</strong>：两个模块之间存在数据结构的传递。</li><li><strong>控制耦合</strong>：一个模块调用另一个模块中的某一功能。</li><li><strong>外部耦合</strong>：模块间通过软件之外的环境连接，比如I/O将模块耦合到特定的设备上。</li><li><strong>公共耦合</strong>：多个模块共享全局数据。</li><li><strong>内容耦合</strong>：一个模块直接使用另一个模块的内部数据，或者一个模块通过非正常入口转入另一个模块内部。</li></ul><h5 id="2）内聚">2）内聚</h5><p>内聚着眼于一个模块内部，即一个模块中的各个元素彼此结合的紧密程度。一个高内聚的模块应当只做一件事。模块的内聚一般有以下几种类型：</p><div class="center"><style>.qwjjmdsyqmjh{}</style><img src="/2025/05/08/note34/note34_pic02.png" class="qwjjmdsyqmjh"></div><ul><li><strong>偶然内聚</strong>：一个模块内的各个元素之间没有任何联系。</li><li><strong>逻辑内聚</strong>：一个模块能够执行若干个逻辑上相似的功能。</li><li><strong>时间内聚</strong>：把需要同时执行的动作组合在一起的模块称作时间内聚模块。</li><li><strong>过程内聚</strong>：一个模块完成多个任务，且这些任务必须按指定的过程执行。</li><li><strong>通信内聚</strong>：模块内的所有元素都在同一个数据结构上操作，这样一来大体的效果就是各处理在使用相同的输入时会产生相同的输出。</li><li><strong>顺序内聚</strong>：一个模块内的各个处理元素都密切相关于完成一个功能且必须顺序执行。</li><li><strong>功能内聚</strong>：一个模块内的所有元素都密切相关于完成一个功能，缺一不可。</li></ul><h3 id="Ⅱ-系统总体结构设计">Ⅱ 系统总体结构设计</h3><h4 id="1-系统结构设计原则">1. 系统结构设计原则</h4><ul><li><strong>分解-协调原则</strong>：解决复杂问题的一个重要原则为将其分解成多个小问题分别处理，在处理过程中根据系统的总体要求协调各部门之间的关系。</li><li><strong>自顶向下的原则</strong>：首先抓住系统总的功能，再逐层分解实现。</li><li><strong>信息隐蔽、抽象的原则</strong>：上层模块只规定下层模块要干什么，而不干涉怎么实现，以保证模块间的独立性和层次性。</li><li><strong>一致性原则</strong>：整个软件设计过程中需要有统一的规范。</li><li><strong>明确性原则</strong>：每个模块必须功能明确、接口明确，消除冗余的功能和接口。</li><li><strong>模块的扇入系数和扇出系数要合理</strong>：一个模块直接调用其它模块的个数称之为扇出系数，反之则称之为扇入系数。扇出系数和扇入系数必须适当。</li><li><strong>模块之间的耦合尽可能小，模块的内聚度尽可能高</strong>。</li><li><strong>模块的规模适当</strong>。</li><li><strong>模块的作用范围应该在其控制范围之内</strong>。</li></ul><h2 id="二、结构化分析方法">二、结构化分析方法</h2><h3 id="Ⅰ-数据流图（DFD）">Ⅰ 数据流图（DFD）</h3><p>数据流图的详细内容请参见：<a href="https://loquattree.xyz/2025/04/23/note28/">软件设计师 下午题 试题一 数据流图设计</a></p><hr><ol><li>2012年上半年：</li></ol><div class="center"><style>.gbcunyevyuku{}</style><img src="/2025/05/08/note34/note34_pic03.png" class="gbcunyevyuku"></div><p><strong>B</strong>，在分层数据流图中有顶层数据流图、0层数据流图和底层数据流图三种。它们的功能依次是1）以最简形式描述系统的边界、主要输入/输出流；2）将系统分解为关键的处理过程，如“订单处理”、“支付验证”等；3）进一步细化每个处理过程的内部逻辑。</p><h3 id="Ⅱ-数据字典（DD）">Ⅱ 数据字典（DD）</h3><blockquote><p>数据流图描述了系统的分解，但没有对图中各成分进行说明。数据字典就是为数据流图中的每个数据流、文件、加工，以及组成数据流或文件的数据项做出说明。其中，对加工的描述称为“小说明”，也可以称为“加工逻辑说明”。</p></blockquote><h4 id="1-数据字典的内容">1. 数据字典的内容</h4><p>数据字典中有以下4类条目：</p><ul><li><strong>数据流条目</strong>：通常列出数据流的来源、去向和组成。</li><li><strong>数据存储条目</strong>：定义系统中持久化数据的存储结构（如数据库表、文件）。</li><li><strong>数据项条目</strong>：细化数据流或数据存储中的​​最小数据单元​​，包括类型、长度、约束等。</li><li><strong>基本加工条目</strong>：用来说明DFD中基本加工的处理逻辑。</li></ul><div class="center"><style>.jqntgnaippss{}</style><img src="/2025/05/08/note34/note34_pic04.png" class="jqntgnaippss"></div><h4 id="2-结构化语言">2. 结构化语言</h4><p>结构化语言是一种常见的用来描述加工逻辑的方法，这是一种介于自然语言和形式化语言之间的半形式化语言。结构化语言的结构通常可分为内层和外层：</p><ul><li>外层：用来描述控制结构，有以下几种基本结构：<ul><li>顺序结构：一组祈使语句、选择语句、重复语句的顺序排列。</li><li>选择结构：一般采用IF-ELSE等关键词。</li><li>重复结构：一般采用DO-WHILE-ENDDO等关键词。</li></ul></li><li>内层：了解即可，语法比较灵活，一般是采用祈使语句的自然语言短语。</li></ul>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>上午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>访问Apache服务器时出现“403 Forbidden”的解决方案</title>
    <link href="/2025/05/07/md07/"/>
    <url>/2025/05/07/md07/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>访问Apache服务器时出现“403 Forbidden”的解决方案</h1><div class="center"><style>.gbjjuncoxbku{}</style><img src="/2025/05/07/md07/md07_pic01.png" class="gbjjuncoxbku"></div><p>在配置Apache服务器时，如果修改了默认的根目录就可能出现被拒绝访问的情况，可以执行以下命令解决：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">确保目录可读</span><br>sudo chmod 755 /home/rhauser/public_html<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">确保文件可读</span><br>sudo chmod 644 /home/rhauser/public_html/*<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">确保Apache对父目录也有权限</span><br>sudo chmod +x /home /home/rhauser<br></code></pre></td></tr></table></figure><p>成功解决：</p><div class="center"><style>.rosegiadctix{}</style><img src="/2025/05/07/md07/md07_pic02.png" class="rosegiadctix"></div>]]></content>
    
    
    <categories>
      
      <category>疑难杂症解决方案</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VMWare扩容虚拟机时“指定的虚拟磁盘需要进行修复”报错的解决方案</title>
    <link href="/2025/05/06/md06/"/>
    <url>/2025/05/06/md06/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>VMWare扩容虚拟机时“指定的虚拟磁盘需要进行修复”报错的解决方案</h1><p>在Windows命令提示符中依次执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd VMWare安装路径<br><br>vmware-vdiskmanager -R &quot;虚拟磁盘路径&quot;<br></code></pre></td></tr></table></figure><p>以我的安装路径为例：</p><div class="center"><style>.mushukctegij{}</style><img src="/2025/05/06/md06/md06.png" class="mushukctegij"></div><p>当出现提示<code>The virtual disk, 'E:\VIT1204 Ass1 Lab3\Ass1 Lab3.vmdk', was corrupted and has been successfully repaired.</code>即为修复成功。</p>]]></content>
    
    
    <categories>
      
      <category>疑难杂症解决方案</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CentOS 7 dnf命令“conflicting requests”报错的解决方案</title>
    <link href="/2025/05/06/md05/"/>
    <url>/2025/05/06/md05/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>CentOS 7 dnf命令“conflicting requests”报错的解决方案</h1><h3 id="Reference">Reference</h3><ul><li><a href="https://blog.csdn.net/SerMa/article/details/131226445">centos7升级glibc2.25避坑指南</a></li><li><a href="https://blog.csdn.net/yutenys/article/details/122154162">centos7升级gcc&amp;glibc(踩坑)</a></li></ul><p>笔者在CentOS 7系统中安装Chrome浏览器时使用到了<code>dnf</code>命令来处理其安装包，但是出现了以下报错：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">错误：<br> 问题: conflicting requests<br>  - nothing provides libc.so.6(GLIBC_2.18)(64bit) needed by google-chrome-stable-136.0.7103.59-1.x86_64<br></code></pre></td></tr></table></figure><p>GLIBC是GNU发布的libc库，即c运行库。GLIBC是linux系统中最底层的api，几乎其它任何运行库都会依赖于GLIBC，而CentOS 7系统中的GLIBC版本为<code>GLIBC_2.17</code>，而报错信息则说明在使用这一命令时需要<code>GLIBC_2.18</code>及以上版本，因此我们需要对GLIBC库进行更新（直接升级到<code>GLIBC_2.31</code>版本）：</p><h3 id="1-基础环境准备">1. 基础环境准备</h3><p>将GLIBC库升级到目标版本需要满足两个基础条件：</p><ul><li>GCC版本为9.X.X及以上</li><li>make版本为4.0.X及以上</li></ul><h4 id="1）make升级">1）make升级</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">检查版本，满足条件可以跳过此步</span><br>make -v<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装依赖</span><br>yum -y install gcc gcc+<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">建立根目录</span><br>mkdir /backup<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">下载make安装包</span><br>cd /backup<br>wget https://mirrors.aliyun.com/gnu/make/make-4.3.tar.gz<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">解压压缩包并建立构建目录</span><br>tar -xf make-4.3.tar.gz<br>cd make-4.3<br>mkdir build<br>cd build<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">指定安装到具体的目录下，此示例表示将make安装到/opt下</span><br>../configure --prefix=/opt/make<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">编译安装</span><br>make &amp;&amp; make install<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">建立软连接</span><br>ln -sf /opt/make/bin/make /usr/bin/make<br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查make版本</span><br>make --version<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">目标输出</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">GNU Make 4.3</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">为 x86_64-pc-linux-gnu 编译</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Copyright (C) 1988-2020 Free Software Foundation, Inc.</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">许可证：GPLv3+：GNU 通用公共许可证第 3 版或更新版本&lt;http://gnu.org/licenses/gpl.html&gt;。</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">本软件是自由软件：您可以自由修改和重新发布它。</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">在法律允许的范围内没有其他保证。</span><br></code></pre></td></tr></table></figure><h4 id="2）GCC升级">2）GCC升级</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">检查版本，满足条件可以跳过此步</span><br>gcc -v<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装升级依赖</span><br>yum install -y gcc-c++ glibc-devel mpfr-devel libmpc-devel gmp-devel glibc-devel.i686<br>​<br><span class="hljs-meta prompt_"># </span><span class="language-bash">下载gcc9.3.1安装包</span><br>cd /backup<br>wget https://ftp.gnu.org/gnu/gcc/gcc-9.3.0/gcc-9.3.0.tar.gz --no-check-certificate<br>​<br><span class="hljs-meta prompt_"># </span><span class="language-bash">解包并执行编译前的准备</span><br>tar -xf gcc-9.3.0.tar.gz<br>cd gcc-9.3.0<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">下载依赖包</span><br>./contrib/download_prerequisites<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">建立构建目录</span><br>mkdir build<br>cd build<br>​<br><span class="hljs-meta prompt_"># </span><span class="language-bash">指定安装到具体的目录下，此示例表示将make安装到/usr下</span><br>../configure --enable-checking=release --enable-language=c,c++ --disable-multilib --prefix=/usr<br>​<br><span class="hljs-meta prompt_"># </span><span class="language-bash">编译安装</span><br>make -j4 # -j代表编译时的任务数，一般有几个cpu核心就写几，构建速度会更快一些。该步骤执行时间很长！！！大概需要一个半钟头左右。<br>make install<br>​<br><span class="hljs-meta prompt_"># </span><span class="language-bash">7.安装完成后检查gcc版本</span><br>gcc -v<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">目标输出</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">使用内建 specs。</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">COLLECT_GCC=gcc</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-pc-linux-gnu/9.3.0/lto-wrapper</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">目标：x86_64-pc-linux-gnu</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">配置为：../configure --enable-checking=release --enable-language=c,c++ --disable-multilib --prefix=/usr</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">线程模型：posix</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">gcc 版本 9.3.0 (GCC)</span> <br></code></pre></td></tr></table></figure><h3 id="2-升级GLIBC库">2. 升级GLIBC库</h3><p>执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">下载安装包</span><br>cd /opt<br>wget https://mirrors.aliyun.com/gnu/glibc/glibc-2.31.tar.gz<br><br>tar -zxf glibc-2.31.tar.gz<br>cd glibc-2.31/<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查是否满足基本需求</span><br>cat INSTALL | grep -E &quot;newer|later&quot;<br><br>mkdir build<br>cd build<br><br>../configure  --prefix=/usr --disable-profile --enable-add-ons --with-headers=/usr/include --with-binutils=/usr/bin --disable-sanity-checks --disable-werror<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">一定要有这一步，python2安装会报错</span><br>yum install python3 <br><br>make -j8 # 使用8核编译后速度显著快于-j4<br>make install<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">解决新启动远程终端时报一个WARNING</span><br>make localedata/install-locales<br></code></pre></td></tr></table></figure><p>如果再升级后仍出现和原先相同的报错，使用强制安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo rpm -ivh --nodeps /tmp/chrome.rpm<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>疑难杂症解决方案</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CentOS 7 yum命令“There are no enabled repos”报错的解决方案</title>
    <link href="/2025/05/06/md04/"/>
    <url>/2025/05/06/md04/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>CentOS 7 yum命令“There are no enabled repos”报错的解决方案</h1><p>当在Linux CentOS当中使用<code>yum</code>命令并出现以下报错时：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">error:There are no enabled repositories in &quot;/etc/yum.repos.d&quot;, &quot;/etc/yum/repos.d&quot;<br></code></pre></td></tr></table></figure><p>并且使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo yum grouplist<br></code></pre></td></tr></table></figure><p>后出现报错为</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">http://mirrors.cloud.aliyuncs.com/centos/7/os/x86_64/repodata/repomd.xml: [Errno 14] HTTP Error 404 - Not Found<br>Trying other mirror.<br></code></pre></td></tr></table></figure><p>这种情况一般就是YUM仓库（repository）的配置问题，导致无法正常解析，需要对YUM仓库进行换源。</p><h3 id="1-备份原yum源">1. 备份原yum源</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup<br></code></pre></td></tr></table></figure><h3 id="2-下载新的yum源">2. 下载新的yum源</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo<br></code></pre></td></tr></table></figure><h3 id="3-更新配置">3. 更新配置</h3><p>随后运行以下命令更新配置即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum clear all<br>yum makecache<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>疑难杂症解决方案</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VMWare “Capacity mismatch for disk XXX。”报错的解决方案</title>
    <link href="/2025/05/05/md03/"/>
    <url>/2025/05/05/md03/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>VMWare “Capacity mismatch for disk XXX。”报错的解决方案</h1><p>笔者在使用<em>VMware Workstation Pro</em>虚拟机环境完成<a href="https://loquattree.xyz/2025/05/05/php02/">课内大作业</a>的过程中需要导入一个老师提供的.ova文件，但是在导入时出现了以下报错：</p><div class="center"><style>.tkfgksalnkzi{}</style><img src="/2025/05/05/md03/md03_pic01.png" class="tkfgksalnkzi"></div><p>以下是解决方案：</p><h3 id="一、解压-ova文件">一、解压.ova文件</h3><p>​​.ova文件​​（Open Virtual Appliance）是一种​​虚拟设备打包格式，因此它实际上是一个压缩包文件，其中包含了以下内容：</p><ul><li>.ovf文件​​（Open Virtualization Format）：描述虚拟机的硬件配置（CPU、内存、网络等）、磁盘信息和其他元数据（XML格式）。</li><li>vmdk/.vhd等磁盘镜像​​：存储虚拟机的操作系统和数据（格式取决于虚拟化平台，如VMware用VMDK，Hyper-V用VHD）。</li><li>​​.mf文件​​（Manifest File）：是虚拟设备中的​​清单文件​​，用于验证文件完整性和确保虚拟机的安全导入。</li></ul><p>但是常见的解压缩工具都无法直接解压.ova文件，因此需要先手动将其后缀改为.zip格式再解压缩即可。解压结果如下图所示：</p><div class="center"><style>.sgfmlgsozskf{}</style><img src="/2025/05/05/md03/md03_pic02.png" class="sgfmlgsozskf"></div><h3 id="二、配置-ovf文件">二、配置.ovf文件</h3><p>笔者搜索到的绝大部分解决方案都是将.ovf文件中的虚拟机软件的版本号修改为当前自己使用到的版本号即可，如下图所示：</p><div class="center"><style>.lcydxufyitlr{}</style><img src="/2025/05/05/md03/md03_pic03.png" class="lcydxufyitlr"></div><p>可以一试，可能对低版本的VMware Workstation Pro是起效的，但是笔者使用的版本在修改后依旧会报错，因此需要更彻底的更改：</p><h4 id="1-删除“-Disk-ovf-capacity-“18103500800”-ovf-diskId-“vmdisk2”-ovf-fileRef-“file1”-ovf-format-“http-www-vmware-com-interfaces-specifications-vmdk-html-streamOptimized”-vbox-uuid-“bf38c60b-49bd-48c9-9c03-55acfcec0141”-”">1. 删除“&lt;Disk ovf:capacity=“18103500800” ovf:diskId=“vmdisk2” ovf:fileRef=“file1” ovf:format=“<a href="http://www.vmware.com/interfaces/specifications/vmdk.html#streamOptimized">http://www.vmware.com/interfaces/specifications/vmdk.html#streamOptimized</a>” vbox:uuid=“bf38c60b-49bd-48c9-9c03-55acfcec0141”/&gt;”</h4><p>在.ovf文件的最开始，内容可能不太一致，删除即可。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">DiskSection</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Info</span>&gt;</span>List of the virtual disks used in the package<span class="hljs-tag">&lt;/<span class="hljs-name">Info</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Disk</span> <span class="hljs-attr">ovf:capacity</span>=<span class="hljs-string">&quot;18103500800&quot;</span> <span class="hljs-attr">ovf:diskId</span>=<span class="hljs-string">&quot;vmdisk2&quot;</span> <span class="hljs-attr">ovf:fileRef</span>=<span class="hljs-string">&quot;file1&quot;</span> <span class="hljs-attr">ovf:format</span>=<span class="hljs-string">&quot;http://www.vmware.com/interfaces/specifications/vmdk.html#streamOptimized&quot;</span> <span class="hljs-attr">vbox:uuid</span>=<span class="hljs-string">&quot;bf38c60b-49bd-48c9-9c03-55acfcec0141&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">DiskSection</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2-删除“-Image-uuid-“-bf38c60b-49bd-48c9-9c03-55acfcec0141-”-”">2. 删除“&lt;Image uuid=“{bf38c60b-49bd-48c9-9c03-55acfcec0141}”/&gt;”</h4><p>在.ovf文件的最末尾：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">AttachedDevice</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;HardDisk&quot;</span> <span class="hljs-attr">hotpluggable</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">device</span>=<span class="hljs-string">&quot;0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Image</span> <span class="hljs-attr">uuid</span>=<span class="hljs-string">&quot;&#123;bf38c60b-49bd-48c9-9c03-55acfcec0141&#125;&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">AttachedDevice</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="3-继续删除">3. 继续删除</h4><p>在文章中间部分，可搜索<code>/disk/vmdisk</code>找到，全部删除：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">Item</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rasd:AddressOnParent</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">rasd:AddressOnParent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rasd:Caption</span>&gt;</span>disk2<span class="hljs-tag">&lt;/<span class="hljs-name">rasd:Caption</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rasd:Description</span>&gt;</span>Disk Image<span class="hljs-tag">&lt;/<span class="hljs-name">rasd:Description</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rasd:ElementName</span>&gt;</span>disk2<span class="hljs-tag">&lt;/<span class="hljs-name">rasd:ElementName</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rasd:HostResource</span>&gt;</span>/disk/vmdisk2<span class="hljs-tag">&lt;/<span class="hljs-name">rasd:HostResource</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rasd:InstanceID</span>&gt;</span>9<span class="hljs-tag">&lt;/<span class="hljs-name">rasd:InstanceID</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rasd:Parent</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">rasd:Parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rasd:ResourceType</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">rasd:ResourceType</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span><br></code></pre></td></tr></table></figure><p>保存退出即可。</p><h3 id="三、配置-mf文件">三、配置.mf文件</h3><p>随便找一个文件Hash值的在线计算网站，计算出更改后的.ovf文件的SHA1值，并对应地将.mf文件中的值修改即可，不然无法导入.ovf文件：</p><div class="center"><style>.eywbiaftndhd{}</style><img src="/2025/05/05/md03/md03_pic04.png" class="eywbiaftndhd"></div><h3 id="四、导入-ovf文件">四、导入.ovf文件</h3><p>全部完成之后使用VMware Workstation Pro打开修改过后的.ovf文件即可：</p><div class="center"><style>.rupkthhiogbi{}</style><img src="/2025/05/05/md03/md03_pic05.png" class="rupkthhiogbi"></div><h2 id="Bingo！">Bingo！</h2>]]></content>
    
    
    <categories>
      
      <category>疑难杂症解决方案</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用Linux部署Apache服务器</title>
    <link href="/2025/05/05/php02/"/>
    <url>/2025/05/05/php02/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>使用Linux部署Apache服务器</h1><h2 id="要求文档">要求文档</h2><div class="center"><style>.uriphyouwxxo{}</style><img src="/2025/05/05/php02/php02_pic08.png" class="uriphyouwxxo"></div><h2 id="Task-1">Task 1</h2><h3 id="一、在虚拟机环境中安装Apache服务器">一、在虚拟机环境中安装Apache服务器</h3><h4 id="1-为虚拟机配置网络环境">1. 为虚拟机配置网络环境</h4><p>对于一个全新的虚拟机环境来说，它是没有网络连接的，因此在安装Apache服务器之前需要先配置其网络环境。</p><h5 id="1）在VMWare当中将虚拟机的网络适配器更改为NAT模式">1）在VMWare当中将虚拟机的网络适配器更改为NAT模式</h5><div class="center"><style>.qncfjvybsaar{}</style><img src="/2025/05/05/php02/php02_pic01.png" class="qncfjvybsaar"></div><h5 id="2）修改虚拟机的网络配置信息">2）修改虚拟机的网络配置信息</h5><p>首先在Linux终端中输入命令以查看配置信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo vim /etc/sysconfig/network-scripts/ifcfg-ens33<br></code></pre></td></tr></table></figure><p>结果如下图所示：</p><div class="center"><style>.kxspszvihgww{}</style><img src="/2025/05/05/php02/php02_pic02.png" class="kxspszvihgww"></div><p>将其中的<code>ONBOOT=no</code>更改为<code>ONBOOT=yes</code>以启用ens33端口。</p><p>随后在重启网络配置之后输入<code>ifconfig</code>命令以查看虚拟机IP地址信息：</p><div class="center"><style>.tyngnxuwwwge{}</style><img src="/tyngnxuwwwge" class="" title="&#x2F;2025&#x2F;05&#x2F;05&#x2F;php02&#x2F;php02_pic03.png &quot;&quot;&quot;&quot;"></div><p>记录其中ens33端口对应的IP地址，并将其添加到<code>/etc/sysconfig/network-scripts/ifcfg-ens33</code>文件当中：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">在源文件内容下新增：</span><br>GATEWAY= # 输入记录下来的IP地址<br>DNS1=114.114.114.114<br></code></pre></td></tr></table></figure><p>随后继续输入命令修改配置文件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo vim /etc/resolv.conf<br></code></pre></td></tr></table></figure><p>将其中<code>nameserver</code>一行的值替换为<code>114.114.114.114</code>。</p><p>重启网络后成功ping通，网络环境配置完毕：</p><div class="center"><style>.qqcrrfixwrmc{}</style><img src="/2025/05/05/php02/php02_pic04.png" class="qqcrrfixwrmc"></div><h4 id="2-更新安装包">2. 更新安装包</h4><p>使用以下命令更新所有已安装的包：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo yum update<br>sudo yum install tree<br></code></pre></td></tr></table></figure><p><em>注：如有需要请参见<a href="https://loquattree.xyz/2025/05/06/md04/">CentOS yum命令“There are no enabled repos”报错的解决方案</a></em></p><h4 id="3-安装Apache服务器">3. 安装Apache服务器</h4><p>执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">安装并启用Apache服务器软件</span><br>sudo yum install -y httpd httpd-tools mod_ssl<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">启用并启动服务器</span><br>sudo systemctl enable httpd<br>sudo systemctl start httpd<br></code></pre></td></tr></table></figure><h4 id="4-检查配置结果">4. 检查配置结果</h4><h5 id="1）在Linux中安装chrome浏览器">1）在Linux中安装chrome浏览器</h5><p>执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget -O /tmp/chrome.rpm https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm<br><br>su -<br><br>dnf localinstall /tmp/chrome.rpm<br></code></pre></td></tr></table></figure><p><em>注：如有需要请参见<a href="https://loquattree.xyz/2025/05/06/md05/">CentOS 7 dnf命令“conflicting requests”报错的解决方案</a></em></p><p>安装成功后如下图所示：</p><div class="center"><style>.gfqaebxsbcxy{}</style><img src="/2025/05/05/php02/php02_pic05.png" class="gfqaebxsbcxy"></div><h5 id="2）使用chrome浏览器检查配置结果">2）使用chrome浏览器检查配置结果</h5><p>执行以下命令以修改Apache配置文件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo nano /etc/httpd/conf/httpd.conf<br></code></pre></td></tr></table></figure><p>使用Crtl+w检索<code>SeverName</code>，如下图所示添加<code>ServerName localhost:80</code>：</p><div class="center"><style>.qqsokautpmiw{}</style><img src="/2025/05/05/php02/php02_pic06.png" class="qqsokautpmiw"></div><p>保存并退出文件后继续执行命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">重启服务</span><br>sudo systemctl stop httpd<br>sudo systemctl restart httpd<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">切换到指定目录</span><br>cd /var/www/html<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">创建index页，在其中输入任意内容即可</span><br>sudo nano index.html<br></code></pre></td></tr></table></figure><div class="center"><style>.chqymkdnbwcq{}</style><img src="/2025/05/05/php02/php02_pic07.png" class="chqymkdnbwcq"></div><h3 id="二、在虚拟机环境中安装PHP服务器">二、在虚拟机环境中安装PHP服务器</h3><h4 id="1-安装PHP服务器">1. 安装PHP服务器</h4><p>依次执行以下命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum clean metadata<br><br>sudo yum install php-cli php-pdo php-fpm php-mysqlnd<br>sudo yum install php php-&#123;pear,cgi,common,curl,mbstring,gd,mysqlnd,gettext,bcmath,json,xml,fpm,intl,zip,imap&#125;<br></code></pre></td></tr></table></figure><h4 id="2-检查配置结果">2. 检查配置结果</h4><p>执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /var/www/html<br><br>sudo mv index.html index.php<br><br>sudo nano /etc/httpd/conf/httpd.conf # 检索“DirectoryIndex”，在index.html同一行中继续添加index.php<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">重启服务</span><br>sudo systemctl stop httpd<br>sudo systemctl restart httpd<br></code></pre></td></tr></table></figure><p>随后在浏览器中输入<code>localhost/index.php</code>检查结果，如果有正常显示即为配置成功。</p><h2 id="Task-2">Task 2</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">创建存放目录</span><br>cd ~<br>mkdir public_html<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">修改主配置文件</span><br>sudo vim /etc/httpd/conf/httpd.conf<br></code></pre></td></tr></table></figure><div class="center"><style>.lfymobtrenuh{}</style><img src="/2025/05/05/php02/php02_pic09.png" class="lfymobtrenuh"></div><p>将第<code>120</code>, <code>125</code>和<code>131</code>中的地址都改为自定义地址<code>/home/rhauser/public_html</code>并重新启动Apache服务器即可。</p><p><em>注：如有需要请参见<a href="https://loquattree.xyz/2025/05/07/md07/">访问Apache服务器时出现“403 Forbidden”的解决方案</a></em></p><p>随后在<code>public_html</code>文件夹中创建一个<code>index.php</code>文件和一个空文件夹<code>sub_test</code>，将要求的模板写入<code>index.php</code>文件后保存退出。此时打开该文件和该文件夹的效果应该如下所示：</p><div class="center"><style>.jblcpdxqucoe{}</style><img src="/2025/05/05/php02/php02_pic10.png" class="jblcpdxqucoe"></div><div class="center"><style>.gpsohvryjpbz{}</style><img src="/2025/05/05/php02/php02_pic11.png" class="gpsohvryjpbz"></div><h2 id="Task-3">Task 3</h2><p>执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mkdir -p /home/rhauser/public_html/secure/development/restricted # -p确保自动创建父级目录<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">进入受限文件夹并创建目标文件</span><br>cd /home/rhauser/public_html/secure/development/restricted<br>sudo nano index.php<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">在index.php中写入以下内容</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;!DOCTYPE html&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;html&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;<span class="hljs-built_in">head</span>&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;title&gt;Example site name&lt;/title&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;/head&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;body&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;h1&gt;You are visiting the restricted area!!!&lt;/h1&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;br&gt;&lt;br&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;!-- Any other links goes here --&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;br&gt;&lt;br&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;pre&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Current Directory: &lt;?= <span class="hljs-built_in">dirname</span>(__FILE__) ?&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;/pre&gt;</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">修改Apache配置文件</span><br>sudo vim /etc/httpd/conf/httpd.conf<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">目标样式：</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-comment"># 建立虚拟路径和物理路径之间的映射</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Alias /restricted /home/rhauser/public_html/secure/development/restricted</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;Directory <span class="hljs-string">&quot;/home/rhauser/public_html&quot;</span>&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">    Options Indexes FollowSymLinks</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">    AllowOverride None</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">    Require all granted</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;/Directory&gt;</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查语法是否正确并重启服务</span><br>sudo apachectl configtest  <br>sudo systemctl restart httpd<br></code></pre></td></tr></table></figure><p>完成后访问限制路径内的索引页的效果如下图所示：</p><div class="center"><style>.scqfzmdbxnao{}</style><img src="/2025/05/05/php02/php02_pic12.png" class="scqfzmdbxnao"></div><h2 id="Task-4">Task 4</h2><p>执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">首先需要确认主配置允许使用 .htaccess 文件：</span><br>sudo vim /etc/httpd/conf/httpd.conf<br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">在 /etc/httpd/conf/httpd.conf 中找到对应目录配置</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;Directory <span class="hljs-string">&quot;/var/www/html&quot;</span>&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">    AllowOverride AuthConfig</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">    <span class="hljs-comment"># 其他配置...</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;/Directory&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">创建密码文件并添加第一个用户Alice</span><br>sudo htpasswd -c /etc/httpd/.htpasswd Alice # 系统会提示输入密码，输入&quot;redhat&quot;并确认<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">添加第二个用户Bob</span><br>sudo htpasswd /etc/httpd/.htpasswd Bob # 同样输入密码&quot;redhat&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">设置适当权限</span><br>sudo chown apache:apache /etc/httpd/.htpasswd<br>sudo chmod 640 /etc/httpd/.htpasswd<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">创建 .htaccess 文件</span><br>sudo vim /home/rhauser/public_html/secure/development/restricted/.htaccess<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">文件内容如下：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">AuthType Basic</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">AuthName <span class="hljs-string">&quot;Restricted Area&quot;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">AuthUserFile /etc/httpd/.htpasswd</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Require valid-user</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br></code></pre></td></tr></table></figure><p>完成后就能实现访问限制区域后需要登录的效果：</p><div class="center"><style>.txucszbwfaks{}</style><img src="/2025/05/05/php02/php02_pic13.png" class="txucszbwfaks"></div><p>登录后就能收到访问限制提示：</p><div class="center"><style>.hxuokpeiesti{}</style><img src="/2025/05/05/php02/php02_pic14.png" class="hxuokpeiesti"></div><h2 id="Task-5">Task 5</h2><p>执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">创建新用户并设置密码</span><br>sudo useradd -m sxxxxxxx<br>echo &quot;redhat&quot; | sudo passwd --stdin sxxxxxxx<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">将新用户添加到sudoers当中</span><br>su -<br>sudo usermod -aG wheel sxxxxxxx<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">创建新的目录</span><br>sudo -u sxxxxxxx mkdir /home/sxxxxxxx/public_html<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">创建新的php文件</span><br>sudo su - sxxxxxxx<br>sudo vim ~/public_html/index.php<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">文件内容如下：</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">----------------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;!DOCTYPE html&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;html&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;<span class="hljs-built_in">head</span>&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;title&gt;Example site name&lt;/title&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;/head&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;body&gt;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;h1&gt;Welcome to S8118532<span class="hljs-string">&#x27;s Page!!&lt;/h1&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&lt;br&gt;&lt;br&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&lt;!-- Any other links goes here --&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&lt;br&gt;&lt;br&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&lt;pre&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">Current Directory: &lt;?= dirname(__FILE__) ?&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&lt;/pre&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">----------------------------</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">启用用户目录模块</span></span><br>sudo sed -i &#x27;s/^#UserDir public_html/UserDir public_html/&#x27; /etc/httpd/conf.d/userdir.conf<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">设置目录权限</span></span><br>sudo chmod 711 /home/sxxxxxxx<br>sudo chmod 755 /home/sxxxxxxx/public_html<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">启用用户目录功能</span></span><br>sudo nano /etc/httpd/conf.d/userdir.conf<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">文件内容修改如下：</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">----------------------------</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&lt;IfModule mod_userdir.c&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">    # 注释掉禁用行，启用用户目录功能</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">    #UserDir disabled</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">    UserDir public_html</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">    UserDir disabled root  # 禁止root用户使用此功能</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&lt;/IfModule&gt;</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&lt;Directory &quot;/home/*/public_html&quot;&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">    AllowOverride FileInfo AuthConfig Limit Indexes</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">    Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">    Require method GET POST OPTIONS</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&lt;/Directory&gt;</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">----------------------------</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">重启Apache</span></span><br>sudo systemctl restart httpd<br>sudo systemctl enable httpd<br></code></pre></td></tr></table></figure><p>最终效果如下所示：</p><div class="center"><style>.tqeexarkvgoc{}</style><img src="/2025/05/05/php02/php02_pic15.png" class="tqeexarkvgoc"></div><h2 id="Task-6">Task 6</h2><p>执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">创建错误页目录及文件</span><br>mkdir -p /home/rhauser/public_html/error<br>vi /home/rhauser/public_html/error/403.php<br>vi /home/rhauser/public_html/error/404.php<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">设置权限（确保Apache用户可读）</span><br>chmod 755 /home/rhauser/public_html/error<br>chmod 644 /home/rhauser/public_html/error/*.php<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">修改Apache配置</span><br>sudo vi /etc/httpd/conf/httpd.conf<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">---------------------</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">在配置文件中 ​​全局或对应&lt;VirtualHost&gt;段​​ 添加：</span><br>ErrorDocument 403 /error/403.php # 路径 /error/... 是相对于DocumentRoot的，无需写绝对路径<br>ErrorDocument 404 /error/404.php # 这里我输入的内容是“This is a diy 404 page!!”<br><span class="hljs-meta prompt_"># </span><span class="language-bash">---------------------</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">修改限制目录的权限</span><br>chmod 611 /home/rhauser/public_html/secure/development/restricted<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">重启Apache服务器</span><br>sudo systemctl restart httpd<br></code></pre></td></tr></table></figure><p>完成后，访问一个不存在的页面，例如<code>localhost/notfound</code>页面，打开的效果如下图所示：</p><div class="center"><style>.exxprtutmoju{}</style><img src="/2025/05/05/php02/php02_pic16.png" class="exxprtutmoju"></div>]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
      <category>PHP</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PHP</tag>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 上午题 操作系统知识</title>
    <link href="/2025/04/28/note33/"/>
    <url>/2025/04/28/note33/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}.heimu, .heimu a, a .heimu, .heimu a.new {  background-color: #252525;  color: #252525;  text-shadow: none;}.heimu:hover, .heimu:active,.heimu:hover .heimu, .heimu:active .heimu {  color: white !important;}.heimu:hover a, a:hover .heimu,.heimu:active a, a:active .heimu {  color: lightblue !important;}.heimu:hover .new, .heimu .new:hover, .new:hover .heimu,.heimu:active .new, .heimu .new:active, .new:active .heimu {  color: #BA0000 !important;}</style><h1>软件设计师 上午题 操作系统知识</h1><p>操作系统(Operating System, OS)是为裸机配置的一种系统软件，用于填补人与机器之间的鸿沟。操作系统在计算机系统中的地位如下图所示：</p><div class="center"><style>.vtamivpxqlot{}</style><img src="/2025/04/28/note33/note33_pic01.png" class="vtamivpxqlot"></div><p>不难发现，操作系统是裸机上的第一层软件，是对硬件系统功能的首次扩充，是用户与计算机之间的接口。有了操作系统，系统软件和应用软件等大量其它软件才有了使用基础，因此，操作系统已成为现代计算机系统中必不可少的最重要的系统软件。<br>操作系统的核心功能模块分为进程管理、存储管理、设备管理、文件管理和作业管理五个部分，它们共同构成了操作系统对计算机硬件和软件资源的管理体系。</p><h2 id="一、进程管理">一、进程管理</h2><p>进程管理也称之为处理机管理，为了描述系统中程序执行时的动态变化，操作系统中引入了进程的概念。所谓进程管理即管理计算机中正在运行的程序，其管理重点是研究诸进程之间的并发特性，以及进程之间相互合作与资源竞争产生的问题，进而确保CPU资源被合理分配。</p><h3 id="Ⅰ-基本概念">Ⅰ 基本概念</h3><h4 id="1-程序与进程">1. 程序与进程</h4><p>程序的执行方式大致可以分为顺序执行和并发执行两类：</p><p><strong>1）程序顺序执行的特征</strong>：</p><p>顺序执行是指程序严格按照代码编写的顺序依次执行，前一条语句执行完毕才会执行下一句。程序顺序执行时的主要特征包括顺序性、封闭性和可再现性。<br>此外，有一种有向无环图叫做前驱图，它可以用来描述程序中各个任务之间的依赖关系。因此顺序执行的任务就可以转换为一条线性前驱图，如下图所示：</p><div class="center"><style>.eeeqamvgiglg{}</style><img src="/2025/04/28/note33/note33_pic02.png" class="eeeqamvgiglg"></div><p>其中，输入结束之后才能进行计算，计算结束之后才能进行输出。</p><p><strong>2）程序并发执行的特征</strong>：</p><p>若在计算机系统当中采用多道程序设计技术，则主存中的多道程序可处于并发执行状态。虽然每个作业中有前驱关系的各程序段不能并行执行，但是每个作业中没有前驱关系的程序段或者不同作业的程序段可以并行执行。</p><div class="center"><style>.fptsygdigtzj{}</style><img src="/2025/04/28/note33/note33_pic03.png" class="fptsygdigtzj"></div><p>若每个程序有三个程序段：输入<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">I_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>、计算<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和输出<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。如图4-2所示，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">I_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>就可以和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">C_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>并行执行，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">I_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">C_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>也可以并行执行等等。<br>同时，程序并发执行时有以下特征：</p><ul><li><strong>失去了程序的封闭性</strong>：在顺序执行时，程序独占所有资源，其执行过程不受外界干扰，结果完全由程序自身决定，这也就是所谓的封闭性。而在并发执行的过程中，多个程序共享资源就会打破这一封闭性。</li><li><strong>程序和机器的执行程序的活动不再一一对应</strong>：在顺序执行中，程序指令严格按照代码顺序执行，程序行为是可预测的。但是在并发执行当中因CPU调度、中断、抢占等问题，指令的执行顺序可能被打乱。</li><li><strong>并发程序间的相互制约性</strong>：并发程序由于共享资源或者协作关系，会彼此制约和影响。其中又分为直接制约和间接制约。前者是指程序间进行显式通信，而后者指的是竞争同一资源导致阻塞。</li></ul><hr><div class="center"><style>.pexljoauheru{}</style><img src="/2025/04/28/note33/note33_pic04.png" class="pexljoauheru"></div><p>首先需要了解的是什么是信号量和PV操作。信号量本质上是一个计数器+等待队列+原子操作(即PV操作)。其中计数器中的整型变量，也就是题目中所谓的<code>S1</code>，<code>S2</code>，<code>S3</code>，<code>S4</code>，是用来表示当前可用的“通行许可证”数量，可以用来衡量当前系统中剩余的资源数量。而P操作（Proberen，荷兰语“通过”）是申请资源，操作结果是计数器<code>S</code>-=1，V操作（Verhogen，荷兰语“释放”）是释放资源，作结果是计数器<code>S</code>+=1。另外，信号量是针对于进程转换这个过程而言的，也就是图中的每一个“箭头”，而非针对进程本身。<strong>在每一个箭头当中应该先完成一次V操作再完成一次P操作</strong>。<br>那么对于本题来说，<code>S1</code>是指P1P2之间的箭头，其余以此类推。那么P1进行时，应该先分别完成一次V(S1)和一次V(S2)；然后为了使P2准备就绪，就应该再完成一次P(S1)。重复执行这个思路就能得到最终答案。</p><hr><div class="center"><style>.wzxjyivymrkm{}</style><img src="/2025/04/28/note33/note33_pic05.png" class="wzxjyivymrkm"></div><p>BAC，捋顺<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">I_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>-&gt;<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>-&gt;<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的关系即可。</p><h4 id="2-进程的状态及其状态间的切换">2. 进程的状态及其状态间的切换</h4><p>进程一般有3种基本状态：运行、就绪和阻塞：</p><ul><li>运行：当一个进程在处理机上运行时，则称该进程处于运行状态。</li><li>就绪：一个进程获得了除处理机外的一切所需资源，一旦得到处理机即可运行，则称此进程处于就绪状态。</li><li>阻塞：阻塞也称等待或者睡眠状态，当一个进程正在等待某一事件发生而暂停运行（即使把处理机分配给进程也无法运行），此时该进程处于阻塞状态。</li></ul><p>当在这三种基本状态中捋顺了转换关系，就构成了三态模型：</p><div class="center"><style>.qrbbdmldprjx{}</style><img src="/2025/04/28/note33/note33_pic06.png" class="qrbbdmldprjx"></div><h3 id="Ⅱ-进程间的通信">Ⅱ 进程间的通信</h3><p>显而易见，在一个多道程序环境的系统当中，进程间必然存在资源共享和相互合作的问题，而进程通信就是指各个进程之间交换信息的过程。</p><h4 id="1-同步与互斥">1. 同步与互斥</h4><blockquote><p>同步是合作进程间的直接制约问题，互斥是申请临界资源进程间的间接制约问题。<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="软件设计师教程（第五版）. (2018).">[1]</span></a></sup></p></blockquote><p>用人话说就是，同步是多个进程需要按照特定的顺序协作完成任务，互斥是多个进程竞争同一资源，需要保证同一时间仅一个进程访问。</p><p><strong>1）进程间的同步</strong></p><p>在计算机系统当中，多个进程可以并发执行，每个进程都以各自独立的、不可预知的速度向前推进，但是需要在某些确定点上协调相互合作进程间的工作。例如进程A煮米，进程B炒米，那显然必须是进程A完成了之后才能进行进程B，否则进程B就要停下来等待进程A。</p><p><strong>2）进程间的互斥</strong></p><p>在多道程序系统环境当中，有一种资源一次只能供一个进程使用，这种资源我们称其为临界资源，比如打印机。那么进程之间的互斥就是系统中多个进程因争用临界资源而发生的互斥执行。</p><p><strong>3）临界区管理的原则</strong></p><p>临界区即进程中对临界资源实施操作的那段程序，对互斥临界区的管理有以下几条原则：</p><ul><li>有空即进。</li><li>无空则等。</li><li>有限等待：应该保证进程在<strong>有限的时间</strong>内能够进入临界区，以免其陷入“饥饿”状态。</li><li>让权等待：当进程不能进入自己的临界区时，应立即释放处理机，以免进程陷入忙等待（如果暂时轮不到你的时候就先去忙别的事情）。</li></ul><h4 id="2-信号量机制">2. 信号量机制</h4><p>在本文的前边我们已经了解过信号量和PV操作相关的内容，这里我们主要探讨如何使用PV操作实现进程间的同步和互斥：</p><p><strong>1）利用PV操作实现进程间的同步</strong></p><p>要实现进程的同步可以用一个信号量与消息联系起来，当信号量的值为0时表示希望的消息未产生，当信号量的值为非0的时候表示希望的消息已经存在。那么进程就可以通过调用P操作测试消息是否到达，通过调用V操作通知消息已经准备好。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c">semaphore sync = <span class="hljs-number">0</span>; <span class="hljs-comment">// 初始值为0的同步信号量</span><br><br>Process <span class="hljs-title function_">A</span><span class="hljs-params">()</span> <br>&#123;<br>    <span class="hljs-comment">// 执行操作A</span><br>    V(sync);    <span class="hljs-comment">// 通知进程B操作A已完成</span><br>&#125;<br><br>Process <span class="hljs-title function_">B</span><span class="hljs-params">()</span> <br>&#123;<br>    P(sync);    <span class="hljs-comment">// 等待操作A完成</span><br>    <span class="hljs-comment">// 执行操作B</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2）利用PV操作实现进程间的互斥</strong></p><p>令信号量S的初值为1，当进入临界区时执行P操作，退出临界区时执行V操作。这样一来，每当有程序段调用临界资源时S就能减1，防止共用一个临界资源的情况产生。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c">semaphore mutex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 初始值为1的互斥信号量</span><br><br>Process <span class="hljs-title function_">P1</span><span class="hljs-params">()</span> <br>&#123;<br>    P(mutex);    <span class="hljs-comment">// 进入临界区前申请锁</span><br>    <span class="hljs-comment">// 临界区代码</span><br>    V(mutex);    <span class="hljs-comment">// 离开临界区后释放锁</span><br>&#125;<br><br>Process <span class="hljs-title function_">P2</span><span class="hljs-params">()</span> <br>&#123;<br>    P(mutex);<br>    <span class="hljs-comment">// 临界区代码</span><br>    V(mutex);<br>&#125;<br></code></pre></td></tr></table></figure><hr><div class="center"><style>.niiwpdbkkmcu{}</style><img src="/2025/04/28/note33/note33_pic07.png" class="niiwpdbkkmcu"></div><p><strong>D</strong>。系统内有两台打印机，那么说明起始的可用资源总数应为2，即S的最大值应为2。当第一个进程想要调用打印机时，它就需要进行一次P(S)操作，S变为1。随后依次类推，每个进程逐次进行P(S)操作，最后就得到了S的最小值为-(n-2)。</p><hr><div class="center"><style>.opeqhmbwgrld{}</style><img src="/2025/04/28/note33/note33_pic08.png" class="opeqhmbwgrld"></div><p><strong>BA</strong>，不难发现，生产者甲和生产者乙两者之间需要保持一种同步关系，而生产者甲和生产者乙自身所处的过程则需要保持一种互斥关系。在之前的学习中我们了解到，如果要保持同步关系，需要先执行一次V操作通知资源已经准备好，而如果要保持互斥关系，需要先执行一次P操作来占用资源。据此分析，S1是一个互斥信号量，在存放前减一，在取出后加一，用来表示的应该是半成品箱中被占用的资源，<strong>因此其初值应该为n</strong>；而S2是一个同步信号量，用来表示生产者甲通知生产者乙已经完成了一个半成品，<strong>因此其初值应该为0</strong>。此外，根据题目，S也是一个互斥信号量，鉴于它在每一个临界区中都会出现，它表示的应该是半成品箱是否正在被占用以存取物品，<strong>因此其初值应该为1</strong>。</p><hr><div class="center"><style>.jrqgphpslbuh{}</style><img src="/2025/04/28/note33/note33_pic09.png" class="jrqgphpslbuh"></div><p><strong>CD</strong>， <span class="heimu"><s>信号量S应该与一个互斥的进程有关，即当前还有几个购票终端可以使用，那么这个信号量的初值就应该为n-1。</s></span>  用户在选定具体的终端<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>之后需要占用这个终端，因此需要一个互斥信号量S，<strong>其初始值应该为1</strong>；<strong>(a)处应该为P(S)</strong>，因为当一个乘客想要买票时会占用一个终端；<strong>(b)处和©处都应该是V(S)</strong>，因为此时已经完成了购票流程，可以释放终端了。</p><h3 id="Ⅲ-死锁">Ⅲ 死锁</h3><p>死锁现象的一般表现为：多个进程/线程均无法继续执行，系统整体或部分功能停滞（如程序无响应、任务无法完成），在本小节中我们仅了解同类资源分配不当引起的死锁。<br>当系统中有n个进程，每个进程所需要的资源数为k，系统中的资源总数为m，且系统采用的分配策略是轮流地为每个进程分配资源时，若<strong>m &lt; n*（k-1）+1</strong>，则会发生死锁。</p><h4 id="1-进程资源图">1. 进程资源图</h4><p>进程资源图是一种​​有向图​​，用于描述操作系统中的​​进程与资源之间的分配和请求关系​​，是分析和检测死锁的重要工具，其一般形式如下图所示：</p><div class="center"><style>.qpufxwvnayek{}</style><img src="/2025/04/28/note33/note33_pic10.png" class="qpufxwvnayek"></div><p>其中，一个圆圈代表一个进程，一个矩形代表一个资源，其中的圆圈个数是其资源的数量。</p><p>不同数字代表的箭头含义不同：</p><ol><li>表示P1向R申请一个资源</li><li>表示R向P1分配一个资源</li><li>表示<strong>R先分配给P1一个资源</strong>，P1再向R申请一个资源</li><li>R已经向三个进程分配了自己全部的三个资源，此时P1再向R申请资源就会进入等待态，即堵塞状态。</li></ol><p>此外，进程资源图是可化简的，其步骤如下所述：</p><ol><li>把不阻塞的进程的所有边都去掉，形成一个孤立的点，再把系统分配给这个进程的资源回收回来。</li><li>看剩下的进程有哪些是不阻塞的，然后又把它们逐个变成孤立的点。</li><li>最后，所有的资源和进程都变成孤立的点。这样的图就叫做“可完全简化”。</li></ol><p>如果一个图可完全简化，该系统就不会产生死锁，反之就会产生死锁。</p><hr><div class="center"><style>.qjbwpimwshbq{}</style><img src="/2025/04/28/note33/note33_pic11.png" class="qjbwpimwshbq"></div><p><strong>BC</strong>，在图(a)中，R1中两个资源已经分配完毕但依旧有P2的申请，因此P2是一个堵塞结点，P1同理，图(b)同理。</p><hr><h4 id="2-死锁的避免策略">2. 死锁的避免策略</h4><p>银行家算法​​是一种经典的​​死锁避免算法​​，由Dijkstra提出，用于确保操作系统在分配资源时不会进入死锁状态。它的核心思想是​​模拟资源分配​​，仅当分配后系统仍处于​​安全状态​​时才批准请求，否则让进程等待。</p><blockquote><p>银行家（操作系统）需要确保手头的现金（资源）能满足所有客户（进程）的贷款需求，同时避免资金链断裂（死锁）。</p></blockquote><div class="center"><style>.dtldxcyfsppr{}</style><img src="/2025/04/28/note33/note33_pic12.png" class="dtldxcyfsppr"></div><p>以此题为例，通过对已分配资源数的加和计算，不难发现R1，R2和R3的剩余资源数分别为1、1、0。<br>那么显然此时不能再继续执行还需要R3分配资源的进程了，观察后发现只有P4符合这一条件，因此执行序列的第一个应该为P4，<strong>排除①②</strong>。<br>下面可以讨论序列③能否完成，可以借助下图分析：</p><div class="center"><style>.exwfjlnbgyyc{}</style><img src="/2025/04/28/note33/note33_pic13.png" class="exwfjlnbgyyc"></div><p>如果一个进程最终能够执行完毕，我们就给它打上一个<code>True</code>的标志。而检查其是否能够执行完毕的条件即为<code>可用</code>能否覆盖<code>需求</code>。同时，一个进程完成之后会释放所有已经占用的资源，即<code>可用+已分</code>部分的内容。据此分析，P1是无法完成的，因此<strong>排除序列③</strong>。</p><h3 id="Ⅳ-线程">Ⅳ 线程</h3><blockquote><p>传统的进程有两个基本属性:可拥有资源的独立单位;可独立调度和分配的基本单位。引入线程的原因是进程在创建、撤销和切换中，系统必须为之付出较大的时空开销，故在系统中设置的进程数目不宜过多，进程切换的频率不宜太高，这就限制了并发程度的提高。引入线程后，将传统进程的两个基本属性分开，线程作为调度和分配的基本单位，进程作为独立分配资源的单位。用户可以通过创建线程来完成任务，以减少程序并发执行时付出的时空开销。<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="软件设计师教程（第五版）. (2018).">[1]</span></a></sup></p></blockquote><div class="center"><table><thead><tr><th><strong>对比维度</strong></th><th><strong>进程（Process）</strong></th><th><strong>线程（Thread）</strong></th></tr></thead><tbody><tr><td><strong>定义</strong></td><td>操作系统资源分配的基本单位，拥有独立的内存空间。</td><td>进程内的执行单元，共享进程资源，是CPU调度的基本单位。</td></tr><tr><td><strong>资源占用</strong></td><td>独立的内存、文件句柄、CPU时间等。</td><td>共享进程的内存和资源，仅私有栈和寄存器。</td></tr><tr><td><strong>创建/销毁开销</strong></td><td>高（需分配独立资源）。</td><td>低（共享进程资源，仅需少量初始化）。</td></tr><tr><td><strong>切换成本</strong></td><td>高（需切换内存空间、更新页表等）。</td><td>低（仅切换寄存器、栈等线程私有数据）。</td></tr><tr><td><strong>独立性</strong></td><td>崩溃后不影响其他进程。</td><td>崩溃可能导致整个进程终止（共享地址空间）。</td></tr><tr><td><strong>并发性</strong></td><td>多进程依赖进程间切换（上下文切换成本高）。</td><td>多线程可真正并行（同一进程内线程切换成本低）。</td></tr><tr><td><strong>适用场景</strong></td><td>需要隔离性、安全性的任务（如不同用户的程序）。</td><td>需要高并发、低延迟的任务（如Web服务器处理请求）。</td></tr><tr><td><strong>类比</strong></td><td>独立的“工厂”，拥有自己的设备和资源。</td><td>工厂中的“工人”，共享设备但独立执行任务。</td></tr></tbody></table></div><p>此外，同一个进程中的不同线程都可以共享这个进程中的资源。</p><h2 id="二、存储管理">二、存储管理</h2><blockquote><p>存储器管理的对象是主存存储器简称主存或内存。存储器是计算机系统中的关键性资源，是存放各种信息的主要场所。尽管近年来内存越来越便宜、容量越来越大，但系统软件、应用软件在功能及其所需存储空间等方面都在急剧膨胀，如何对存储器实施有效的管理，不仅直接影响到存储器的利用率，而且还对系统性能有很大的影响。存储器管理的主要功能包括主存空间的分配和回收、提高主存的利用率、扩充主存、对主存信息实现有效保护。<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="软件设计师教程（第五版）. (2018).">[1]</span></a></sup></p></blockquote><h4 id="前置知识：局部性原理">前置知识：局部性原理</h4><p>局部性原理是计算机系统的一个重要行为特征，它描述了程序在执行过程中对内存访问的规律性，即程序更倾向于在短时间内集中访问某些特定的内存区域，而不是均匀地访问整个地址空间：</p><ul><li>时间局部性：如果一个数据或指令被访问过，那么它在不久的将来很可能再次被访问。</li><li>空间局部性：如果一个数据被访问，那么它附近的数据（如相邻的内存地址）也可能很快被访问。</li></ul><h3 id="Ⅰ-分页存储管理">Ⅰ 分页存储管理</h3><p>进行分页管理的原理即为将一个进程的地址空间划分成若干个大小相等的区域，称为页，同时将主存空间划分成与页相等大小的若干个物理块，称为块。在实际运行时会将若干个页分别装入多个不相邻接的块中。</p><div class="center"><style>.unwxcsruintp{}</style><img src="/2025/04/28/note33/note33_pic14.png" class="unwxcsruintp"></div><p>分页系统的地址结构如上图所示，由页号和偏移量（即页内地址）两部分组成。其中页号是高位部分，用于索引页表，而页内偏移是低位部分，直接对应物理页内的位置。</p><hr><div class="center"><style>.evksdghbjgnx{}</style><img src="/2025/04/28/note33/note33_pic16.png" class="evksdghbjgnx"></div><p><strong>AC</strong>，根据题意不难发现，页面0、页面2和页面4在内存当中，若需淘汰应在在三个页面当中淘汰。而根据程序的局部性原理，页面0最近被访问过，页面2、页面4既被访问过又被修改过，因此最有可能淘汰的是页面0。此外，由于页面大小为4KB，即4×2^10字节，亦即2^12字节，说明该系统中页有12位。也就是说只有当<strong>页面偏移量为12时</strong>才能覆盖所有位，如此一来便确定了页面偏移量。而题目中给出的2C25H等同于0x2C25（H用来表明该数采用十六进制表示），也就是一共有4个数，即4×4=16位。那么在后12位为页面偏移量的情况下，剩余的前4位，即第1个数就是页号了，为2。随后再根据页表内的信息将页号转换为页帧号（即物理块号），就得到了<strong>物理地址为4C25H</strong>。</p><h3 id="Ⅱ-段页式存储管理">Ⅱ 段页式存储管理</h3><p>段页式存储管理是一种对段式存储和页式存储“各取所长”的存储管理方式，它先将整个主存划分成大小相等的存储块，随后将用户程序按程序的逻辑关系分为若干个段，再将一个段划分成若干个页。据此就形成了由段号、段内页号和业内地址三部分组成的段页式管理的地址：</p><div class="center"><style>.pgpmfjebzvxb{}</style><img src="/2025/04/28/note33/note33_pic17.png" class="pgpmfjebzvxb"></div><hr><div class="center"><style>.xmdqkuevqxym{}</style><img src="/2025/04/28/note33/note33_pic18.png" class="xmdqkuevqxym"></div><p><strong>B</strong>，简单的分段计算，唯一需要注意的是页号所在段的长度描述的是每个段<strong>最大允许</strong>有多少多少个页。</p><h2 id="三、设备管理">三、设备管理</h2><h3 id="Ⅰ-缓冲技术">Ⅰ 缓冲技术</h3><p>缓冲技术是一种通过临时存储数据来协调不同速度设备或组件之间数据传输的方法，旨在解决速度不匹配问题，提高系统效率和性能。其核心原理是在数据生产者（如CPU、磁盘）与消费者（如打印机、网络）之间设立一个中间存储区（缓冲区），允许两者以各自最佳速率运行，减少等待时间。此外，亦有单缓冲区和双缓冲区的差别：</p><div class="center"><table><thead><tr><th><strong>特性</strong></th><th><strong>单缓冲区</strong></th><th><strong>双缓冲区</strong></th></tr></thead><tbody><tr><td><strong>结构</strong></td><td>仅一个缓冲区</td><td>两个缓冲区交替使用（Buffer A/B）</td></tr><tr><td><strong>工作流程</strong></td><td>生产者填满→消费者读取→生产者等待</td><td>生产者填满A时，可立即填充B，消费者同时读取A</td></tr><tr><td><strong>阻塞情况</strong></td><td>生产/消费过程可能相互阻塞</td><td>生产与消费可并行，减少阻塞</td></tr><tr><td><strong>效率</strong></td><td>较低</td><td>较高</td></tr><tr><td><strong>适用场景</strong></td><td>低速或非实时场景</td><td>高速或实时需求</td></tr></tbody></table></div><hr><div class="center"><style>.vzakwxniltqb{}</style><img src="/2025/04/28/note33/note33_pic19.png" class="vzakwxniltqb"></div><p><strong>CB</strong>，</p><p>单缓冲工作的过程图和并行工作的示意图如下图所示：</p><div class="center"><style>.cooppnkmduix{}</style><img src="/2025/04/28/note33/note33_pic20.png" class="cooppnkmduix"></div><p>不难发现当单缓冲区并行工作时，上一个任务的处理过程和下一个任务的输入过程是并行的，因此每个任务的实际工作时长可以看作10+5=15μs，再加上最后一个任务多余的处理时间，总时间即为15×10+2=152μs。</p><p>双缓冲工作的过程图和并行工作的示意图如下图所示：</p><div class="center"><style>.fftbpoosvlhm{}</style><img src="/2025/04/28/note33/note33_pic21.png" class="fftbpoosvlhm"></div><p>双缓冲区和单缓冲区的不同就在于其输入过程是持续不断的，因此只需要计算10次输入过程的时长，并再加上最后一个任务的传送以及处理时间即可，答案为107μs。</p><h3 id="Ⅱ-磁盘调度">Ⅱ 磁盘调度</h3><p>计算机从一个磁盘中读取数据的基本过程为：读/写头移动到目标柱面上，这一过程称之为寻道时间；而存储数据的目标扇区会一刻不停旋转，想要读取数据就需要等待扇区旋转到读/写头的位置，这一过程称之为旋转延迟。</p><div class="center"><style>.jayygxlxopzw{}</style><img src="/2025/04/28/note33/note33_pic23.png" class="jayygxlxopzw"></div><p>而磁盘调度算法分为移臂调度和旋转调度两类，并且是先进行移臂调度，然后进行旋转调度。需要注意的是，在访问磁盘的过程中最耗时的是寻道时间。</p><h4 id="1-移臂调度算法">1. 移臂调度算法</h4><h5 id="1）-先来先服务算法（FCFS）">1） 先来先服务算法（FCFS）</h5><h5 id="2）-最短寻道时间优先算法（SSTF）">2） 最短寻道时间优先算法（SSTF）</h5><p>这种算法要求访问的磁道与当前磁头所在的磁道距离最近。</p><h5 id="3）-扫描算法（SCAN）">3） 扫描算法（SCAN）</h5><p>SCAN算法较于SSTF算法的区别在于其只考虑当前移动方向内的距离最近的磁道，在当前移动方向上没有磁道需要访问了磁头才会转向。</p><h5 id="4）-单向扫描调度算法（CSCAN）">4） 单向扫描调度算法（CSCAN）</h5><p>CSCAN算法和SCAN算法的区别在于前者是一种单向扫描算法，这意味着该算法在折返过程中不会停留，将保持循环往复保持同一起点进行单向扫描。</p><h4 id="2-旋转调度算法">2. 旋转调度算法</h4><p>当读写头到达指定位置之后，会有多个进程等待访问该柱面，那么该如何决定这些进程的访问顺序？就需要考虑以下几种情况：</p><ul><li>进程请求访问的是同一磁道上不同编号的扇区</li><li>进程请求访问的是不同磁道上不同编号的扇区</li><li>进程请求访问的是不同磁道上相同编号的扇区</li></ul><p>对于前两种情况，旋转调度总是让首先到达读/写头位置的扇区进行操作，而后一种情况下则是任选一个扇区进行传送操作。</p><p>旋转调度算法中常常涉及到在磁盘中对信息存储进行优化分布，鉴于在这里不便展开，详情请参见<a href="https://www.bilibili.com/video/BV1AY411E7GC?vd_source=d2a4fcb87f01b1e635c2de07e4f9fb34&amp;spm_id_from=333.788.videopod.episodes&amp;p=79">2010年上半年第27、28题</a>。</p><h2 id="四、文件管理">四、文件管理</h2><h3 id="Ⅰ-文件目录">Ⅰ 文件目录</h3><p>为了实现文件的“按名存取”，操作系统中势必存在一种来管理文件的数据结构，我们称其为文件控制块（FCB），而FCB的有序集合就是文件目录，故而文件控制块也可以被称作目录项。</p><h4 id="1-文件控制块">1. 文件控制块</h4><p>FCB中包含以下三类信息：</p><ul><li>基本信息类：存储文件名、文件的物理地址、文件长度等。</li><li>存取控制信息类：存储文件的存取权限。</li><li>使用信息类：存储文件建立日期、最后一次修改日期、当前使用的信息等。</li></ul><h4 id="2-目录结构">2. 目录结构</h4><p>如何组织目录结构显然是一个重要的议题，它将直接影响文件的存取速度。常见的目录结构有以下三种:</p><ul><li>一级目录结构：整个目录结构是一个线性结构，即在整个系统中只需要建立一张目录表，系统为每一个文件分配一个目录项。</li><li>二级目录结构：一级目录结构的一个缺点就是不同用户的文件容易重名且缺乏隔离性，因此我们可以引入二级目录结构的概念。二级目录结构由用户目录和主目录组成，主目录是系统唯一的顶层目录，包含所有用户的子目录，而用户目录则用来管理用户自己的独立文件。</li><li>多级目录结构：但是二级目录结构过强的隔离性又影响了多个用户之间的协作，比如一个用户难以直接访问另一个用户的文件，因此我们又引入了多级目录结构。多级目录结构类似于一棵树，从树根向下，每一个结点是一个目录，叶子节点即为文件，现代操作系统一般都采用了这种目录结构。</li></ul><div class="center"><table><thead><tr><th><strong>特性</strong></th><th>单级目录</th><th>二级目录</th><th><strong>多级目录</strong></th></tr></thead><tbody><tr><td><strong>结构复杂度</strong></td><td>最简单（所有文件同级存储）</td><td>中等（用户目录+主目录）</td><td>最复杂（树形嵌套，但灵活性最高）</td></tr><tr><td><strong>命名冲突</strong></td><td>极易发生（文件名必须唯一）</td><td>用户间隔离（同用户仍冲突）</td><td>路径唯一性彻底解决（如<code>/a/1.txt</code>和<code>/b/1.txt</code>可共存）</td></tr><tr><td><strong>扩展性</strong></td><td>无法扩展</td><td>有限扩展（仅两级）</td><td>无限嵌套子目录（如<code>/a/b/c/...</code>）</td></tr><tr><td><strong>权限控制</strong></td><td>全局统一权限</td><td>用户目录独立权限</td><td>每个目录可单独设权限（<code>chmod</code>）</td></tr><tr><td><strong>典型系统</strong></td><td>早期DOS</td><td>早期Unix</td><td>现代Linux/Windows/macOS</td></tr><tr><td><strong>路径示例</strong></td><td><code>file.txt</code></td><td><code>/home/user1/file.txt</code></td><td><code>/home/user1/docs/project1.txt</code></td></tr></tbody></table></div><h3 id="Ⅱ-存储空间的管理">Ⅱ 存储空间的管理</h3><h4 id="位示图">位示图</h4><p>位示图是一种常见的空闲空间的管理方法，它通过在外存上建立一张位示图来记录文件存储器的使用情况。</p><div class="center"><style>.vvvdytmcnrap{}</style><img src="/2025/04/28/note33/note33_pic26.png" class="vvvdytmcnrap"></div><p>其中，每一个<strong>字</strong>对应的是文件存储器中的连续的物理块。假如当前的计算机系统的字长为32位，那么第0字就代表了0~31号物理块，第1字就代表了32~63号物理块，以此类推。而物理块上填写的0、1即为其空闲与否的状态。</p><hr><div class="center"><style>.injxoxmaqhbi{}</style><img src="/2025/04/28/note33/note33_pic27.png" class="injxoxmaqhbi"></div><p><strong>B</strong>，简单计算，不再赘述。</p><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>软件设计师教程（第五版）. (2018).<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>上午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 上午题 设计模式</title>
    <link href="/2025/04/27/note32/"/>
    <url>/2025/04/27/note32/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 上午题 设计模式</h1><blockquote><p>每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的解决方案的核心。这样，你就能一次又一次地使用该方案而不必做重复劳动。<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="软件设计师教程（第五版）. (2018).">[1]</span></a></sup></p></blockquote><p>设计模式提供了相关问题的解决方案，使得人们可以更加简单方便地复用成功的设计和体系结构，其中一般有以下4个基本要素：</p><ol><li>模式名称：一个助记名，用一两个词来描述模式的问题、解决方案和效果。</li><li>问题：问题描述了应该在何时使用模式。</li><li>解决方案：解决方案描述了设计的组成成分、它们之间的相互关系以及各自的职责和协作方式。</li><li>效果：效果描述了模式应用的效果以及使用模式应权衡的问题。</li></ol><p>而总的来说，设计模式部分的内容可以按着下面这个表格梳理：</p><div class="center"><style>.wuqehmhurwke{}</style><img src="/2025/04/27/note32/note32_pic01.png" class="wuqehmhurwke"></div><h2 id="一、创建型设计模式">一、创建型设计模式</h2><p>创建型设计模式的侧重点为对象创建机制，也就是说通过控制对象的创建方式来提升代码的灵活性和可复用性。</p><blockquote><p>因此，创建型模式在什么被创建，谁创建它，它是怎样被创建的，以及何时创建这些方面给予了很大的灵活性。它们允许用结构和功能差别很大的“产品”对象配置一个系统。配置可以是静态的(即在编译时指定)，也可以是动态的(在运行时)。<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="软件设计师教程（第五版）. (2018).">[1]</span></a></sup></p></blockquote><p>一般来说，创建型设计模式有以下几种具体的实现方式：</p><h3 id="Ⅰ-工厂模式">Ⅰ 工厂模式</h3><p>工厂模式是最常见的设计模式之一，它提供了一种使得创建对象的过程与使用对象的过程分离的方式，使得用户在创建对象时无需指定要创建的具体类。就如同如果朱博宁去买高铁，它只需要去提车即可，不需要关心高铁是如何制造出来的。工厂模式具体有以下几种：</p><h4 id="1-简单工厂模式">1. 简单工厂模式</h4><p>简单工厂模式不属于GoF 23种设计模式，但它是工厂方法模式实现的基础。简单工厂模式提供一个静态工厂方法，可以根据传入的参数决定创建哪种具体产品类的实例。但这显然违背了开闭原则(Open for extension, closed for modification)，如果要新增产品就要修改工厂逻辑。</p><h4 id="2-工厂方法模式">2. 工厂方法模式</h4><p>和简单工厂模式不同的是，工厂方法模式中定义了一个创建对象的接口，这样一来就满足了开闭原则。</p><div class="center"><style>.poiprniqnfst{}</style><img src="/2025/04/27/note32/note32_pic02.png" class="poiprniqnfst"></div><p>在工厂方法模式当中，父类（抽象工厂）只声明创建方法（比如上图中的<code>createProduct()</code>）而不关心具体实现，子类（具体工厂）负责实现父类的创建方法并返回具体的产品实例。</p><h4 id="3-抽象工厂模式">3. 抽象工厂模式</h4><p>和工厂方法模式当中创建单一产品不同的是，抽象工厂模式当中创建了一个产品家族，即一系列相关或相互依赖的的对象。</p><div class="center"><style>.vjdzdivddmof{}</style><img src="/2025/04/27/note32/note32_pic03.png" class="vjdzdivddmof"></div><h3 id="Ⅱ-生成器模式">Ⅱ 生成器模式</h3><p>生成器模式的特点是将对象的构造过程与其表示分离，使得同样的构建过程可以创建不同的表示，主要用于分步骤构建复杂对象，其结构如下所示：</p><div class="center"><style>.uqdwpfsjtips{}</style><img src="/2025/04/27/note32/note32_pic05.png" class="uqdwpfsjtips"></div><h3 id="Ⅲ-原型模式">Ⅲ 原型模式</h3><p>原型模式的核心思想是通过复制现有对象（原型）来创建新对象，而不是通过<code>new</code>实例化。因此原型模式可以基于克隆快速生成对象，避免重复执行耗时的初始化操作。其结构如下所示：</p><div class="center"><style>.ispdydjfsoum{}</style><img src="/2025/04/27/note32/note32_pic07.png" class="ispdydjfsoum"></div><h3 id="Ⅳ-单例模式">Ⅳ 单例模式</h3><p>单例模式确保一个类中只有一个实例，并提供一个全局访问点。它通过控制实例化过程，避免重复创建对象，节省资源。其结构如下所示：</p><div class="center"><style>.cejhnhcsrizb{}</style><img src="/2025/04/27/note32/note32_pic08.png" class="cejhnhcsrizb"></div><h3 id="Ⅴ-真题赏析">Ⅴ 真题赏析</h3><div class="center"><style>.gsggxejhenxz{}</style><img src="/2025/04/27/note32/note32_pic06.png" class="gsggxejhenxz"></div><p><strong>ACAD</strong>，对于（45）而言，所谓的<code>构造一个使用Builder接口的对象</code>指的就是控制整个流程的类，是<strong>Director(指挥者)</strong>，那么对于本题而言就是Waiter。此外，对于（47）而言，Builder模式适用于：1）创建复杂对象的算法应该独立于该对象的组成部分以及装配方式时；2）当构造过程必须允许被构造对象有不同的表示时。</p><h2 id="二、结构型设计模式">二、结构型设计模式</h2><p>结构型设计模式是一类用于处理对象组合和关系的设计模式，其重点解决：1）如何组合类和对象以形成更大的结构；2）如何简化对象间的依赖关系，提升灵活性和可扩展性。<br>结构型设计模式有以下七种经典模式：</p><h3 id="Ⅰ-适配器模式">Ⅰ 适配器模式</h3><p>适配器模式的核心思想是通过一个中间层（适配器）来解决接口不匹配的问题，类似于电源插头转换器的角色。它用于将不兼容的接口转换为客户端期望的接口，使原本无法协同工作的类能够一同工作。适配器模式的结构如下所示：</p><div class="center"><style>.bakqewkqhwka{}</style><img src="/2025/04/27/note32/note32_pic09.png" class="bakqewkqhwka"></div><h3 id="Ⅱ-桥接模式">Ⅱ 桥接模式</h3><p>桥接模式的核心思想是通过组合代替继承，解决多层继承带来的类爆炸问题，提升系统的灵活性和可扩展性。这使得桥接模式可以将抽象部分和实现部分分离，使得它们可以独立变化。桥接模式的结构如下所示：</p><div class="center"><style>.ihdlgmwusxeh{}</style><img src="/2025/04/27/note32/note32_pic10.png" class="ihdlgmwusxeh"></div><p>其中，抽象是系统的高级控制逻辑，定义客户端直接使用的接口和行为。抽象并不关心具体实现细节，而是通过组合持有一个实现的引用。而实现则是系统的底层核心操作，独立于抽象，可以自由变化或者替换。</p><h3 id="Ⅲ-组合模式">Ⅲ 组合模式</h3><p>假如现在有这么一个公司组织结构：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs txt">CEO<br>├── 技术部<br>│   ├── 开发组<br>│   │   ├── 程序员A（叶子）<br>│   │   └── 程序员B（叶子）<br>│   └── 测试组<br>│       └── 测试员X（叶子）<br>└── 财务部<br>    └── 会计Y（叶子）<br></code></pre></td></tr></table></figure><p>在组合模式当中，无论是部门（容器节点）还是员工（叶子结点），都可以被统一看作“公司成员”。它们之间的区别是叶子结点直接实现基础行为，而容器节点除了自身行为之外还可以递归调用子节点的方法。例如在计算全公司人数时，只需要让每个“公司成员”返回自己的人数并进行递归累加即可，无需区分部门还是员工。<br>这就是组合模式，它会将对象组合成树形结构以表示“部分-整体”的层次关系，使得用户对单个对象和组合对象的使用具有一致性。其结构如下图所示：</p><div class="center"><style>.pjfjkomfrdog{}</style><img src="/2025/04/27/note32/note32_pic12.png" class="pjfjkomfrdog"></div><h3 id="Ⅳ-装饰器">Ⅳ 装饰器</h3><p>装饰器的核心思想是通过嵌套包装对象来扩展功能，而非通过子类继承。因此，装饰器模式可以用于动态地为对象添加额外职责。其结构如下所示：</p><div class="center"><style>.eupnuwrbqtjh{}</style><img src="/2025/04/27/note32/note32_pic14.png" class="eupnuwrbqtjh"></div><h3 id="Ⅴ-外观模式">Ⅴ 外观模式</h3><p>外观模式的核心思想是用一个高层接口包装一组接口，让客户端只需调用一个简单方法就能完成复杂功能。这样一来就可以为复杂的子系统提供一个统一的简化接口，隐藏内部细节，降低客户端与子系统的耦合度。外观模式的结构如下图所示：</p><div class="center"><style>.rvbvhmhuipwu{}</style><img src="/2025/04/27/note32/note32_pic15.png" class="rvbvhmhuipwu"></div><p>其中，Facade知道哪些子系统类复制处理请求，会将客户的请求代理给适当的子系统对象。</p><h3 id="Ⅵ-享元模式">Ⅵ 享元模式</h3><p>享元模式的核心思想是分离对象的固有状态（共享）和外部状态（非共享），从而通过共享技术高效地支持大量细粒度对象的复用，进而减少内存占用和对象创建开销。享元模式的结构如下图所示：</p><div class="center"><style>.osvziimtmxzg{}</style><img src="/2025/04/27/note32/note32_pic17.png" class="osvziimtmxzg"></div><p>例如在一款射击游戏当中需要渲染大量子弹，对于每颗子弹而言有以下属性：</p><ul><li>固有状态（共享）：纹理图片、颜色、伤害值等（所有子弹相同）。</li><li>外部状态（非共享）：位置坐标、飞行角度等（每颗子弹不同）。</li></ul><p>享元模式就是共享相同纹理的子弹对象来解决内存消耗过大的问题。</p><h3 id="Ⅶ-代理模式">Ⅶ 代理模式</h3><p>代理模式通过创建一个代理对象来控制对原始对象的访问，在不改变原始类的情况下增强功能。代理模式的核心思想是由“代理”充当中间人，在客户端和目标对象之间插入一层，用于添加额外逻辑。其结构如下图所示：</p><div class="center"><style>.smsgjwciyrxo{}</style><img src="/2025/04/27/note32/note32_pic18.png" class="smsgjwciyrxo"></div><h3 id="Ⅷ-真题赏析">Ⅷ 真题赏析</h3><div class="center"><style>.ospyqvplxsai{}</style><img src="/2025/04/27/note32/note32_pic11.png" class="ospyqvplxsai"></div><p><strong>CDAB</strong>，桥接模式适用于：</p><ol><li>不希望在抽象和它的实现部分之间有一个固定的绑定关系。</li><li>类的抽象以及它的实现都应该可以通过生成子类的方法加以扩充。</li><li>对一个抽象的实现部分的修改应对客户不产生影响，即客户代码不必重新编译。</li><li>(C++)想对客户完全隐藏抽象的实现部分。</li><li>有许多类要生成的类层次结构。</li><li>想在多个对象间共享实现(可能使用引用计数)，但同时要求客户并不知道这一点。</li></ol><hr><div class="center"><style>.mbjmljqtrvtf{}</style><img src="/2025/04/27/note32/note32_pic16.png" class="mbjmljqtrvtf"></div><p><strong>CD</strong>，对于（45）题的A选项而言，这是<strong>责任链模式</strong>的适用情况。</p><h2 id="三、行为型设计模式">三、行为型设计模式</h2><p>行为型设计模式是设计模式当中的最后一大类，和先前介绍的注重于对象创建机制的创建型设计模式、注重于对象组合和关系的结构型设计模式不同的是，行为型设计模式专注于对象之间的交互方式和算法的封装。这类设计模式不关注对象如何创建或者组合，而是<strong>定义对象如何协作完成任务</strong>。</p><p>常见的行为型设计模式有以下11种（死…）：</p><h3 id="Ⅰ-责任链模式">Ⅰ 责任链模式</h3><p>责任链使得多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。它允许用户将请求沿着处理链传递，直到有一个处理者能够处理它。其结构如下图所示：</p><div class="center"><style>.swllpuatgqsh{}</style><img src="/2025/04/27/note32/note32_pic19.png" class="swllpuatgqsh"></div><h3 id="Ⅱ-命令模式">Ⅱ 命令模式</h3><p>命令模式将请求封装为独立的对象（命令），允许用户参数化客户端（调用者）与接收者（执行者），从而支持请求的排队、撤销、日志记录等操作。其结构如下图所示：</p><div class="center"><style>.yzaqwbirzghv{}</style><img src="/2025/04/27/note32/note32_pic20.png" class="yzaqwbirzghv"></div><h3 id="Ⅲ-解释器模式">Ⅲ 解释器模式</h3><p>解释器模式的核心思想是“将语言种的每个语法规则表示为一个类，通过组合这些类来构建语法树，最终解释执行”。因此这种设计模式可以用于定义一种语言的语法规则，并提供一个解释器来解释该语言中的表达式。其结构如下图所示：</p><div class="center"><style>.nsyemgkwkysu{}</style><img src="/2025/04/27/note32/note32_pic21.png" class="nsyemgkwkysu"></div><h3 id="Ⅳ-迭代器模式">Ⅳ 迭代器模式</h3><p>迭代器模式提供一种方法顺序访问聚合对象（列表、树等）中的元素，而不需要暴露该对象的内部表示，这实际上是将遍历逻辑从聚合对象中分离出来了。这种设计模式的结构如下所示：</p><div class="center"><style>.vscprtxwayua{}</style><img src="/2025/04/27/note32/note32_pic22.png" class="vscprtxwayua"></div><h3 id="Ⅴ-中介者模式">Ⅴ 中介者模式</h3><p>中介者模式的核心思想是“使用一个中介者来封装一系列对象之间的交互，使各个对象不需要显式地相互引用”，即通过引入中介对象来集中管理多个对象之间的交互，从而减少对象间的直接耦合，使系统更易于维护和扩展。这种设计模式的结构如下图所示：</p><div class="center"><style>.yujspnwuhvnr{}</style><img src="/2025/04/27/note32/note32_pic23.png" class="yujspnwuhvnr"></div><h3 id="Ⅵ-备忘录模式">Ⅵ 备忘录模式</h3><p>备忘录模式的核心思想是“在不暴露对象实现细节的情况下，保存和恢复其内部状态”，它允许在不破坏封装性的前提下捕获并外部化对象的内部状态，以便后续可以恢复到该状态。其结构如下图所示：</p><div class="center"><style>.vcewyjwnmhpv{}</style><img src="/2025/04/27/note32/note32_pic24.png" class="vcewyjwnmhpv"></div><h3 id="Ⅶ-观察者模式">Ⅶ 观察者模式</h3><p>在观察者模式当中定义了对象间的一对多依赖关系，当一个对象（主题）状态改变时，所有依赖它的对象（观察者）都会自动收到通知并更新。其结构如下图所示：</p><div class="center"><style>.rnicboptxwva{}</style><img src="/2025/04/27/note32/note32_pic25.png" class="rnicboptxwva"></div><h3 id="Ⅷ-状态模式">Ⅷ 状态模式</h3><p>状态模式的核心为：同一个动作在不同状态下有不同的表现。例如日常用的台灯，正常状态下按开关出现的是白光，护眼模式下同样按开关出现的却是黄光。</p><blockquote><p>（状态模式）允许一个对象在其内部状态改变时改变它的行为。对象看起来似乎修改了它的类。<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="软件设计师教程（第五版）. (2018).">[1]</span></a></sup></p></blockquote><p>状态模式的结构如下图所示：</p><div class="center"><style>.rfmsbqjndchx{}</style><img src="/2025/04/27/note32/note32_pic26.png" class="rfmsbqjndchx"></div><h3 id="Ⅸ-策略模式">Ⅸ 策略模式</h3><p>策略模式是一种将算法抽离出来的设计模式，它定义一系列算法（策略）​​，并将每个算法封装成独立类，使它们可以​​互相替换​​，且算法的变化不影响使用它的客户端。该模式的结构如下图所示：</p><div class="center"><style>.fizbpurctsym{}</style><img src="/2025/04/27/note32/note32_pic27.png" class="fizbpurctsym"></div><h3 id="Ⅹ-模板方法">Ⅹ 模板方法</h3><p>模板方法模式的核心思想为：“在不改变算法结构的情况下，允许子类重写算法的特定步骤”，这就类似于我们在按照食谱做一道菜的时候，大致的步骤是固定的，但其中诸如撒盐多少的细节就可以根据个人喜好进行调整。也就是说，模板方法模式在父类当中定义算法的骨架，而将某些步骤的具体实现延迟到子类当中完成，其结构如下图所示：</p><div class="center"><style>.jjuenfbihydj{}</style><img src="/2025/04/27/note32/note32_pic28.png" class="jjuenfbihydj"></div><h3 id="XI-访问者模式">XI 访问者模式</h3><p><em><s>最后一个！！！</s></em></p><p>访问者模式适用于对象结构稳定但需要频繁新增操作的场景，它可以将数据结构和数据操作分离，允许在不修改对象类的前提下，让新增操作像“访问者”一样灵活接入。这种设计模式的结构如下图所示：</p><div class="center"><style>.gqrmqojxogkw{}</style><img src="/2025/04/27/note32/note32_pic29.png" class="gqrmqojxogkw"></div><h2 id="三、真题赏析">三、真题赏析</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>软件设计师教程（第五版）. (2018).<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>上午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 下午题 试题三 UML分析与设计</title>
    <link href="/2025/04/26/note31/"/>
    <url>/2025/04/26/note31/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 下午题 试题三 UML分析与设计</h1><p>试题三考察的内容依旧是UML，没有什么新的知识点的引入，在下午题的学习当中就以做题的形式简单熟悉一下。</p><h3 id="1-2016年上半年">1. 2016年上半年</h3><div class="center"><style>.ishjoekrdezo{}</style><img src="/2025/04/26/note31/note31_pic01.jpg" class="ishjoekrdezo"></div><ul><li>【问题1】<strong>U1/U2: Run, Step; U3: Write; U4/U5/U6: Move, Left, Read</strong>。</li><li>【问题2】<strong>U1, U2和Run Program有泛化关系; U3, U4, U5, U6和Select Robot有扩展关系</strong>。首先需要注意的是，图3-2是一张用例图，而在用例图当中，只有包含、扩展和泛化三种关系。而用例U1和U2是用例Run Program的继承且表现出更特别的行为，所以它们之间是泛化关系；用例U3~U6是用例Select Robot中独立且可选的行为，是扩展关系。</li><li>【问题3】<strong>C1：文件；C2：机器人在虚拟世界中的行为；C3：Instruction；C4：Instruction Set；C5：仿真系统</strong>。</li></ul><h3 id="2-2015年上半年">2. 2015年上半年</h3><div class="center"><style>.hxjvmsdpnzzl{}</style><img src="/2025/04/26/note31/note31_pic02.jpg" class="hxjvmsdpnzzl"></div><ul><li>【问题1】<strong>(1) C5; (2) C9; (3) C7; (4) C6; (5)(6) C8, C10; (7) C2</strong>。需要注意的是，C7和C9并不能交换位置。C7和C9都有指向C5的泛化关系不难理解，但是C9和C5之间应该还会有一层聚合关系，也就是说C5可以包含多个C9，这与题干中的“多个团体可以组成一个新的团体”的题意是相符的。</li><li>【问题2】<strong>M1: C5; M2: C2; M3: C3; M4: C3; M5: C3; M6: C8; M7: C10; M8: C10; M9: C12; M10: C1</strong>。</li><li>【问题3】<strong>组合模式，在本题中由于拍卖者分为个人拍卖者和团体拍卖者两种，而团体也可以组成新的团体参与拍卖活动。这样的整体-部分关系，适合于使用组合模式表达</strong>。</li></ul><h3 id="3-2014年下半年">3. 2014年下半年</h3><div class="center"><style>.mgjitemtcuvy{}</style><img src="/2025/04/26/note31/note31_pic03.jpg" class="mgjitemtcuvy"></div><ul><li>【问题1】<strong>C1: Address; C2: Riding; C3: Ineligible; C4: Eligible</strong>。</li><li>【问题2】<strong>M1: 1; M2: *; M3: *; M4: 1; M5: *; M6: 1</strong>。</li><li>【问题3】<strong>将M1和M4修改为1…</strong>*。</li></ul>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>下午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Git “bad config line 1 in file .git/config”报错的解决方案</title>
    <link href="/2025/04/24/md02/"/>
    <url>/2025/04/24/md02/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>Git “bad config line 1 in file .git/config”报错的解决方案</h1><p>昨天晚上下了自习之后准备把笔记到Hexo上然后回寝室睡大觉，结果出现了以下报错：</p><div class="center"><style>.slfhcqcntylb{}</style><img src="/2025/04/24/md02/md02_pic01.png" class="slfhcqcntylb"></div><p>其实之前也出现过一次这样的情况，但是当时什么动作也没做重新第二遍尝试<code>hexo d</code>就提交成功了，加上搜了一些技术文档看到有人说只是网络问题所以就没放在心上继续回去睡大觉了。<br><br>但是今天早上起来再尝试deploy的时候依旧出现同样的报错，这下开始发现应该是哪个配置文件出现了问题，下面是花两节课摸索出来的解决方案：</p><h3 id="1-删除-hexo-deploy-git">1. 删除/hexo/.deploy_git</h3><div class="center"><style>.tyceoaqcejrz{}</style><img src="/2025/04/24/md02/md02_pic02.png" class="tyceoaqcejrz"></div><p>我的本地代码库如上图所示，我最开始找<code>config</code>文件时一直找的就是<code>/.git</code>文件夹中的<code>config</code>文件。但是不论我用记事本打开这个文件还是用<code>$ vi .git/config</code>检查这个文件其中的内容都一切正常。<br><br>后来也反复尝试过删除<code>/.git/config</code>文件，再使用<code>$ git init</code>命令恢复它也无济于事。<br><br>直到我突然发现<code>.deploy_git</code>文件夹中也有一个<code>.git</code>文件夹，并且其中也有一个<code>config</code>文件，并且打开之后其内容是一片空白！<br><br>那么也许这就是问题所在了，于是我尝试删除了<code>/hexo/.deploy_git</code>。</p><h3 id="2-使用管理员模式运行Git-Bash">2. 使用管理员模式运行Git Bash</h3><p>在删除目标文件夹之后我重新尝试了<code>$ hexo d</code>命令，但是提示错误信息为没有足够的权限：</p><div class="center"><style>.mpovthgixddc{}</style><img src="/2025/04/24/md02/md02_pic05.png" class="mpovthgixddc"></div><br><p>那么就需要使用管理员模式运行<code>Git Bash</code>了，按下图图示操作即可：<br></p><br><div class="center"><style>.euilhkchktck{}</style><img src="/2025/04/24/md02/md02_pic03.png" class="euilhkchktck"></div><br><p>随后就能正常递交文档了：</p><br><div class="center"><style>.mgnozqhixedm{}</style><img src="/2025/04/24/md02/md02_pic04.png" class="mgnozqhixedm"></div>]]></content>
    
    
    <categories>
      
      <category>疑难杂症解决方案</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 上午题 UML</title>
    <link href="/2025/04/24/note30/"/>
    <url>/2025/04/24/note30/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 上午题 UML</h1><p>统一建模语言(Unified Modeling Language, UNL)是一种面向对象软件的标准化建模语言，其简单、统一且富有表达力，目前已经成为可视化建模语言事实上的工业标准。<br>UML的词汇表中包含了3种构造块：事物、关系和图。事物是对模型种最具有代表性的成分的抽象；关系将事物联系在了一起；图则聚集了相关的事物。下面我们将逐一了解这些构造块：</p><h2 id="一、事物">一、事物</h2><p>UML中有四种事物：结构事物、行为事物、分组事物和注释事物：</p><h4 id="1-结构事物">1. 结构事物</h4><p>结构事物通常是模型中的静态部分，用来描述概念或者物理元素，各种结构事物的图形化表示如下图所示：</p><div class="center"><style>.qxamtqcssjko{}</style><img src="/2025/04/24/note30/note30_pic01.png" class="qxamtqcssjko"></div><h4 id="2-行为事物">2. 行为事物</h4><p>行为事物通常是模型中的动态部分，用来描述跨越时间和空间的行为，其图形化表示如下图所示：</p><div class="center"><style>.iruxqczibtyf{}</style><img src="/2025/04/24/note30/note30_pic02.png" class="iruxqczibtyf"></div><h4 id="3-分组事物">3. 分组事物</h4><p>分组事物是UML模型中的组织部分，是一些由模型分解成的“盒子”。在应用中最主要的分组事物是包(Package)，它能够将元素组织起来，绝大分事物都可以放进包内。包的图形化表示如下图所示：</p><div class="center"><style>.nrluhtfilcbg{}</style><img src="/2025/04/24/note30/note30_pic03.png" class="nrluhtfilcbg"></div><h4 id="4-注释事物">4. 注释事物</h4><p>这种事物的概念不难理解，而注解(Note)是其中比较重要的一种注释事物，其图形化表示如下图所示：</p><div class="center"><style>.cuphsoakuorl{}</style><img src="/2025/04/24/note30/note30_pic04.png" class="cuphsoakuorl"></div><h2 id="二、关系">二、关系</h2><p>UML当中有四种关系：依赖、关联、泛化和实现。</p><h3 id="Ⅰ-概念了解">Ⅰ 概念了解</h3><h4 id="1-依赖">1. 依赖</h4><p>在依赖关系中，一个事物（独立事物）发生变化会影响另一个事物（依赖事物）的语义，其图形化表示如下图所示：</p><div class="center"><style>.jdzzmqugbssz{}</style><img src="/2025/04/24/note30/note30_pic05.png" class="jdzzmqugbssz"></div><p>当出现<code>A --------&gt; B</code>时，A是<code>依赖事物</code>，B是<code>独立事物</code>。<br>需要注意的是，依赖关系是单向的且是临时的，仅表示依赖事物需要独立事物，反之不成立。依赖可以体现在代码中的参数传递、局部变量、静态方法调用等场景。</p><h4 id="2-关联">2. 关联</h4><p>当两个对象之间被连接起来，它们就构成了关联关系，如下图所示：</p><div class="center"><style>.cshuevmxftah{}</style><img src="/2025/04/24/note30/note30_pic06.png" class="cshuevmxftah"></div><p>不难发现，在关联上还可以标注重复度(Multiplicity)和角色(Role)，其中重复度指的就是参与关联的对象数量关系。<br><br>此外，还有两种特殊的关联，即聚集和组合，它们都描述的是整体和部分之间的结构关系，但是也略有不同：<br>i.  聚集：部分和整体的生命周期不一致，整体消失了，部分仍然存在。例如员工和公司。<br>ii. 组合：部分和整体的生命周期一致，整体消失了，部分也就消失了。例如部门和公司。</p><div class="center"><style>.brwtgievwsla{}</style><img src="/2025/04/24/note30/note30_pic07.png" class="brwtgievwsla"></div><p>此外还有一种单向关联的情况，类似于<code>A ——&gt; B</code>，它和依赖关系<code>A ---&gt; B</code>的区别就在于前者不是临时的但后者是临时的。例如<code>人 ——&gt; 氧气</code>和<code>人 ---&gt; 食物</code>。</p><h4 id="3-泛化">3. 泛化</h4><p>即继承，它由特殊元素（子元素）指向一般元素（父元素）。用这种方法，子元素就可以共享父元素的结构和行为。例如猫泛化动物、狗泛化动物等。</p><div class="center"><style>.ywljvlradsyk{}</style><img src="/2025/04/24/note30/note30_pic08.png" class="ywljvlradsyk"></div><h4 id="4-实现">4. 实现</h4><p>实现是类元之间的语义关系，其中一个类元指定了另一个类元保证执行的契约。</p><div class="center"><style>.hojcqxlhebtc{}</style><img src="/2025/04/24/note30/note30_pic09.png" class="hojcqxlhebtc"></div><h3 id="Ⅱ-真题赏析">Ⅱ 真题赏析</h3><div class="center"><style>.vujtacitprwn{}</style><img src="/2025/04/24/note30/note30_pic10.png" class="vujtacitprwn"></div><p><strong>A</strong>，关联关系和泛化关系的区别在于，虽然它们都是特殊和一般之间的关系，但是关联关系是对象之间的关系，但是泛化是类之间的关系。</p><hr><div class="center"><style>.bievffxwdtfg{}</style><img src="/2025/04/24/note30/note30_pic11.png" class="bievffxwdtfg"></div><p><strong>D</strong>，两个类之间的关联关系可以有多个，但不能有无限多个，都必须有对应的角色进行标识（如下图所示）。多个关联不必强行聚合成一个，聚合仅是一种特殊的关联。</p><div class="center"><style>.rfjwxpixmfuq{}</style><img src="/2025/04/24/note30/note30_pic12.png" class="rfjwxpixmfuq"></div><h2 id="三、图">三、图</h2><p>在UML当中，图是一组元素的图形表示，我们一般情况下会将图画成事物和弧的连通图，而常见的图有以下几类：<br></p><p><em>注：由于这个板块的知识点比较零碎，不再单独设置<strong>真题赏析</strong>模块，真题将直接附在每个子模块后边。</em></p><h3 id="Ⅰ-类图">Ⅰ 类图</h3><p>类图是面向对象系统的建模中所建立的最常见的图，一般来说，一个类图中的内容即为类和类之间的依赖、泛化和关联关系。</p><div class="center"><style>.gchqznkojine{}</style><img src="/2025/04/24/note30/note30_pic13.png" class="gchqznkojine"></div><hr><ol><li>2015年下半年：</li></ol><div class="center"><style>.gvbjssqedqga{}</style><img src="/2025/04/24/note30/note30_pic14.png" class="gvbjssqedqga"></div><p><strong>B</strong>，继承和覆盖的区别在于前者是一种复用，而后者则是一种重新实现。在本题当中，显然在<code>Car</code>类和<code>Boat</code>类当中的<code>+move()</code>函数并不是同一种函数，也就是说它们不可能都是对<code>Transport</code>类中<code>+move()</code>函数的继承，那么只能是为了实现多态而重新实现该函数了。</p><hr><ol start="2"><li>2020年下半年：</li></ol><div class="center"><style>.mroavywsthto{}</style><img src="/2025/04/24/note30/note30_pic15.png" class="mroavywsthto"></div><p><strong>D</strong>，我们首先需要搞清楚什么是直接对象什么是非直接对象，直接对象是指直接从某个类中实例化的对象，而非直接对象则是指通过继承或者关联关系间接属于某个类的对象。对于本题中的A类，它是一个抽象类，抽象类是无法进行实例化的，也就是说A1和A2是A类的非直接对象。那么D选项中所谓的“A的直接对象”根本就不存在，错误。</p><h3 id="Ⅱ-对象图">Ⅱ 对象图</h3><p>对象图展现的是某一时刻的一组对象以及它们之间的关系，描述了在类图中所建立的事物的实例的静态快照，其中一般包括的有对象和链。</p><div class="center"><style>.uyugeehgxdbo{}</style><img src="/2025/04/24/note30/note30_pic16.png" class="uyugeehgxdbo"></div><h3 id="Ⅲ-用例图">Ⅲ 用例图</h3><p>用例图是UML当中用于描述系统功能需求和用户交互的静态视图，其核心关注点在于参与者和系统功能之间的关系。</p><div class="center"><style>.qjmmipkhgxhp{}</style><img src="/2025/04/24/note30/note30_pic17.png" class="qjmmipkhgxhp"></div><p>可以注意到的是，在用例图当中还包含了三种关系，这三种关系是用来描述用例和用例之间的交互逻辑的：</p><ul><li>包含关系：表示一个用例必须调用另一个用例的功能，属于强依赖关系。</li><li>扩展关系：表示一个用例在特定条件下扩展另一个用例的功能，属于可选依赖。</li><li>泛化关系：表示用例之间的继承关系，子用例继承父用例的行为并扩展。</li></ul><p>需要注意的是，包含关系和扩展关系再用例图当中的线条是一样的，区分它们的依据是虚线旁边的<code>&lt;&lt;extend&gt;&gt;</code>或者<code>&lt;&lt;include&gt;&gt;</code>。</p><h3 id="Ⅳ-交互图">Ⅳ 交互图</h3><p>交互图是UML中用于描述​​对象间动态交互行为​​的图表，根据不同的目的又可划分为序列图和通信图。</p><h4 id="1-序列图">1. 序列图</h4><p>序列图是场景(Scenario)的图形化表示，描述了以时间顺序组织的对象之间的交互活动，如下图所示。</p><div class="center"><style>.xendfhvpevbe{}</style><img src="/2025/04/24/note30/note30_pic18.png" class="xendfhvpevbe"></div><p>在序列图当中，我们一般把参加交互的对象放在图的上方（发起交互的对象在左，下级对象在右），然后把这些对象发送和接收的消息沿垂直方向按时间顺序从上到下放置。这样一来我们就得到了控制流随时间的可视化轨迹。<br>序列图当中还有两个特征：</p><ul><li>对象生命线：在序列图当中用一根垂直的虚线来表示一个对象在一段时间内的存在。</li><li>控制焦点：在序列图当中用一个瘦高的矩形来表示一个对象执行一个动作所经历的时间段。</li></ul><hr><ol><li>2013年下半年：</li></ol><div class="center"><style>.xlfgrtqsbccu{}</style><img src="/2025/04/24/note30/note30_pic19.png" class="xlfgrtqsbccu"></div><p><strong>CB</strong>，首先要注意的是，在此题当中除了用虚线表示的<code>evaluation()</code>函数是返回消息之外，其余的四种函数都是同步消息。而一条从A指向B的同步消息的本质是A要求B执行一个明确的操作，也就意味着如果对象A向对象B发送一条同步消息则对象B必须实现该方法。根据此原则不难发现，除了<code>check()</code>函数需要<code>Person</code>类来实现之外，其余的几种函数都需要<code>Account</code>类来实现。</p><h4 id="2-通信图">2. 通信图</h4><p>通信图在早期的版本中也被称作协作图，强调的是参加交互的对象的组织关系，如下图所示：</p><div class="center"><style>.ituhfdgyvgsz{}</style><img src="/2025/04/24/note30/note30_pic20.png" class="ituhfdgyvgsz"></div><p>通信图中有两个特性：</p><ul><li>通信图中有路径：通信图当中用实线连接两个对象来表示对象之间存在的交互关联关系。</li><li>通信图中有顺序号：通信图中每个新消息前都有一个数字前缀，用于表示消息的时间顺序。</li></ul><p><strong>不难发现，序列图和通信图是同构的，它们之间可以互相转换。</strong></p><h3 id="Ⅴ-状态图">Ⅴ 状态图</h3><p>状态图展现了一个状态机，用来描述对象生命周期内状态变化，专注于展示对象如何响应事件并在不同状态间转换，如下图所示：</p><div class="center"><style>.gqoskfyvjwwc{}</style><img src="/2025/04/24/note30/note30_pic21.png" class="gqoskfyvjwwc"></div><p>状态图当中包含了以下四个比较重要的概念：</p><ol><li>状态：状态指的是对象在生命周期中的稳定条件，在特定时间段内保持属性值和行为不变。其中，●表示开始，⚪表示结束。如果一个状态当中还包含一个子状态，那么我们称这个状态为组合状态，或者为超状态。</li><li>活动：活动指的是对象在特定状态中持续执行的行为。<ol><li>入口活动(entry)：进入状态，立即执行。</li><li>执行活动(do)：占有有限时间，可以中断。</li><li>出口活动(exit)：退出状态，立即执行。</li></ol></li><li>转换：转换指的是状态间的有向跳转，由事件触发并可能伴随条件和动作。此外，在转移过程中存在一个被称为“监护条件”的布尔值，用<code>[]</code>表示，如果存在监护条件，只有其为真值时才能触发转换。</li><li>事件：事件指的是触发状态转换的离散发生的事宜。</li></ol><hr><ol><li>2013年上半年：</li></ol><div class="center"><style>.andohrhvbagw{}</style><img src="/2025/04/24/note30/note30_pic22.png" class="andohrhvbagw"></div><p><strong>C</strong>，这道题的难点在于如何区分选项C和选项D。我们首先需要明白的是，当对象处于某种状态时，这个状态被称之为激活状态，只有从激活状态出发才能进行转换。对于C选项，事件e2的激活状态只有状态B中嵌套的子状态B2，会发生转换的情况应该如选项B描述的那样；而对于D选项，事件e1的激活状态是整个状态B，也就是说不论是B1、B2、B3抑或是B4都是激活状态，事件e1一发生就能触发状态转换。</p><hr><ol start="2"><li>2019年下半年</li></ol><div class="center"><style>.yizdbhwoitbb{}</style><img src="/2025/04/24/note30/note30_pic23.png" class="yizdbhwoitbb"></div><p><strong>C</strong>，迁移要包含两个状态。</p><h3 id="Ⅵ-活动图">Ⅵ 活动图</h3><p>活动图是一种特殊的状态图，它展现了在系统内从一个活动到另一个活动的流程，其中一般包括活动状态和动作状态、转换和对象，如下图所示：</p><div class="center"><style>.oohlcvxrcgtd{}</style><img src="/2025/04/24/note30/note30_pic24.png" class="oohlcvxrcgtd"></div><hr><ol><li>2013年下半年：</li></ol><div class="center"><style>.utumugwkbuxm{}</style><img src="/2025/04/24/note30/note30_pic25.png" class="utumugwkbuxm"></div><p><strong>C</strong>，这里需要弄清除的是UML活动图当中各个符号的含义。1）菱形表示的是流程当中的条件分支，将根据监护条件决定下一步执行的路径。2）黑色粗长条表示的是分叉/汇合结点，其作用是将单一流程拆分为多个<strong>并行执行</strong>的子流程/将子流程合并为单一流程继续执行。</p><h3 id="Ⅶ-构件图">Ⅶ 构件图</h3><p>构件图展现了一组构件之间的组织和依赖关系，它与类图相关，通常把构件映射为一个或多个类、接口或者协作，如下图所示：</p><div class="center"><style>.uubgakksxoxo{}</style><img src="/2025/04/24/note30/note30_pic26.png" class="uubgakksxoxo"></div><hr><ol><li>2009年上半年：</li></ol><div class="center"><style>.ofvsivuyimwg{}</style><img src="/2025/04/24/note30/note30_pic27.png" class="ofvsivuyimwg"></div><p><strong>AB</strong>，在UML组件图当中，供接口和需接口之间的关系就是调用和被调用之间的关系。</p><h3 id="Ⅷ-部署图">Ⅷ 部署图</h3><p>部署图是UML中用于描述​​系统物理架构​​的静态结构图，展示软件组件如何部署到硬件节点（如服务器、设备）上，以及节点间的通信关系，常在<strong>实施阶段</strong>使用，如下图所示：</p><div class="center"><style>.wbrmkjiqkchc{}</style><img src="/2025/04/24/note30/note30_pic28.png" class="wbrmkjiqkchc"></div><h3 id="Ⅸ-总结">Ⅸ 总结</h3><div class="center"><h1>表3-1 UML各种视图及其主要概念</h1><table><thead><tr><th style="text-align:center">主要的域</th><th style="text-align:center">视图</th><th style="text-align:center">图</th><th style="text-align:center">主要概念</th></tr></thead><tbody><tr><td style="text-align:center"><strong>结构</strong></td><td style="text-align:center">静态视图</td><td style="text-align:center">类图</td><td style="text-align:center">类、关联、泛化、依赖关系、实现、接口</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">用例视图</td><td style="text-align:center">用例图</td><td style="text-align:center">用例、参与者、关联、扩展、包括、用例泛化</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">实现视图</td><td style="text-align:center">构件图</td><td style="text-align:center">构件、接口、依赖关系、实现</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">部署视图</td><td style="text-align:center">部署图</td><td style="text-align:center">节点、构件、依赖关系、实现</td></tr><tr><td style="text-align:center"><strong>动态</strong></td><td style="text-align:center">状态机视图</td><td style="text-align:center">状态图</td><td style="text-align:center">状态、事件、转换、动作</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">活动视图</td><td style="text-align:center">活动图</td><td style="text-align:center">状态、活动、完成转换、分叉、结合</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">交互视图</td><td style="text-align:center">顺序图</td><td style="text-align:center">交互、对象、消息、激活</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">协作图</td><td style="text-align:center">协作、交互、协作角色、消息</td></tr><tr><td style="text-align:center"><strong>模型管理</strong></td><td style="text-align:center">模型管理视图</td><td style="text-align:center">类图</td><td style="text-align:center">包、子系统、模型</td></tr><tr><td style="text-align:center"><strong>可扩展性</strong></td><td style="text-align:center">所有</td><td style="text-align:center">所有</td><td style="text-align:center">约束、构造型、标记值</td></tr></tbody></table></div>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>上午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 下午题 试题二 数据库设计</title>
    <link href="/2025/04/23/note29/"/>
    <url>/2025/04/23/note29/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 下午题 试题二 数据库设计</h1><h2 id="一、问题一">一、问题一</h2><p>问题一一般考察的内容就是ER图中缺失的联系，如下图所示：</p><div class="center"><style>.naoywbdwlsqi{}</style><img src="/2025/04/23/note29/note29_pic01.png" class="naoywbdwlsqi"></div><p>以《软件设计师考试同步辅导（下午科目）》中的例题为例：</p><div class="center"><style>.oxftthxuvisp{}</style><img src="/2025/04/23/note29/note29_pic02.png" class="oxftthxuvisp"></div><p>答：<strong>配送员-配送-地点，多对多联系</strong>。</p><h2 id="二、问题二">二、问题二</h2><p>问题二一般考察的是补充关系模式中缺失的属性，依旧以例1为例：</p><div class="center"><style>.mhevfpicckpg{}</style><img src="/2025/04/23/note29/note29_pic03.png" class="mhevfpicckpg"></div><p>答：<br>（a）<strong>商品数量，仓库信息</strong>；<br>（b）<strong>支付凭证号码</strong>；<br>（c）<strong>商品条码，订单ID</strong>；<br><br><br>作答此题时不能仅仅看ER图进行回答，还要通读题干中的【需求描述】，否则很容易遗失属性信息。此外每一空中不一定只缺失一个属性，需要将所有缺失的属性都补充完整。例如<code>仓库信息</code>的出处就是（5）中的<code>商品所在的仓库信息</code>。</p><h2 id="三、问题三">三、问题三</h2><p>问题三的考察内容不固定，但是一般需要掌握以下知识点，以应对除了修改ER图之外的考点：</p><ol><li>弱实体：弱实体是不能单独存在，必须依赖于其它实体才能存在的实体。弱实体用双线矩形框表示，其与实体的关系用双线菱形表示。</li><li>简单属性：简单属性是指​​不能再分解​​为更小组成部分的属性，它是数据库中最基本的数据单元。简单属性也称为​​原子属性​​，表示一个实体的单一特征。</li><li>规范性问题：按第一范式到第三范式的标准逐一检查是否符合规范，下面来复习一下各个范式的要求：<ol><li>第一范式：表中所有属性都应该是简单属性。</li><li>第二范式：表中不允许存在部分依赖，即非主属性不能依赖于组合主键的一部分。</li><li>第三范式：表中不允许存在传递依赖，即一个非主属性不能依赖于另一个非主属性。</li></ol></li></ol><p>除此之外，最主要的考察内容就是对ER图进行补充和修改，具体情况具体分析即可。</p>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>下午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 下午题 试题一 数据流图设计</title>
    <link href="/2025/04/23/note28/"/>
    <url>/2025/04/23/note28/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 下午题 试题一 数据流图设计</h1><p>数据流图也称数据流程图（Data Flow Diagram, DFD），其中基本的图形元素有数据流、加工、数据存储和外部实体。</p><div class="center"><style>.oppsdpncwsdp{}</style><img src="/2025/04/23/note28/note28_pic01.png" class="oppsdpncwsdp"></div><ol><li>外部实体(External Agent)：存在于当前软件系统之外的人、物或者外部系统：<ol><li>人：学生、老师、员工…</li><li>物：传感器、控制器、车辆、部门…</li><li>外部系统：支付系统、库存管理系统…</li></ol></li><li>加工(Process)：加工描述了输入数据流到输出数据流之间的变换，每个加工都有一个名字和编号。一个加工至少有一个输入数据流和一个输出数据流。<ol><li>只有输入没有输出的加工称之为黑洞。</li><li>只有输出没有输入的加工称之为白洞。</li><li>加工的数据不足以产生输出数据，称其为灰洞。</li></ol></li><li>数据存储(Data Store)：用来表示存储的数据，每个数据存储都有一个名字。它可以存储加工的输出数据也可以提供加工的输入数据。</li><li>数据流(Data Flow)：用来表示数据的流向。<strong>数据流的起点或者终点必须有一个是加工</strong>。</li></ol><h2 id="一、问题一">一、问题一</h2><p>问题一考察的内容一般是要求写出3到5个实体的名称。</p><p>以《软件设计师考试同步辅导（下午试题）》中的例题为例：</p><div class="center"><style>.qpnedqeuiyog{}</style><img src="/2025/04/23/note28/note28_pic02.jpg" class="qpnedqeuiyog"></div><p>E1: <strong>学生</strong>，E2: <strong>讲师</strong>，E3: <strong>教务人员</strong></p><h2 id="二、问题二">二、问题二</h2><p>问题二考察的内容一般是要求写出3到5个数据存储的名称。</p><p>依旧以例2为例：</p><div class="center"><style>.yambuhfwfuhx{}</style><img src="/2025/04/23/note28/note28_pic03.jpg" class="yambuhfwfuhx"></div><p>D1：<strong>作业（表）</strong>，D2：<strong>学生表</strong>，D3：<strong>讲师表</strong>，D4：<strong>批改后的作业（表）</strong>。<br><br>此外，关于图1-4所表示的上下文数据流图和图1-5所表示的0层数据流图的区别如下表所示：</p><div class="center"><table><thead><tr><th><strong>特性</strong></th><th><strong>上下文DFD</strong></th><th><strong>0层DFD</strong></th></tr></thead><tbody><tr><td><strong>处理过程数量</strong></td><td>1个（整个系统）</td><td>多个（主要子过程）</td></tr><tr><td><strong>数据存储</strong></td><td>不显示</td><td>首次引入</td></tr><tr><td><strong>详细程度</strong></td><td>仅系统与外部交互</td><td>系统内部关键流程</td></tr><tr><td><strong>用途</strong></td><td>定义系统边界</td><td>初步设计内部逻辑</td></tr></tbody></table></div><h2 id="三、问题三">三、问题三</h2><p>问题三一般会考察缺失的数据流的情况，需要根据题意分析缺失了哪些数据流并将其补充完整。</p><p>解决问题三一般有以下几种方法：</p><ol><li>父图子图平衡：父图即为上下文数据流图，子图即为0层数据流图。父图显然一定正确，于是就可以根据父图的正确信息逐一排除子图中的数据流是否有缺失。</li><li>加工既有输入数据流也有输出数据流。</li></ol><p>依旧以例2为例：</p><div class="center"><style>.uwuedupiguwr{}</style><img src="/2025/04/23/note28/note28_pic03.jpg" class="uwuedupiguwr"></div><p>答：</p><ol><li>数据流名称：通知；起点：提交作业；终点：E1。</li><li>数据流名称：抽检报告；起点：作业抽检；终点：E2。</li><li>数据流名称：分数和评价；起点：记录分数和评价；终点：D2。</li><li>数据流名称：通知；起点：记录分数和评价；终点：E1。</li></ol>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>下午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 上午题 数据库</title>
    <link href="/2025/04/23/note27/"/>
    <url>/2025/04/23/note27/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 上午题 数据库</h1><h2 id="一、数据库的三级模式结构">一、数据库的三级模式结构</h2><p>尽管数据库的产品很多，但其体系结构基本上都具有相同的特征，都采用“三级模式和两级映像”。</p><div class="center"><style>.uqpsnmcdcylg{}</style><img src="/2025/04/23/note27/note27_pic01.png" class="uqpsnmcdcylg"></div><p>数据按外模式的描述提供给用户，按内模式的描述存储在磁盘上，而概念模式提供了连接这两级模式的相对稳定的中间层，并使得两级中任意一级的改变都不受另一级影响。</p><h3 id="Ⅰ-概念模式">Ⅰ 概念模式</h3><p>概念模式也称模式，是在逻辑层上对数据进行抽象，是数据库中全部数据的逻辑结构和特征的描述。起到了基本表的作用（基本表是实际存在的表，是实际存储数据的逻辑表示）。</p><h3 id="Ⅱ-外模式">Ⅱ 外模式</h3><p>外模式也称用户模式或者子模式，是在视图层上对数据进行抽象。它可以作用户与数据库系统的接口，起到了视图的作用。</p><h3 id="Ⅲ-内模式">Ⅲ 内模式</h3><p>内模式也称存储模式，是在物理层上对数据进行抽象。它起到了存储文件的作用。</p><h3 id="Ⅳ-两级映像">Ⅳ 两级映像</h3><p>数据库系统在三级模式之间提供了两级映像：模式/内模式映像，外模式/模式映像。两级映像的确立使得数据具有了独立性：</p><ol><li>数据的物理独立性：内模式发生改变时数据库的逻辑模式不需改变，只需修改模式/内模式映像即可。</li><li>数据的逻辑独立性：用户的应用程序和数据库的逻辑结构是相互独立的，只需修改模式/外模式映像即可。</li></ol><h2 id="二、关系代数">二、关系代数</h2><h3 id="Ⅰ-完整性约束">Ⅰ 完整性约束</h3><p>完整性规则提供了一种手段来保证用户对数据库做修改时不会破坏数据的一致性，关系的完整性一共分为三类：</p><ol><li>实体完整性：关系中主键的值不能为空或部分为空。</li><li>参照完整性：如果关系R2的外键X与关系R1的主键相对应，则外键X的每个值必须在关系R1中主键的值中找到，或者为空值。</li><li>用户定义完整性：针对某一具体的关系数据库的约束条件，由应用的环境决定。例如人的年龄规定必须大于等于0，小于等于200。</li></ol><h3 id="Ⅱ-关系运算">Ⅱ 关系运算</h3><div class="center"><style>.muzmcahftdzg{}</style><img src="/2025/04/23/note27/note27_pic02.png" class="muzmcahftdzg"></div><p>以关系R和关系S为例：</p><div class="center"><style>.nlyqpbonpwii{}</style><img src="/2025/04/23/note27/note27_pic03.png" class="nlyqpbonpwii"></div><h4 id="1-笛卡尔积">1. 笛卡尔积</h4><p>两个关系R（m个属性n个元组）和S（k个属性p个元组）的笛卡尔积记为R×S，结果是一个新关系：</p><ul><li>包含m+k个属性（先R的所有数据，后S的所有属性）</li><li>包含n×p个元组（每个R的元组与每个S的元组组合一次）</li></ul><div class="center"><style>.sktnvbrdgeik{}</style><img src="/2025/04/23/note27/note27_pic04.png" class="sktnvbrdgeik"></div><h4 id="2-投影">2. 投影</h4><p>投影是从关系的垂直方向进行运算，在关系R中选出若干属性列<em>A</em>组成新的关系，记作$\pi _A\left( R \right) $。</p><div class="center"><style>.fqtubidypjzp{}</style><img src="/2025/04/23/note27/note27_pic05.png" class="fqtubidypjzp"></div><h4 id="3-选择">3. 选择</h4><p>选择是从关系的水平方向进行运算，在关系R中选择满足给定条件的诸元组，记作$\sigma _F\left( R \right) <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>。例如，</mtext></mrow><annotation encoding="application/x-tex">。例如，</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">。例如，</span></span></span></span>\sigma _{1\ge 6}\left( R \right) $表示选取R关系中第1个属性值大于等于第6个属性值的元组。</p><div class="center"><style>.rciwvcuxohwm{}</style><img src="/2025/04/23/note27/note27_pic06.png" class="rciwvcuxohwm"></div><h4 id="4-连接">4. 连接</h4><p>连接运算是从两个关系R和S的笛卡尔积中选取满足条件的元组。因此，可以认为笛卡尔积是无条件连接，其它连接认为是有条件连接。</p><h5 id="i-theta-连接">i. $\theta $连接</h5><p>$\theta $连接是从R×S中选取属性间满足一定条件的元组。</p><div class="center"><style>.iqoizruhupum{}</style><img src="/2025/04/23/note27/note27_pic07.png" class="iqoizruhupum"></div><h5 id="ii-等值连接">ii. 等值连接</h5><p>等值连接是特殊的$\theta $连接，其中的比较符号只能为&quot;=&quot;。</p><h5 id="iii-自然连接">iii. 自然连接</h5><p>自然连接是一种特殊的等值连接，它要求两个关系中进行比较的分量必须是相同的属性组，并在结果集中将重复属性列去掉。<br>自然连接可以记为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>⋈</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">R\Join S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6883em;vertical-align:-0.005em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span>。</p><div class="center"><style>.dmppcprhkoev{}</style><img src="/2025/04/23/note27/note27_pic08.jpg" class="dmppcprhkoev"></div><p>需要注意的是，自然连接不仅要在垂直方向上运算，也要在水平方向上运算。</p><hr><div class="center"><table><thead><tr><th>连接类型</th><th>条件</th><th>结果属性</th><th>重复列</th></tr></thead><tbody><tr><td>θ连接</td><td>任意比较条件</td><td>全部保留</td><td>保留</td></tr><tr><td>等值连接</td><td>等号条件</td><td>全部保留</td><td>保留</td></tr><tr><td>自然连接</td><td>同名属性自动匹配</td><td>去重</td><td>不保留</td></tr></tbody></table></div><h4 id="5-外连接">5. 外连接</h4><p>外连接是连接运算的扩展，可以处理由于连接运算而丢失的信息。</p><div class="center"><style>.ktypryltxghw{}</style><img src="/2025/04/23/note27/note27_pic09.jpg" class="ktypryltxghw"></div><p>如上图所示，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>⋈</mo><mi>S</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">S\Join SC</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6883em;vertical-align:-0.005em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">SC</span></span></span></span>中就丢失黎明、赵国庆等人的信息，而外连接就可以用来处理这种情况。</p><h5 id="i-左外连接">i. 左外连接</h5><p>左外连接是取出左侧关系中所有与右侧关系中任一元组都不匹配的元组，用空值null来填充所有来自右侧关系的属性，并构成新的元组。</p><div class="center"><style>.kzgjrngcjheu{}</style><img src="/2025/04/23/note27/note27_pic10.png" class="kzgjrngcjheu"></div><h5 id="ii-右外连接">ii. 右外连接</h5><p>右外连接和左外连接正相反，它是取出右侧关系中所有与左侧关系中任一元组都不匹配的元组，并用null替代后组成新的元组。</p><div class="center"><style>.yzthhaeclbgc{}</style><img src="/2025/04/23/note27/note27_pic11.png" class="yzthhaeclbgc"></div><h5 id="iii-全外连接">iii. 全外连接</h5><p>可以理解为在进行完一次左外连接之后再进行一次右外连接。</p><div class="center"><style>.kbrohewfffps{}</style><img src="/2025/04/23/note27/note27_pic12.png" class="kbrohewfffps"></div><h3 id="Ⅲ-真题赏析">Ⅲ 真题赏析</h3><div class="center"><style>.rcxysqnxihjr{}</style><img src="/2025/04/23/note27/note27_pic13.png" class="rcxysqnxihjr"></div><p><strong>D</strong>，应该优先执行选择运算，这样一来可以大幅缩减笛卡尔积得到的结果，增加查询效率。</p><hr><div class="center"><style>.bpphpiiclvwi{}</style><img src="/2025/04/23/note27/note27_pic14.png" class="bpphpiiclvwi"></div><ol start="54"><li><strong>C</strong>，由题意可得投影中的第一列为员工工号，第二列为姓名，也就是说第一张表的第一二列分别为员工工号、姓名，因此第一张表为E。此外，中文需要使用单引号包括。</li><li><strong>B</strong>。同理，第二张表为C。虽然最后不用查询商品号，但为了使用商品号属性和EC连接，在投影时还需要先包括这一列。</li><li><strong>C</strong>。同理，第三张表为EC。</li></ol><h3 id="后续内容大部分笔者都已经在专业课上学过了，就不再赘述了，留个尾巴以后刷题的时候在这里放错题集。">后续内容大部分笔者都已经在专业课上学过了，就不再赘述了，留个尾巴以后刷题的时候在这里放错题集。</h3>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>上午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 上午题 知识产权</title>
    <link href="/2025/04/23/note26/"/>
    <url>/2025/04/23/note26/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 上午题 知识产权</h1><p>这一部分的知识技术性弱记忆性强，比较枯燥，主要涉及的知识点将直接按点陈列：</p><ol><li><p>著作权当中，只有发表权受时间限制（我国公民的作品发表权的保护期为作者终生及其死亡后50年），其它诸如署名权、修改权和保护作品完整权等权利均不受时间限制。</p></li><li><p>知识产权具有严格的地域性特点，即各国主管机关授予的知识产权只在本国领域内受法律保护，其它国家则不予保护。</p></li><li><p>软件著作权：</p><ol><li>软件著作权产生的时间为自作品完成创作之日。</li><li>软件著作权的客体，即受保护对象，有1）计算机程序，2）计算机软件的文档。</li><li>《中华人民共和国著作权法》和《计算机软件保护条例》是构成我国保护计算机软件著作权的两个法律文件。</li></ol></li><li><p>职务作品：职务作品即为公民在任职期间为工作单位开发的作品。</p><ol><li>如果雇员开发的软件属于本质工作的结果，或者主要使用了单位的设备进行开发，则软件著作权不属于个人。</li></ol><blockquote><p>如果是执行本职工作的结果，即针对本职工作中明确指定的开发目标所开发的，或者是从事本职工作活动所预见的结果或自然的结果;则该软件的著作权属于该单位。</p></blockquote><ol start="2"><li>公民仅享有职务作品的署名权。</li></ol></li><li><p>委托开发：</p><ol><li>若委托方与受托方以合同形式约定了软件著作权的归属关系，则软件著作权的归属应按根据此合同来确定。</li><li>若委托方与受托方没有签订合同，或没有在合同中明确规定了软件著作权的归属，则软件著作权属于受托方。</li></ol></li><li><p>利用商业秘密权可以对软件的技术信息、经营信息提供保护。</p></li></ol><blockquote><p>《反不正当竞争法》中商业秘密定义为“指不为公众所知悉的、能为权利人带来经济利益、具有实用性并经权利人采取保密措施的技术信息和经营信息”。</p></blockquote><ol start="7"><li>若甲、乙<strong>同一天</strong>向专利局申请发明专利，则专利权申请人需要由甲、乙公司协商确定。但是不可能向甲、乙都授予专利权。</li><li>我国商标权的保护期限自核准注册之日起10年内有效，但可以根据其所有人的需要无限地延长权利期限。</li><li>若甲、乙<strong>同一天</strong>进行商标注册且都不愿意放弃注册，则需要由甲、乙抽签决定谁能进行注册。</li><li>根据我国商标法，烟草制品必须使用注册商标。</li></ol>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>上午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 上午题 程序设计语言</title>
    <link href="/2025/04/22/note25/"/>
    <url>/2025/04/22/note25/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>软件设计师 上午题 程序设计语言</h1><p>程序设计语言是为了书写计算机程序而人为设计的符号语言，本节主要介绍程序设计语言的基本概念、基本成分和一些有代表性的程序设计语言。</p><h2 id="一、程序设计语言的基本概念">一、程序设计语言的基本概念</h2><h3 id="Ⅰ-低级语言和高级语言">Ⅰ 低级语言和高级语言</h3><ol><li>低级语言：面向机器的语言，即机器语言和汇编语言。<ol><li>机器语言：机器语言是最基本的计算机语言，也就是我们在计算机系统章节中常常提起的机器指令，由01组成。使用机器语言设计的程序可读性很差，因此也难以维护。</li><li>汇编语言：人类并不能像机器一样直接读取01，因此人们就想出了一种办法：使用容易记忆的符号来代替01序列，比如用<code>ADD</code>来表示加法等。这些符号表示的指令即为汇编指令，进而可以构成汇编语言。</li></ol></li><li>高级语言：面向各类应用的程序设计语言，这类语言和人们使用的自然语言很接近，如主流的Java、Cpp和Python等。</li></ol><h3 id="Ⅱ-语言的翻译">Ⅱ 语言的翻译</h3><p>显然计算机不可能直接理解汇编语言和高级语言，因此执行这类语言时就需要翻译，基本方式有汇编、解释和编译。</p><ol><li>汇编：如果源程序是用汇编语言编写的，则需要一个汇编程序将其翻译成目标程序后才能执行。</li><li>解释和编译：如果源程序是用某种高级语言编写的，则需要对应的解释程序或者编译程序对其进行翻译：<ol><li>解释程序：边解释边执行，​​不生成独立的目标代码​​，每次运行都需要解释器实时翻译。</li><li>编译程序：将源代码​​一次性​​转换为目标机器代码（如二进制可执行文件），生成独立的可执行程序。</li></ol></li></ol><h2 id="二、语言处理程序基础">二、语言处理程序基础</h2><p>语言处理程序即为前文所述的翻译程序，它们将高级语言或汇编语言编写的程序翻译成某种机器语言程序使其可在计算机上运行。备考中我们重点要掌握的是编译程序的基本原理。</p><h3 id="Ⅰ-编译程序的基本原理">Ⅰ 编译程序的基本原理</h3><p>编译程序的功能是将某高级语言书写的源程序翻译成与之等价的目标程序（汇编语言或机器语言）。其工作过程如下图所示：</p><div class="center"><style>.twhmdcukcfno{}</style><img src="/2025/04/22/note25/note25_pic01.png" class="twhmdcukcfno"></div><h4 id="1-词法分析">1. 词法分析</h4><p>词法分析​是编译器的第一个阶段，其核心任务是将​​源代码的字符序列​​转换为有意义的​<strong>​词法单元</strong>（Token）序列​，也即<strong>记号流</strong>，为后续的语法分析提供结构化输入。<br>其中，每个Token常以二元组的方式输出，即<code>&lt;Token Type, Value&gt;</code>。常见的Token Type有关键字、标识符、常数、运算符和分隔符等。<br>比如有这样一串C语言代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> x = <span class="hljs-number">42</span>;<br></code></pre></td></tr></table></figure><p>那么在进行词法分析后输出的Tokens就应该为：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">&lt;关键字, &quot;int&quot;&gt;<br>&lt;标识符, &quot;x&quot;&gt;<br>&lt;运算符, &quot;=&quot;&gt;<br>&lt;整常数, &quot;42&quot;&gt;<br>&lt;分隔符, &quot;;&quot;&gt;<br></code></pre></td></tr></table></figure><p>进行词法分析可以跳过空格、换行、注释等不影响程序逻辑的字符，并将连续的字符组合成有意义的单元（如变量名x、数字42），有效简化了后续的语法分析。</p><h4 id="2-语法分析">2. 语法分析</h4><p>​语法分析​​是继词法分析之后的第二个关键阶段，其核心任务是将​​词法分析生成的Token序列​​转换为​​结构化的语法树​​，以验证整个输入串是否构成一个语法上正确的程序。<br>如果源程序中没有语法错误，这一阶段就能正确地构造出一个语法树，否则就会指出源程序的语法错误并给出相应的诊断信息。<br>例如上文中的Tokens就能被构造出这样一个语法树：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">     Declaration<br>     /    |    \<br>Type   Name   Value<br>(int)   (x)    (42)<br></code></pre></td></tr></table></figure><h4 id="3-语义分析">3. 语义分析</h4><p>​​语义分析是继​​词法分析​​和​​语法分析​​之后的第三个关键阶段。它的核心任务是​​检查源代码是否符合语言的语义规则​​，确保程序<strong>在逻辑上是正确的</strong>，不会出现类似于“猫吃代码”的谬误，而不仅仅是语法正确。<br>例如，整除取余运算符只能对整型进行运算，若其运算对象中有浮点数就可以认为存在类型不匹配的错误。</p><h4 id="4-中间代码生成">4. 中间代码生成</h4><p>中间代码生成​​是编译器的核心阶段之一，位于​​前端（词法/语法/语义分析）​​和​​后端（目标代码生成与优化）​​之间。它的任务是将​​语义分析后的语法树​转换为一种<strong>​​与机器无关</strong>的中间表示（IR）​​，可以将不同的高级语言转换为同一种中间代码，使其具备了跨平台的能力，为后续优化和目标代码生成提供了统一接口。<br>常见的中间代码有：后缀式、三地址码、三元式、四元式和树（图）等形式。</p><h4 id="5-目标代码生成">5. 目标代码生成</h4><p>目标代码生成是编译器工作的最后一个阶段，这一阶段的任务即为将中间代码变换为特定机器上的指令代码。由于是生成特定机器上的代码，<strong>这一阶段的工作与具体的机器密切相关</strong>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asm">; 同一加法操作在不同架构下的代码可能完全不同<br><br>; x86<br>add eax, ebx<br><br>; ARM<br>add r0, r1, r2<br><br>; MIPS<br>add $t0, $t1, $t2<br></code></pre></td></tr></table></figure><p>编译过程中的中间代码生成和代码优化不是必须的，可省略。</p><h3 id="Ⅱ-词法分析中的模型">Ⅱ 词法分析中的模型</h3><p>正如前文所述，词法分析是一个将源程序中的字符串转换为单词符号序列的一个过程，而这个过程所依赖的模型有以下几个：</p><h4 id="1-正规式与正规集">1. 正规式与正规集</h4><div class="center"><style>.ntfargupsgif{}</style><img src="/2025/04/22/note25/note25_pic07.png" class="ntfargupsgif"></div><p>正规式是一种用于描述​​字符串模式​​的形式化表达式，用于匹配符合特定规则的字符串集合，是定义​​正规集​​的数学工具。<br>例如有一个正规式<code>a*</code>，它就定义了一个正规集<code>&#123;ε, &quot;a&quot;, &quot;aa&quot;, &quot;aaa&quot;, ...&#125;</code>；再比如正规式<code>(a|b)*</code>定义的正规集就是<code>&#123;ε, &quot;a&quot;, &quot;b&quot;, &quot;aa&quot;, &quot;ab&quot;, &quot;ba&quot;, &quot;bb&quot;, &quot;aabba&quot;, &quot;babab&quot;, ...&#125;</code>。</p><h4 id="2-有限自动机">2. 有限自动机</h4><p>有限自动机是一种用来识别正规集的抽象计算模型，又可以继续分为确定的有限自动机和不确定的有限自动机两类：</p><ul><li>确定的有限自动机（Deterministic Finite Automata, DFA）：对每一个状态来说识别字符后转移的状态是唯一的。</li></ul><div class="center"><style>.ndheqxslvjfv{}</style><img src="/2025/04/22/note25/note25_pic09.png" class="ndheqxslvjfv"></div><p>  有限自动机中所谓的状态转移图和状态转移矩阵的概念和在数电中学习过的状态图基本类似，只是需要注意的是双圈表示的结点是终结结点。</p><ul><li>不确定的有限自动机（Nodeterministic Finite Automata, NFA）：对每一个状态来说识别字符后转移的状态是不确定的。</li></ul><div class="center"><style>.yqjdmsocfril{}</style><img src="/2025/04/22/note25/note25_pic10.png" class="yqjdmsocfril"></div><p>当一个字符串被输入进有限自动机中之后，如果在最后一个字符被输入之后，自动机的状态落到了双圈的终结结点上，该自动机就会返回一个“接受”的状态，说明这个字符串满足目标语言的规则，反之就会返回一个“拒绝”的状态。<br>也就是说，在有限自动机当中，所谓的终结结点并不是说自动机在进入这一状态之后就会终止，而是在终止时据此返回结果。</p><h3 id="Ⅲ-语法分析中的模型">Ⅲ 语法分析中的模型</h3><p>语法分析中所要用到的一个重要模型是上下文无关文法，程序设计语言的绝大部分语法规则可以采用上下文无关文法进行描述。<br>一个上下文无关文法可以由以下几部分组成；</p><ul><li>非终结符：可进一步展开的表示语法结构的抽象符号，一般用大写英文字母表示。</li><li>终结符：组成语言的基本符号，一般用小写英文字母表示。</li><li>产生式规则：定义非终结符如何展开为终结符和非终结符的组合。</li><li>开始符号：语法推导的起点。</li></ul><p>比如以下这道例题：</p><div class="center"><style>.kktqvntdrvsk{}</style><img src="/2025/04/22/note25/note25_pic12.png" class="kktqvntdrvsk"></div><p>其中类似于<code>T -&gt; F|T*F</code>就是一条产生式规则，定义了在非终结符<code>T</code>的展开规则。</p><h3 id="Ⅳ-解释程序的基本原理">Ⅳ 解释程序的基本原理</h3><p>正如前文所述，编译程序可分为：词法分析、语法分析、语义分析、中间代码生成、代码优化和目标代码生成六个部分。而对于解释程序而言，有前三个过程即可。即编译器和解释器都不能省略词法分析、语法分析和语义分析三个阶段且顺序不可交换。</p><h3 id="Ⅴ-真题赏析">Ⅴ 真题赏析</h3><div class="center"><style>.suqmrtumbeij{}</style><img src="/2025/04/22/note25/note25_pic02.png" class="suqmrtumbeij"></div><p><strong>C</strong>，语义分析阶段只能发现静态错误，动态语义错误只有在程序运行时才能发现。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// 静态语义错误</span><br><span class="hljs-type">int</span> x = <span class="hljs-string">&quot;hello&quot;</span>;  <span class="hljs-comment">// 错误：int 不能赋值为字符串（类型不匹配）</span><br><br><span class="hljs-built_in">printf</span>(y);        <span class="hljs-comment">// 错误：y 未声明</span><br><br><span class="hljs-comment">// -----------------------------------------------------------</span><br><br><span class="hljs-comment">// 动态语义错误</span><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span> / <span class="hljs-number">0</span>;    <span class="hljs-comment">// 运行时错误：除零</span><br><span class="hljs-type">int</span> arr[<span class="hljs-number">3</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, arr[<span class="hljs-number">5</span>]); <span class="hljs-comment">// 运行时错误：数组越界</span><br><br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">1</span>)<br>&#123;<br>  i--<br>&#125; <span class="hljs-comment">// 运行时错误：死循环</span><br><br></code></pre></td></tr></table></figure><hr><div class="center"><style>.jgnqallpliok{}</style><img src="/2025/04/22/note25/note25_pic03.png" class="jgnqallpliok"></div><p><strong>D</strong>，B选项的错误在于应该为<code>在语法分析阶段可以发现程序中的所有语法错误</code>，而非<code>所有错误</code>。</p><hr><div class="center"><style>.synwdnvurtft{}</style><img src="/2025/04/22/note25/note25_pic04.png" class="synwdnvurtft"></div><p><strong>D</strong>，寄存器分配是目标代码生成阶段的核心任务之一，这是由于将中间代码转换为机器码时需要分配物理寄存器。</p><hr><div class="center"><style>.irsvocwuutqv{}</style><img src="/2025/04/22/note25/note25_pic05.png" class="irsvocwuutqv"></div><p><strong>A</strong>，词法分析和语法分析的核心区别在于前者是检查字符是否符合规定而后者是检查语句是否符合规定。</p><hr><div class="center"><style>.ngkdikwievzi{}</style><img src="/2025/04/22/note25/note25_pic06.png" class="ngkdikwievzi"></div><p><strong>B</strong>，类型检查是​​语义分析阶段​​的核心任务之一，进行类型检查可以确保程序在逻辑上正确，避免出现对浮点数进行模运算等错误情况。</p><hr><div class="center"><style>.ociuxwyxttyq{}</style><img src="/2025/04/22/note25/note25_pic08.png" class="ociuxwyxttyq"></div><p><strong>B</strong>，对于A选项而言，0*有可能为空串，其开头和结尾也有可能是1。</p><hr><div class="center"><style>.ttvxwljalxmp{}</style><img src="/2025/04/22/note25/note25_pic11.png" class="ttvxwljalxmp"></div><p><strong>B</strong>，从题中的自动机可分析出，初态q0同时是终态，从q0到q0的弧(标记 0)表明该自动机识别零个或多个0构成的串，路径q0→q1→q0的循环表明“10”的多次重复，因此该自动机识别的字符串是“010”的无穷多次，表示为(0|10)*。</p>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>上午题</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>软件设计师 上午题 计算机系统</title>
    <link href="/2025/04/20/note24/"/>
    <url>/2025/04/20/note24/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}.qus{  background-color: #ABBAEA;}</style><h1>软件设计师 上午题 计算机系统</h1><p>众所周知，计算机系统是由软件和硬件组成的。其中其基本硬件系统则由运算器、控制器、存储器、输入设备和输出设备5大部件组成。而运算器和控制器又被集成在一起组成了中央处理单元（CPU），亦即硬件系统的核心。</p><h2 id="一、中央处理单元（CPU）">一、中央处理单元（CPU）</h2><div class="center"><style>.uqjhqgxmurdz{}</style><img src="/2025/04/20/note24/note24_pic01.png" class="uqjhqgxmurdz"></div><p>正如前文所述，CPU由运算器和控制器，以及寄存器组组成（需要注意的是，运算器是在控制器的命令下进行动作的执行部件）：</p><h3 id="Ⅰ-CPU的组成部件">Ⅰ CPU的组成部件</h3><ol><li><p>运算器<br>正如其名，运算器是一种用来完成计算机的各种算术和逻辑运算的数据加工处理部件。因此其具有以下两个主要功能：</p><ol><li>执行所有的算术运算，例如基本的四则运算。</li><li>执行所有的逻辑运算并进行逻辑测试，例如与或非及零值测试。</li></ol><p>而运算器又是由以下几个部件组成的：</p><ol><li>算术逻辑单元（Arithmetic and Logic Unit, ALC），负责处理数据，实现对数据的算术运算和逻辑运算。</li><li>累加寄存器（Accumulator register, AC），亦即累加器。其主要功能是为ALU开辟一片工作区，这个过程与我们使用栈来进行数学计算的过程类似。由于最终的运算结果是存储在累加器中的，因此<strong>每个运算器中都至少要有一个累加器</strong>。</li><li>数据缓冲寄存器（DR）和状态条件寄存器（PSW）了解即可，前者是CPU和内存间交换数据的中转站，后者则是用来判别当前指令完成后的状态。</li></ol></li><li><p>控制器<br>和只能完成运算的运算器不同，控制器用于控制整个CPU的工作，实现了计算机运行的自动化。它不仅要保证程序的正确执行，还要能够处理异常事件。<br>控制器主要的功能有指令控制逻辑、时序控制逻辑、总线控制逻辑和中断控制逻辑：</p><ol><li>指令控制逻辑：即完成取指令、分析指令和执行指令的一系列操作，包含了以下部件（需要了解是，<strong>一条指令通常是由地址码和操作码组成的</strong>）：<ol><li>程序计数器（Program Counter, PC）：每次执行指令时，CPU都会自动修改PC的内容，使得其保持的始终都是将要执行的下一条指令的地址。</li><li>指令寄存器（Instruction Register, IR）：当CPU要从PC中得到了将要执行的下一条指令的地址时，这条指令的转移过程为：内存–&gt;数据缓存寄存器（DR）–&gt;指令寄存器（IR）。</li><li>指令译码器（Instruction Decoder, ID）：ID根据IR的内容获得指令，进而对指令中的操作码字段进行分析解释，进而向操作控制器发出具体的控制信号以完成所需的功能。</li><li>地址寄存器（Address Register, AR）：由于内存和CPU的操作速度不同，需要AR来保存当前CPU所访问的内存单元的地址，直到内存的I/O操作完成。</li></ol></li><li>时序控制逻辑：为每条指令按时间顺序提供应有的控制信号。</li><li>总线控制逻辑：控制总线，即控制为多个功能部件服务的信息通路。</li><li>中断控制逻辑：控制各种中断请求，并根据优先级的高低对中断请求进行排队。</li></ol></li><li><p>寄存器组<br>寄存器组可分为专用寄存器和通用寄存器，前者是指控制器和运算器中的寄存器，而后者的用途更为广泛，具体功能可以由程序员来定义。</p></li></ol><h3 id="Ⅱ-CPU的功能">Ⅱ CPU的功能</h3><p>通过以上几个组成部分的协作，CPU主要具备了以下几种功能：</p><ol><li>程序控制：CPU通过执行指令来控制程序的执行顺序。</li><li>操作控制：一条指令的实现需要若干个操作信号配合完成，因此CPU会产生每条指令的操作信号并将其送往对应的部件，使其按指令的功能要求进行操作。</li><li>时间控制：CPU对各种操作进行时间上的控制。</li><li>数据处理：CPU通过对数据进行加工处理来生成可以被人们利用的结果，<strong>这是CPU最根本的任务</strong>。</li><li>异常响应：CPU需要对系统内外的中断（异常）做出响应。</li></ol><h3 id="Ⅲ-寻址">Ⅲ 寻址</h3><p>寻址根据操作数的存放位置不同主要有以下几种类型：</p><blockquote><p>操作数和前文中提到的操作码并不相同，操作数是指令的操作对象，提供操作所需的数据或数据存储位置；而操作码则是指令中指定操作类型的部分，告诉CPU执行何种操作（如加法、跳转等）</p></blockquote><ul><li>立即寻址：操作数就包括在指令当中。</li><li>直接寻址：操作数存放在内存单元当中，指令中直接给出操作数所在存储单元的地址。</li><li>间接寻址：指令中给出操作数地址的地址。</li><li>寄存器寻址：操作数存放在某一寄存器当中，指令中给出存放操作数的寄存器名。</li><li>寄存器间接寻址：操作数存放在内存单元中，该单元的地址在某个寄存器中。</li></ul><h3 id="Ⅳ-真题赏析">Ⅳ 真题赏析</h3><div class="center"><style>.lwbtvjgstjeb{}</style><img src="/2025/04/20/note24/note24_pic02.png" class="lwbtvjgstjeb"></div><p><strong>C</strong>，一条将要被CPU执行的指令都将存放在指令寄存器（IR）当中，而操作码和地址码都是指令的一部分，也都将被存放在IR当中。</p><hr><div class="center"><style>.cyoiqknqwogx{}</style><img src="/2025/04/20/note24/note24_pic03.png" class="cyoiqknqwogx"></div><blockquote><p>“对用户透明”（Transparent to the User）在计算机科学中指的是：<br>某个硬件或软件组件的存在和操作对用户（程序员或普通用户）不可见，无需用户主动干预或直接操作。</p></blockquote><p><strong>B</strong>，IR存储当前正在执行的指令内容，由 CPU 内部自动管理，程序员无法直接访问或修改，因此对用户完全透明。</p><hr><div class="center"><style>.xmtftmlmvnax{}</style><img src="/2025/04/20/note24/note24_pic04.png" class="xmtftmlmvnax"></div><p><strong>C</strong>，虽然指令是被寄存在IR当中的，但正如上文中所说的“当CPU要从PC中得到了将要执行的下一条指令的地址时…”，首先需要在PC处获取下一条指令的地址才能从内存中读取指令操作码。</p><hr><div class="center"><style>.idxwleehnppp{}</style><img src="/2025/04/20/note24/note24_pic06.png" class="idxwleehnppp"></div><p><strong>B</strong>，题干中的<code>#45</code>即为操作数，操作数直接包含在指令当中，为立即寻址，将要把操作数放在寄存器当中，为寄存器寻址。</p><hr><div class="center"><style>.aoimbozwtteb{}</style><img src="/2025/04/20/note24/note24_pic07.png" class="aoimbozwtteb"></div><blockquote><p>计算机的​​字长​​（Word Size）是指计算机在​​一次操作中能够处理的数据位数​​，它是CPU设计中的一个核心参数，直接影响计算机的性能和效率。根据字长，我们可以确定计算机一次能处理的二进制位数，即“字”（Word）。</p></blockquote><p><strong>C</strong>，按字编址说明寻址的基本单位是“字”，即最小寻址单位就是一个Word，在本题的情境下，即32bits = 4Byte。而内存容量2GB = 2048MB = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>31</mn></msup></mrow><annotation encoding="application/x-tex">2^{31}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31</span></span></span></span></span></span></span></span></span></span></span></span>Byte。<br>那么可寻址范围即为</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mn>31</mn></msup><mo>÷</mo><msup><mn>2</mn><mn>2</mn></msup><mtext> </mtext><mo>=</mo><mtext> </mtext><msup><mn>2</mn><mn>29</mn></msup><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mtext> </mtext><mo>=</mo><mtext> </mtext><mn>512</mn><mi>M</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">2^{31}\div 2^2\ =\ 2^{29}Byte\ =\ 512MB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">29</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">512</span><span class="mord mathnormal" style="margin-right:0.05017em;">MB</span></span></span></span></span></p><hr><div class="center"><style>.tsgqobxotwlr{}</style><img src="/2025/04/20/note24/note24_pic08.png" class="tsgqobxotwlr"></div><p><strong>A</strong>，寻址速度：立即寻址&gt;寄存器寻址&gt;直接寻址&gt;寄存器间接寻址&gt;间接寻址。</p><h2 id="二、计算机中的数据表示">二、计算机中的数据表示</h2><p>机器数的原反补及移码表示不再赘述，我们下边来了解一下定点数和浮点数：</p><h3 id="Ⅰ-定点数和浮点数">Ⅰ 定点数和浮点数</h3><p>定点数即小数点的位置固定不变的数，又可以细分为定点整数和定点小数。但是定点数所能表示的数值范围比较小，在运算中很容易因为结果超出范围而溢出，因此我们需要引入能表示更大范围的浮点数。<br>正如一个十进制数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>83.125</mn></mrow><annotation encoding="application/x-tex">83.125</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">83.125</span></span></span></span>既可以写作<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>3</mn></msup><mo>×</mo><mn>0.083125</mn></mrow><annotation encoding="application/x-tex">10^3\times 0.083125</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.083125</span></span></span></span>也可以写作<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>4</mn></msup><mo>×</mo><mn>0.0083125</mn></mrow><annotation encoding="application/x-tex">10^4\times 0.0083125</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.0083125</span></span></span></span>，一个二进制数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1011.10101</mn></mrow><annotation encoding="application/x-tex">1011.10101</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1011.10101</span></span></span></span>也既可以写作<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>4</mn></msup><mo>×</mo><mn>0.101110101</mn></mrow><annotation encoding="application/x-tex">2^4\times 0.101110101</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.101110101</span></span></span></span>也可以写作<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>5</mn></msup><mo>×</mo><mn>0.0101110101</mn></mrow><annotation encoding="application/x-tex">2^5\times 0.0101110101</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.0101110101</span></span></span></span>。也就是说，一个二进制数N可以用一种更一般的形式来表示：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>N</mi><mo>=</mo><msup><mn>2</mn><mi>E</mi></msup><mo>×</mo><mi>F</mi></mrow><annotation encoding="application/x-tex">N=2^E\times F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9747em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span></span></p><p>其中，E被称之为阶码，它与浮点数能够表示的范围有关，F被称之为尾数，它与浮点数能够表示的精度有关（<strong>尾数一定是一个纯小数</strong>，即其整数部分一定为0）。<br>用阶码和尾数来表示的数即为浮点数，这种表示数的方法也被称之为浮点表示法，显然我们可以用多个浮点形式表示同一个数。<br>此外，为了利用尾数来表示更多的有效数字，我们通常采用规格化浮点数，即将尾数的绝对值控制在区间[0.5, 1]。</p><h3 id="Ⅱ-真题赏析">Ⅱ 真题赏析</h3><div class="center"><style>.prddyqwngcbj{}</style><img src="/2025/04/20/note24/note24_pic05.png" class="prddyqwngcbj"></div><p>在两个浮点数相加时，需要先对阶，即将阶码保持一致。假如现在需要对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>4</mn></msup><mo>×</mo><mn>0.1234</mn></mrow><annotation encoding="application/x-tex">10^4\times 0.1234</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.1234</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>2</mn></msup><mo>×</mo><mn>0.1234</mn></mrow><annotation encoding="application/x-tex">10^2\times 0.1234</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.1234</span></span></span></span>加和，如果我们将大阶向小阶对齐的话，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>4</mn></msup><mo>×</mo><mn>0.1234</mn></mrow><annotation encoding="application/x-tex">10^4\times 0.1234</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.1234</span></span></span></span>(int(1234))需要对齐为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>2</mn></msup><mo>×</mo><mn>0.3400</mn></mrow><annotation encoding="application/x-tex">10^2\times 0.3400</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.3400</span></span></span></span>(int(34))，<strong>这样一来就损失了1200</strong>；而如果我们将小阶向大阶对齐的话，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>2</mn></msup><mo>×</mo><mn>0.1234</mn></mrow><annotation encoding="application/x-tex">10^2\times 0.1234</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.1234</span></span></span></span>(int(12.34))就需要更改为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>4</mn></msup><mo>×</mo><mn>0.001234</mn></mrow><annotation encoding="application/x-tex">10^4\times 0.001234</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.001234</span></span></span></span>(int(0.1234))，<strong>这样一来就损失了12.2166</strong>。<br>两相比较，显然需要采用的是小阶向大阶对齐，并将小数点左移，即尾数右移。</p><h2 id="三、校验码">三、校验码</h2><p>计算机系统在运行时通常会采用校验码的方法来确保数据在传送过程中正确无误，常用的校验码有以下三种：</p><h3 id="Ⅰ-奇偶校验码">Ⅰ 奇偶校验码</h3><p>奇偶校验码（Parity Codes）通过在编码中增加一位校验位来使编码中1的个数为奇数（奇校验）或者为偶数（偶校验），从而使码距变为2。</p><blockquote><p>所谓码距,是指一个编码系统中任意两个合法编码之间至少有多少个二进制位不同。例如，4位 8421 码的码距为 1，在传输过程中，该代码的一位或多位发生错误，都将变成另外一个合法的编码，因此这种代码无检错能力。码距越长，一种编码的检验和纠错能力就越长。</p></blockquote><p>进行奇校验时，奇偶检验码只能检测代码中奇数位出错的编码，但不能发现偶数维出错的情况。</p><h3 id="Ⅱ-海明码">Ⅱ 海明码</h3><p>海明码（Hamming Code）是一种利用奇偶性的检验方法，其构成方法是在数据位之间的特定位置上插入k个校验位，通过扩大码距来实现检错和纠错（海明码的码距为3，码距大于等于3之后编码开始具备纠错能力）。<br>设数据位是n位，校验位是k位，则n和k必须满足以下关系：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn><mo>≥</mo><mi>n</mi><mo>+</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">2^k-1\ge n+k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9824em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span></p><h3 id="Ⅲ-循环冗余校验码">Ⅲ 循环冗余校验码</h3><p>循环冗余校验码（Cyclic Redundancy Check，CRC）为k个数据位产生r个校验位来进行编码，其总长度为k+r，CRC的代码格式如下图所示：</p><div class="center"><style>.hqgmquiyqwwc{}</style><img src="/2025/04/20/note24/note24_pic09.png" class="hqgmquiyqwwc"></div><p>在CRC当中，校验码是由信息码产生的，校验码位数越多，该代码的校验能力就越强。<br>此外，在求CRC编码时，采用的是按位的模2运算。</p><h3 id="Ⅳ-真题赏析-2">Ⅳ 真题赏析</h3><div class="center"><style>.dyqupsoqaelk{}</style><img src="/2025/04/20/note24/note24_pic10.png" class="dyqupsoqaelk"></div><p><strong>A</strong>，海明码是一种利用奇偶性来检错和纠错的编码。C选项，CRC不具有纠错能力，错误。</p><hr><div class="center" ><style>.vsjzylmfnebp{}</style><img src="/2025/04/20/note24/note24_pic11.png" class="vsjzylmfnebp"></div><p><strong>C</strong>，奇偶校验码是通过判断编码中1的个数是否满足奇校验或者偶校验的一种校验方法。当采用奇校验时，其要求编码中所有数据位中1的个数之和为一个奇数，因此只有<code>奇数个</code>位出错时才可以检验到错误，如果是偶数个的话错误会相互抵消。此外，奇偶校验码只能检测到存在错误而不能定位错误所在，因此不具备纠错能力。</p><h2 id="四、计算机指令系统">四、计算机指令系统</h2><h3 id="Ⅰ-CISC和RISC">Ⅰ CISC和RISC</h3><p>CISC和RISC是指令集发展的两种途径。</p><div class="center"><style>.uiruhhathlhy{}</style><img src="/2025/04/20/note24/note24_pic13.png" class="uiruhhathlhy"></div><h3 id="Ⅱ-指令流水线">Ⅱ 指令流水线</h3><p>指令流水线即模仿工业生产过程中的流水线，使得一个指令的子过程能够在专用模块上有效地并发工作：</p><div class="center"><style>.ggmkplebcubw{}</style><img src="/2025/04/20/note24/note24_pic14.png" class="ggmkplebcubw"></div><p>以下比较重要的几个概念：</p><ol><li>吞吐率是指单位时间内流水线处理机流出的结果数，如果流水线的子过程所用时间不一样，吞吐率<code>p</code>为最长子过程的倒数，即为：</li></ol><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mtext> </mtext><mtext> </mtext><mo>=</mo><mtext> </mtext><mtext> </mtext><mn>1</mn><mi mathvariant="normal">/</mi><mi>max</mi><mo>⁡</mo><mrow><mo fence="true">{</mo><mo>△</mo><msub><mi>t</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>△</mo><msub><mi>t</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mo>△</mo><msub><mi>t</mi><mi>m</mi></msub><mo fence="true">}</mo></mrow></mrow><annotation encoding="application/x-tex">p\,\,=\,\,1/\max \left\{ \bigtriangleup t_1,\bigtriangleup t_2,...,\bigtriangleup t_m \right\} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">max</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">{</span><span class="mord">△</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">△</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">△</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">}</span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mtext> </mtext><mi>n</mi><mi mathvariant="normal">/</mi><mtext>执行1条指令的时间</mtext><mo>+</mo><mrow><mo fence="true">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo fence="true">)</mo></mrow><mo>×</mo><mtext>最长时间段</mtext></mrow><annotation encoding="application/x-tex">=\ n/\text{执行1条指令的时间}+\left( n-1 \right) \times \text{最长时间段}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord text"><span class="mord cjk_fallback">执行</span><span class="mord">1</span><span class="mord cjk_fallback">条指令的时间</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord cjk_fallback">最长时间段</span></span></span></span></span></span></p><p>其中n是连续输入指令的个数，显然最大吞吐率取决于流水线中最慢一段所需的时间。<br>2. 流水线从起始状态到达最大吞吐率需要一定时间，这段时间即为建立时间。<br>3. 加速比也是衡量一条流水线性能的关键指标，其为<strong>非流水线系统的执行时间和流水线系统执行时间的比</strong>。</p><h3 id="Ⅲ-真题赏析">Ⅲ 真题赏析</h3><div class="center"><style>.gwlhbkvvaaob{}</style><img src="/2025/04/20/note24/note24_pic15.png" class="gwlhbkvvaaob"></div><p><strong>D</strong>，流水线中处理n条连续命令的时间即为(执行1条指令的时间)+(n-1)*(最长时间段)</p><h2 id="五、计算机存储系统">五、计算机存储系统</h2><div class="center"><style>.upiukcvjfvje{}</style><img src="/2025/04/20/note24/note24_pic16.png" class="upiukcvjfvje"></div><h3 id="Ⅰ-存储器的分类">Ⅰ 存储器的分类</h3><ol><li>按存储器所处位置分类：<ol><li>内存：也称之为主存，用来存放机器当前运行所需的程序和数据，以便向CPU提供信息，容量小、速度快。</li><li>外存：也称之为辅存，用来存放当下不参与运行的大量信息，而在需要时调入内存。</li></ol></li><li>按存储器的工作方式分类：<ol><li>读/写存储器（Read/Write Memory）：RAM的一种，既能读取数据也能存入数据。</li><li>只读存储器：<ol><li>固定只读存储器（Read Only Memory, ROM）：在出厂时就被商家写好了数据，其内容只可读取不可改变。</li><li>可编程的只读存储器（Programmable Read Only Memory, PROM）：其中的内容可以由用户一次性地写入，随后不能再更改。</li><li>可擦除可编程的只读存储器（Erasable Programmable Read Only Memory, EPROM）：其中的内容既可以读出，也可以由用户写入，写入后还可以再修改。擦除的方式是使用紫外线照射。</li><li>电擦除可编程的只读存储器（Electrically Erasable Programmable Read Only Memory, EEPROM）：和EPROM类似，只是擦除方式为电擦除。</li><li>闪速存储器（Flash Memory）：即闪存，其特性介于EPROM和EEPROM之间，类似于EEPROM，使用电信号进行信息擦除。以一整块为单位，闪存可以在数秒之内删除，速度远快于EPROM。</li></ol></li></ol></li><li>按寻址方式分类：<ol><li>随机存储器（Random Access Memory, RAM）：可对任何存储单元存入或读取数据，访问任何一个存储单元所需的时间都是相同的。</li><li>顺序存储器（Sequentially Addressed Memory, SAM）：访问数据所需要的时间与数据所在的存储位置有关。</li><li>直接存储器（Direct Addressed Memory, DAM）：介于随机存取和顺序存取之间的一种寻址方式。例如磁盘就是一个直接存储器，它对于每一个磁道的寻址是随机的，但在一个磁道当中的寻址是顺序的。</li></ol></li></ol><h3 id="Ⅱ-相联存储器">Ⅱ 相联存储器</h3><p>相联存储器是一种按内容访问的存储器，它可以将数据的某一部分作为关键字写入，特别适合于信息的检索和更新。</p><h3 id="Ⅲ-高速缓存-Cache">Ⅲ 高速缓存 Cache</h3><div class="center"><style>.vagrjwgnkifs{}</style><img src="/2025/04/20/note24/note24_pic20.png" class="vagrjwgnkifs"></div><p>Cache位于CPU和主存之间，用来存放当前最活跃的程序和数据。Cache也分为控制器和存储器两部分，控制部分会判断CPU想要访问的内容是否在Cache存储器中，存在即为命中，否则为没有命中。命中时直接对Cache存储器寻址，反之则要按照替换原则决定主存的信息将要放在Cache中的哪一块里（没有命中就说明CPU想要的内容Cache当中没有，那么Cache就需要去拷贝主存的部分信息，随后再让CPU来获取）。</p><p>而常见的替换算法有以下几种：</p><ol><li>随机替换算法：用随机数发生器产生一个要替换的块号，将该块替换出去。</li><li>先进先出算法：将最先进入的Cache块替换出去。</li><li>近期最少使用算法：将近期最少使用的Cache块替换出去。</li><li>优化替换算法：这种算法要求先执行一次程序来统计Cache的替换情况，随后据此在第二次执行该程序时选择最有效的方式。</li></ol><p>一个好的替换算法可以使Cache获得尽可能高的命中率。</p><div class="center"><style>.hgybasaxtyry{}</style><img src="/2025/04/20/note24/note24_pic21.png" class="hgybasaxtyry"></div><p>此外，正如前文所述，CPU在调取信息时送出的是主存单元的地址，但是首先会从Cache中读写信息，这就要求主存地址和Cache地址之间能够有效转换，我们将这种转换称之为地址映像，具体有如下几种方法：</p><ol><li>直接映像：主存的块与Cache的块的对应关系是固定的。</li></ol><div class="center"><style>.ypmwmenmspck{}</style><img src="/2025/04/20/note24/note24_pic22.png" class="ypmwmenmspck"></div><p>其优点为地址变换很简单，但具有灵活性差的缺点，比如不同区号中块号相同的块无法同时调入Cache中，将造成空间浪费。</p><ol start="2"><li>全相联映像：主存的任一块可以调入Cache中的任何一个块的空间中。</li></ol><div class="center"><style>.qdrokshhjwph{}</style><img src="/2025/04/20/note24/note24_pic23.png" class="qdrokshhjwph"></div><p>这种映像的主要优点是主存的块调入Cache的位置不受限制，十分灵活，而主要缺点是无法从主存块号直接获得Cache的块号，变换更加复杂，速度变慢。</p><h3 id="Ⅳ-真题赏析-3">Ⅳ 真题赏析</h3><div class="center"><style>.lkyyuoigqmto{}</style><img src="/2025/04/20/note24/note24_pic17.png" class="lkyyuoigqmto"></div><p><strong>A</strong>，虚拟存储器是一种用于扩展物理内存容量的核心技术，它一般采用主存-辅存两级结构来实现。这是由于主存（DRAM）昂贵且容量有限，因此可以仅将活跃数据存放在高速且容量小的主存当中，而将非活跃数据暂存到低速但容量大的辅存当中。这样就可以抽象出一块比物理内存大得多的逻辑空间。</p><hr><div class="center"><style>.bwbtsenffhqg{}</style><img src="/2025/04/20/note24/note24_pic18.png" class="bwbtsenffhqg"></div><p><strong>C</strong>，内存中保存的信息在断电后会被清除，属于易失性存储器，而闪存则是一种非易失性存储器，两者不可互换。</p><hr><div class="center"><style>.ksgpmktmnvhg{}</style><img src="/2025/04/20/note24/note24_pic19.png" class="ksgpmktmnvhg"></div><p><strong>B</strong>，CD都属于非易失性存储器，直接排除。A选项SRAM是静态RAM，无需刷新；B选项DRAM是动态RAM，它利用电容电荷存储数据，电荷会自然泄露，因此需要每隔几毫秒刷新一次。</p><hr><div class="center"><style>.ikptluxkcabp{}</style><img src="/2025/04/20/note24/note24_pic24.png" class="ikptluxkcabp"></div><p><strong>A</strong>，组相联映像是全相联映像和直接映像的一种折中方案，由于全相联映像中内存块号和Cache块号没有了一一对应的关系，冲突次数显著降低。发生块冲突次数：直接映像&gt;组相联映像&gt;全相联映像。</p><hr><div class="center"><style>.kknctwtvnifr{}</style><img src="/2025/04/20/note24/note24_pic25.png" class="kknctwtvnifr"></div><p><strong>A</strong>，地址映像由专门的硬件自动完成。</p><h2 id="六、输入-输出技术">六、输入/输出技术</h2><p>一般有以下三种I/O控制方式：</p><h3 id="Ⅰ-程序查询方式">Ⅰ 程序查询方式</h3><p>这种方式下CPU会执行程序逐一对外设进行查询，判断它们是否做好了接收或者发送数据的准备，发现哪个设备就绪就对该外设服务。这种方式有如下两个缺点：</p><ol><li>严重降低了CPU的效率。</li><li>对外部突发事件无法做出实时响应。</li></ol><h3 id="Ⅱ-中断驱动方式">Ⅱ 中断驱动方式</h3><p>由于程序查询方式会严重浪费CPU的算力，使其一直等待IO系统的结果，那么就可以利用中断方式完成数据的I/O过程。这种方式下CPU不会等待IO系统的结果，而是直接转身去处理其它任务，而当IO系统就绪时，就会向CPU发送一个中断请求。CPU在接收到这个中断请求之后，就会保存当下正在执行的现场，转入IO系统完成数据交换，然后再返回刚才的现场继续完成执行。</p><p>关于中断有以下两个概念：</p><ol><li>中断向量：中断向量提供了中断服务程序的入口地址。</li></ol><div class="center"><style>.yfqmtawntclt{}</style><img src="/2025/04/20/note24/note24_pic26.png" class="yfqmtawntclt"></div><ol start="2"><li>中断响应时间：即从发送中断请求开始到进入中断服务程序所需的时间。</li></ol><h3 id="Ⅲ-直接存储器存取方式">Ⅲ 直接存储器存取方式</h3><p>在上文提到的控制方式中，无论是查询方式传送还是中断方式传送，都需要由CPU执行程序来实现，这就限制了数据的传送速度。<br>而直接内存存取（Direct Memory Access, DMA）是指数据在内存和I/O设备间直接成块传送，不需要CPU的任何干涉。除了在开始和结束时需要CPU进行处理之外，其余操作都由DMA硬件来完成，在此期间CPU可进行其它任务。</p><h3 id="Ⅳ-真题赏析-4">Ⅳ 真题赏析</h3><div class="center"><style>.kiltpnytsgtg{}</style><img src="/2025/04/20/note24/note24_pic27.png" class="kiltpnytsgtg"></div><p><strong>A</strong>，C选项中由于DMA方式采用的是以块为基本单位的数据传送，其传输数据的速度是要大于程序中断方式的。</p><h2 id="七、计算机安全">七、计算机安全</h2><h3 id="Ⅰ-加密技术">Ⅰ 加密技术</h3><p>根据具体实现的不同，可以将加密技术分为对称加密和非对称加密两类：</p><ol><li>对称加密技术：其特点是文件加密和解密时使用相同的密钥。由于只有一把密钥，该技术在密钥分发上是有缺陷的。但其加密解密速度很快，适合用来加密大量明文数据。</li><li>非对称加密技术：和对称加密算法不同，非对称加密算法需要两个密钥：公开密钥(Publickey)和私有密钥(Privatekey)。这种技术进行加密的基本过程为：甲方生成一对密钥并将其中的一把作为公钥公开，得到该公钥的乙方使用该密钥加密后将密文发给甲方，甲方再使用自己的私钥对其进行解密。由于非对称加密技术避免了密钥的交换，因此其克服了密钥分发上的缺陷，只是会降低加密解密速度。</li></ol><div class="center"><style>.ibvtrtfkqgjb{}</style><img src="/2025/04/20/note24/note24_pic28.png" class="ibvtrtfkqgjb"></div><h3 id="Ⅱ-认证技术">Ⅱ 认证技术</h3><p>认证技术则主要用来验证用户、设备或数据的真实身份​​，确保通信双方可信，防止冒充或篡改。常见的认证技术主要以下几种：</p><ol><li>摘要：将想要发送的明文经过Hash算法后得到摘要，将摘要和密文一同发送。接收方通过验证解密后得到的明文进行Hash算法的结果和摘要是否一致来进行认证。</li><li>数字签名：发送方使用私钥将摘要加密后得到签名，随后将签名附送。其余步骤和摘要认证类似。</li><li>数字证书：数字证书由权威机构（CA）发放，用户需要将自己的个人信息和公钥交给CA，CA随后使用自己的私钥对数字证书签名。接收者可以使用CA的公钥解密数字证书，进而得到用户的公钥。</li></ol><h3 id="Ⅲ-真题赏析-2">Ⅲ 真题赏析</h3><div class="center"><style>.pfdmdabbtouk{}</style><img src="/2025/04/20/note24/note24_pic29.png" class="pfdmdabbtouk"></div><p><strong>AD</strong></p><blockquote><p>甲方生成一对密钥并将其中的一把作为公钥公开，得到该公钥的乙方使用该密钥加密后将密文发给甲方，甲方再使用自己的私钥对其进行解密。</p></blockquote><p>私钥用于解密而公钥用于加密，66题BD排除，67题AC排除。</p><blockquote><p>发送方使用私钥将摘要加密后得到签名。</p></blockquote><p>私钥用于签名，66题C排除，67题B排除。</p><hr><div class="center"><style>.tnzbllgokcje{}</style><img src="/2025/04/20/note24/note24_pic30.png" class="tnzbllgokcje"></div><p><strong>A</strong>，网站的真伪就在于数字证书的真伪，数字证书的真伪就在于CA的真伪，那么就可以通过CA的签名来判断CA的真伪。</p><hr><div class="center"><style>.fhqyguirevhj{}</style><img src="/2025/04/20/note24/note24_pic31.png" class="fhqyguirevhj"></div><p><strong>A</strong>，PKI体制即为公钥体制（PublicKey Infrastructure），在此体制下维护数字证书肯定是依靠公共性的机构，即CA。而正如上文所述，CA是使用自己的私钥对数字证书签名的。</p><hr><div class="center"><style>.ocojtdomsowm{}</style><img src="/2025/04/20/note24/note24_pic32.png" class="ocojtdomsowm"></div><p><strong>D</strong>，私钥是无论如何都不能互换的，AC选项排除。A、B互信的前提应该是I1、I2互信，即I1、I2能够交换公钥。</p><h2 id="八、计算机可靠性">八、计算机可靠性</h2><p>计算机系统十分复杂，若要分析其可靠性，可将这个大系统分割成若干个子系统来简化分析过程，常见的系统可靠性数学模型有以下几种：</p><h3 id="Ⅰ-串联系统">Ⅰ 串联系统</h3><div class="center"><style>.lsbztxjvxpbz{}</style><img src="/2025/04/20/note24/note24_pic33.png" class="lsbztxjvxpbz"></div><p>该系统当且仅当所有子系统都能正常工作时系统才能正常工作，其可靠性R为：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo>=</mo><msub><mi>R</mi><mn>1</mn></msub><msub><mi>R</mi><mn>2</mn></msub><mo>⋅</mo><mo>⋅</mo><mo>⋅</mo><msub><mi>R</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">R=R_1R_2\cdot \cdot \cdot R_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><h3 id="Ⅱ-并联系统">Ⅱ 并联系统</h3><div class="center"><style>.egzizatreytl{}</style><img src="/2025/04/20/note24/note24_pic34.png" class="egzizatreytl"></div><p>假如一个子系统能够正常工作，整个系统就能正常工作，其可靠性R为：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mo>=</mo><mn>1</mn><mo>−</mo><mrow><mo fence="true">(</mo><mn>1</mn><mo>−</mo><msub><mi>R</mi><mn>1</mn></msub><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><mn>1</mn><mo>−</mo><msub><mi>R</mi><mn>2</mn></msub><mo fence="true">)</mo></mrow><mo>⋅</mo><mo>⋅</mo><mo>⋅</mo><mrow><mo fence="true">(</mo><mn>1</mn><mo>−</mo><msub><mi>R</mi><mi>N</mi></msub><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">R=1-\left( 1-R_1 \right) \left( 1-R_2 \right) \cdot \cdot \cdot \left( 1-R_N \right) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></span></p>]]></content>
    
    
    <categories>
      
      <category>软考</category>
      
      <category>软件设计师</category>
      
      <category>上午题</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机系统</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>优先队列的应用</title>
    <link href="/2025/04/11/note21/"/>
    <url>/2025/04/11/note21/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>优先队列的应用</h1><p>优先队列是一种基于堆实现的数据结构，它使得队列中最高优先级的元素总是排在堆顶（优先级或大或小，与大顶堆或小顶堆有关）。</p><div class="center"><style>.bugkjcmlkjqs{}</style><img src="/2025/04/11/note21/note21_pic01.png" class="bugkjcmlkjqs"></div><p>在Python中可以直接使用<code>heapq</code>库来使用优先队列，主要有以下几个用法:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><span class="hljs-keyword">import</span> sys<br><br>heap = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().strip().split()))<br><br>heap = heapq.heapify(heap)      <span class="hljs-comment"># 将一个朴素队列堆化</span><br>min_num = heapq.heappop(heap)   <span class="hljs-comment"># 弹出堆中的最小元素（该库默认定义为小顶堆）</span><br><br>heapq.heappush(heap, new_num)   <span class="hljs-comment"># 插入一个新的数</span><br><br>n = <span class="hljs-number">3</span><br>heap = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>]<br><span class="hljs-built_in">print</span>(heapq.nsmallest(n, heap)) <span class="hljs-comment"># 输出堆中最小的n个元素</span><br><span class="hljs-built_in">print</span>(heapq.nlargest(n, heap))  <span class="hljs-comment"># 输出堆中最大的n个元素</span><br></code></pre></td></tr></table></figure><p>最大堆可以通过将队列全部取相反数实现，不再赘述。</p><h2 id="P1090-NOIP-2004-提高组-合并果子"><a href="https://www.luogu.com.cn/problem/P1090">P1090 [NOIP 2004 提高组] 合并果子</a></h2><h3 id="题目描述">题目描述</h3><p>在一个果园里，多多已经将所有的果子打了下来，而且按果子的不同种类分成了不同的堆。多多决定把所有的果子合成一堆。</p><p>每一次合并，多多可以把两堆果子合并到一起，消耗的体力等于两堆果子的重量之和。可以看出，所有的果子经过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 次合并之后， 就只剩下一堆了。多多在合并果子时总共消耗的体力等于每次合并所耗体力之和。</p><p>因为还要花大力气把这些果子搬回家，所以多多在合并果子时要尽可能地节省体力。假定每个果子重量都为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> ，并且已知果子的种类 数和每种果子的数目，你的任务是设计出合并的次序方案，使多多耗费的体力最少，并输出这个最小的体力耗费值。</p><p>例如有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 种果子，数目依次为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> ， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> ， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span> 。可以先将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 、 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 堆合并，新堆数目为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> ，耗费体力为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 。接着，将新堆与原先的第三堆合并，又得到新的堆，数目为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>12</mn></mrow><annotation encoding="application/x-tex">12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span></span></span></span> ，耗费体力为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>12</mn></mrow><annotation encoding="application/x-tex">12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span></span></span></span> 。所以多多总共耗费体力 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>3</mn><mo>+</mo><mn>12</mn><mo>=</mo><mn>15</mn></mrow><annotation encoding="application/x-tex">=3+12=15</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">15</span></span></span></span> 。可以证明 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>15</mn></mrow><annotation encoding="application/x-tex">15</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">15</span></span></span></span> 为最小的体力耗费值。</p><h3 id="输入格式">输入格式</h3><p>共两行。<br>第一行是一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>10000</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">n(1\leq n\leq 10000)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">10000</span><span class="mclose">)</span></span></span></span> ，表示果子的种类数。</p><p>第二行包含 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个整数，用空格分隔，第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo>≤</mo><mn>20000</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a_i(1\leq a_i\leq 20000)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">20000</span><span class="mclose">)</span></span></span></span> 是第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 种果子的数目。</p><h3 id="输出格式">输出格式</h3><p>一个整数，也就是最小的体力耗费值。输入数据保证这个值小于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>31</mn></msup></mrow><annotation encoding="application/x-tex">2^{31}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31</span></span></span></span></span></span></span></span></span></span></span></span> 。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 <br>1 2 9<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">15<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">30\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">30%</span></span></span></span> 的数据，保证有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">n \le 1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1000</span></span></span></span>：</p><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">50\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">50%</span></span></span></span> 的数据，保证有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mn>5000</mn></mrow><annotation encoding="application/x-tex">n \le 5000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5000</span></span></span></span>；</p><p>对于全部的数据，保证有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mn>10000</mn></mrow><annotation encoding="application/x-tex">n \le 10000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10000</span></span></span></span>。</p><h3 id="解决方案">解决方案</h3><p>直接逐个弹出最小的两个元素，并将这两个元素的和再插入回堆中即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    heap = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().strip().split()))<br><br>    heapq.heapify(heap)<br><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(heap) &gt; <span class="hljs-number">1</span>:<br>        pop_num1 = heapq.heappop(heap)<br>        pop_num2 = heapq.heappop(heap)<br><br>        push_num = pop_num1 + pop_num2<br>        ans += push_num<br><br>        heapq.heappush(heap, push_num)<br>        <br>    <span class="hljs-built_in">print</span>(ans)<br>    <br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.dhbndpldpivr{}</style><img src="/2025/04/11/note21/note21_pic02.png" class="dhbndpldpivr"></div><h1>这里留个尾巴，等主播打完蓝桥杯回来更新P8755</h1>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>堆</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>堆</tag>
      
      <tag>优先队列</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>背包DP的学习</title>
    <link href="/2025/04/10/note20/"/>
    <url>/2025/04/10/note20/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>背包DP的学习</h1><p>目前需要掌握的背包DP主要包括以下几种：</p><ul><li>01背包</li><li>恰好装满的01背包</li><li>完全背包</li></ul><h2 id="一、01背包">一、01背包</h2><h3 id="P1048-NOIP-2005-普及组-采药">P1048 [NOIP 2005 普及组] 采药</h3><h4 id="题目描述">题目描述</h4><p>辰辰是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同的草药，采每一株都需要一些时间，每一株也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”</p><p>如果你是辰辰，你能完成这个任务吗？</p><h4 id="输入格式">输入格式</h4><p>第一行有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>T</mi><mo>≤</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">1 \le T \le 1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1000</span></span></span></span>）和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>M</mi><mo>≤</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">1 \le  M \le 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span>），用一个空格隔开，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 代表总共能够用来采药的时间，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> 代表山洞里的草药的数目。</p><p>接下来的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> 行每行包括两个在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn></mrow><annotation encoding="application/x-tex">100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span> 之间（包括 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn></mrow><annotation encoding="application/x-tex">100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span>）的整数，分别表示采摘某株草药的时间和这株草药的价值。</p><h4 id="输出格式">输出格式</h4><p>输出在规定的时间内可以采到的草药的最大总价值。</p><h4 id="输入输出样例-1">输入输出样例 #1</h4><h5 id="输入-1">输入 #1</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">70 3<br>71 100<br>69 1<br>1 2<br></code></pre></td></tr></table></figure><h5 id="输出-1">输出 #1</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br></code></pre></td></tr></table></figure><h4 id="说明-提示">说明/提示</h4><p><strong>【数据范围】</strong></p><ul><li>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">30\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">30%</span></span></span></span> 的数据，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>≤</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">M \le 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span>；</li><li>对于全部的数据，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>≤</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">M \le 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span>。</li></ul><p><strong>【题目来源】</strong></p><p>NOIP 2005 普及组第三题</p><h4 id="解决方案">解决方案</h4><p>一颗草药一旦被采摘就会消失，所以这里显然是一个01背包问题。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    t, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    times, values =[], []<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        time, value = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().strip().split())<br>        times.append(time)<br>        values.append(value)<br><br>    times.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>    values.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br><br>    <span class="hljs-comment"># 创建背包dp数组</span><br>    <span class="hljs-comment"># dp[i][j]的含义为在只放前i个物品的情况下容量为j的背包里物品的最大价值</span><br>    <span class="hljs-comment"># 在这道题目中t即为背包的容量，m为最多可能放进去的物品个数</span><br>    <span class="hljs-comment"># 因此应该构建一个dp[m][t]</span><br>    dp = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> __ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m+<span class="hljs-number">1</span>)]<br><br>    <span class="hljs-comment"># 开始进行dp</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, t+<span class="hljs-number">1</span>):<br>            <span class="hljs-comment"># 如果剩余的时间足够采第i颗药</span><br>            <span class="hljs-keyword">if</span> j &gt;= times[i]:<br>                dp[i][j] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j], dp[i-<span class="hljs-number">1</span>][j-times[i]] + values[i])<br>            <span class="hljs-comment"># 如果不够</span><br>            <span class="hljs-keyword">else</span>:<br>                dp[i][j] = dp[i-<span class="hljs-number">1</span>][j]<br><br>    <span class="hljs-built_in">print</span>(dp[m][t])<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>Bingo!</p><div><style>.kvokrmevccyq{}</style><img src="/2025/04/10/note20/note20_pic01.png" class="kvokrmevccyq"></div><h3 id="P1507-NASA的食物计划">P1507 NASA的食物计划</h3><h4 id="题目背景">题目背景</h4><p>NASA（美国航空航天局）因为航天飞机的隔热瓦等其他安全技术问题一直大伤脑筋，因此在各方压力下终止了航天飞机的历史，但是此类事情会不会在以后发生，谁也无法保证。所以，在遇到这类航天问题时，也许只能让航天员出仓维修。但是过多的维修会消耗航天员大量的能量，因此 NASA 便想设计一种食品方案，使体积和承重有限的条件下多装载一些高卡路里的食物。</p><h4 id="题目描述-2">题目描述</h4><p>航天飞机的体积有限，当然如果载过重的物品，燃料会浪费很多钱，每件食品都有各自的体积、质量以及所含卡路里。在告诉你体积和质量的最大值的情况下，请输出能达到的食品方案所含卡路里的最大值，当然每个食品只能使用一次。</p><h4 id="输入格式-2">输入格式</h4><p>第一行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 个整数，分别代表体积最大值 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span></span></span></span> 和质量最大值 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>。</p><p>第二行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 个整数代表食品总数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>。</p><p>接下来 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 行每行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 个数 体积 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">h_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，质量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">t_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，所含卡路里 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">k_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</p><h4 id="输出格式-2">输出格式</h4><p>一个数，表示所能达到的最大卡路里（<code>int</code> 范围内）</p><h4 id="输入输出样例-1-2">输入输出样例 #1</h4><h5 id="输入-1-2">输入 #1</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">320 350<br>4<br>160 40 120<br>80 110 240<br>220 70 310<br>40 400 220<br></code></pre></td></tr></table></figure><h5 id="输出-1-2">输出 #1</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">550<br></code></pre></td></tr></table></figure><h4 id="说明-提示-2">说明/提示</h4><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">100%</span></span></span></span> 的数据，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo separator="true">,</mo><mi>t</mi><mo separator="true">,</mo><msub><mi>h</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>t</mi><mi>i</mi></msub><mo>≤</mo><mn>400</mn></mrow><annotation encoding="application/x-tex">h,t,h_i,t_i \le 400</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">h</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">400</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>≤</mo><mn>50</mn></mrow><annotation encoding="application/x-tex">n \le 50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">50</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>i</mi></msub><mo>≤</mo><mn>500</mn></mrow><annotation encoding="application/x-tex">k_i \le 500</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">500</span></span></span></span>。</p><h4 id="解决方案-2">解决方案</h4><p>题目中已经明确了每个食品只能使用一次，因此这道题是一个01背包问题。但是这道题与上一道不同的地方在于这里相当于有两个背包容量，需要多开一维dp数组。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    h, t = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    <br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br>    hh, tt, kk = [], [], []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        hi, ti, ki = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().strip().split())<br>        hh.append(hi)<br>        tt.append(ti)<br>        kk.append(ki)<br><br>    hh.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>    tt.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>    kk.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br><br>    <span class="hljs-comment"># 创建dp[n][h][t]</span><br>    dp = [[[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> __ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> ___ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, h+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, t+<span class="hljs-number">1</span>):<br>                <span class="hljs-comment"># 如果有容量放第i个食品</span><br>                <span class="hljs-keyword">if</span> j &gt;= hh[i] <span class="hljs-keyword">and</span> k &gt;= tt[i]:<br>                    dp[i][j][k] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j][k], dp[i-<span class="hljs-number">1</span>][j-hh[i]][k-tt[i]] + kk[i])<br>                <span class="hljs-comment"># 否则</span><br>                <span class="hljs-keyword">else</span>:<br>                    dp[i][j][k] = dp[i-<span class="hljs-number">1</span>][j][k]<br><br>    <span class="hljs-built_in">print</span>(dp[n][h][t])<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><p>采用和上题类似的思路顺利AC：</p><div><style>.wyhwqcrbtwes{}</style><img src="/2025/04/10/note20/note20_pic02.png" class="wyhwqcrbtwes"></div><h2 id="二、恰好装满的01背包">二、恰好装满的01背包</h2><h3 id="力扣2915-和为目标值的最长子序列的长度">力扣2915.和为目标值的最长子序列的长度</h3><div><style>.jlsfvtrtmncf{}</style><img src="/2025/04/10/note20/note20_pic03.png" class="jlsfvtrtmncf"></div><h4 id="解决方案-3">解决方案</h4><p>不难发现这道题要求子序列的和必须为<code>target</code>，那么这种情况就是必须要将背包完全装满的01背包问题。<br><br>而这种情形的解决方案和朴素的01背包的唯一不同就是对DP数组的初始化方式，我们需要使用负无穷来进行初始化：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">dp = [[-inf <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> __ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(c+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(c+<span class="hljs-number">1</span>): dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>这样一来，在每次进行状态转移的时候（<code>dp[j - w[i]]</code>），只要最后不能到达<code>dp[i][0] = 0</code>，<code>dp[i][j]</code>就永远会是负无穷，也就是说背包无法完全装满。<br><br>根据这个思路我们可以得到以下的解决方案：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubsequence</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        inf = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br><br>        weights = nums[:]<br>        values = [<span class="hljs-number">1</span>] * (<span class="hljs-built_in">len</span>(weights)+<span class="hljs-number">1</span>)<br><br>        c, t = <span class="hljs-built_in">len</span>(weights), target<br>        weights.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>        <span class="hljs-comment"># 创建dp[c][t]</span><br>        dp = [[-inf <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> __ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(c+<span class="hljs-number">1</span>)]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(c+<span class="hljs-number">1</span>): dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, c+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, t+<span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">if</span> j &gt;= weights[i]:<br>                    dp[i][j] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j], dp[i-<span class="hljs-number">1</span>][j-weights[i]] + values[i])<br>                <span class="hljs-keyword">else</span>:<br>                    dp[i][j] = dp[i-<span class="hljs-number">1</span>][j]<br></code></pre></td></tr></table></figure><p>我们也可以采用滚动数组的方式解题，这样可以为下面学习完全背包做好准备：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubsequence</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        inf = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br><br>        weights = nums[:]<br>        values = [<span class="hljs-number">1</span>] * (<span class="hljs-built_in">len</span>(weights)+<span class="hljs-number">1</span>)<br><br>        c, t = <span class="hljs-built_in">len</span>(weights), target<br>        weights.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>        <span class="hljs-comment"># 创建dp[t]</span><br>        dp = [-inf <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t+<span class="hljs-number">1</span>)]<br>        dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, c+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t, weights[i]-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>                dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j-weights[i]] + values[i])<br><br>        <span class="hljs-keyword">if</span> dp[t] &gt;= <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> dp[t]<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>这个状态转移方程是如何得到的呢？<br><br>最开始的状态转移方程为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">dp[i][j] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][j], dp[i-<span class="hljs-number">1</span>][j-weights[i]] + values[i])<br></code></pre></td></tr></table></figure><p>这种情况下，如果我们有一个<code>i*i</code>的表格，那么我们每次进行状态转移都是根据第<code>i-1</code>行的内容在下方的第<code>i</code>行上<strong>新增</strong>数据。<br><br>而如果我们将状态转移方程改写为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i][j-weights[i]] + values[i])<br></code></pre></td></tr></table></figure><p>那么此时我们在进行状态转移的时候就是根据第<code>i</code>行的内容在第<code>i</code>行上<strong>更改</strong>数据。<br><br>同时不难发现，这个时候我们只需要考虑<code>j</code>的变化即可，<code>i</code>完全可以省略，即为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j-weights[i]] + values[i])<br></code></pre></td></tr></table></figure><p>那么这个时候我们原本开辟的二维<code>dp[i][j]</code>数组就被简化为了一个一维的<code>dp[j]</code>数组，空间复杂度得以被大幅简化。<br></p><p>此外我们需要注意的是，在采用滚动数组写法之后内层的嵌套循环由原本的正循环改为了负循环，我们通过一个实例来感受为什么要这么做：</p><div class="center"><table><thead><tr><th style="text-align:center">dp[j]</th><th style="text-align:center">0</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th></tr></thead></table></div><p>如果我们采用正循环的话，dp数组就会变为（类似前缀和）：</p><div class="center"><table><thead><tr><th style="text-align:center">dp[j]</th><th style="text-align:center">0</th><th style="text-align:center">1</th><th style="text-align:center">3</th><th style="text-align:center">6</th><th style="text-align:center">10</th><th style="text-align:center">15</th></tr></thead></table></div><p>而正确的负循环的情况下，dp数组其实应该是：</p><div class="center"><table><thead><tr><th style="text-align:center">dp[j]</th><th style="text-align:center">0</th><th style="text-align:center">1</th><th style="text-align:center">3</th><th style="text-align:center">5</th><th style="text-align:center">7</th><th style="text-align:center">9</th></tr></thead></table></div><p>不难发现如果要采用正循环的话，在每次进行状态转移的时候前边“已经被放进背包”的物品会被再放进去一遍，这就违背了01背包的定义，所以我们应该采用负循环的写法。但是，正循环造成的重复放置又恰恰满足了完全背包的定义，一个物品得以被最大程度地重复放置，所以在完全背包当中我们将要采用正循环的写法。</p><h2 id="三、完全背包">三、完全背包</h2><h3 id="P1616-疯狂的采药">P1616 疯狂的采药</h3><h4 id="题目背景-2">题目背景</h4><p>此题为纪念 LiYuxiang 而生。</p><h4 id="题目描述-3">题目描述</h4><p>LiYuxiang 是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同种类的草药，采每一种都需要一些时间，每一种也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”</p><p>如果你是 LiYuxiang，你能完成这个任务吗？</p><p>此题和原题的不同点：</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>. 每种草药可以无限制地疯狂采摘。</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>. 药的种类眼花缭乱，采药时间好长好长啊！师傅等得菊花都谢了！</p><h4 id="输入格式-3">输入格式</h4><p>输入第一行有两个整数，分别代表总共能够用来采药的时间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> 和代表山洞里的草药的数目 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span>。</p><p>第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 到第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(m + 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> 行，每行两个整数，第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i + 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> 行的整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i, b_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 分别表示采摘第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 种草药的时间和该草药的价值。</p><h4 id="输出格式-3">输出格式</h4><p>输出一行，这一行只包含一个整数，表示在规定的时间内，可以采到的草药的最大总价值。</p><h4 id="输入输出样例-1-3">输入输出样例 #1</h4><h5 id="输入-1-3">输入 #1</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">70 3<br>71 100<br>69 1<br>1 2<br></code></pre></td></tr></table></figure><h5 id="输出-1-3">输出 #1</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">140<br></code></pre></td></tr></table></figure><h4 id="说明-提示-3">说明/提示</h4><h5 id="数据规模与约定">数据规模与约定</h5><ul><li>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">30\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">30%</span></span></span></span> 的数据，保证 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>≤</mo><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">m \le 10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> 。</li><li>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">100%</span></span></span></span> 的数据，保证 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>m</mi><mo>≤</mo><msup><mn>10</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">1 \leq m \le 10^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>t</mi><mo>≤</mo><msup><mn>10</mn><mn>7</mn></msup></mrow><annotation encoding="application/x-tex">1 \leq t \leq 10^7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span></span></span></span>，且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>m</mi><mo>×</mo><mi>t</mi><mo>≤</mo><msup><mn>10</mn><mn>7</mn></msup></mrow><annotation encoding="application/x-tex">1 \leq m \times t \leq 10^7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo>≤</mo><msup><mn>10</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">1 \leq a_i, b_i \leq 10^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span>。</li></ul><h4 id="解决方案-4">解决方案</h4><p>完全背包的模板题，思路不再赘述。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    t, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    times, values = [], []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        time, value = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, sys.stdin.readline().strip().split())<br>        times.append(time)<br>        values.append(value)<br><br>    times.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>    values.insert(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br><br>    <span class="hljs-comment"># 创建dp[t]</span><br>    dp = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t+<span class="hljs-number">1</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(times[i], t+<span class="hljs-number">1</span>):<br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j-times[i]]+values[i])<br><br>    <span class="hljs-built_in">print</span>(dp[t])<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>动态规划</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>动态规划</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>贪心算法的应用</title>
    <link href="/2025/04/10/note18/"/>
    <url>/2025/04/10/note18/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>贪心算法的应用</h1><p>如果想应用贪心算法，那么当下的情景应该包括以下两个特征：</p><ul><li>无后效性：当前决策不影响后续状态</li><li>最优子结构：局部最优解能推导全局最优解</li></ul><p>因此适用于贪心算法的问题往往具有明确的<strong>排序性质</strong>和<strong>可分解性</strong>。</p><h2 id="P8597-蓝桥杯-2013-省-B-翻硬币">P8597 [蓝桥杯 2013 省 B] 翻硬币</h2><h3 id="题目背景">题目背景</h3><p>小明正在玩一个“翻硬币”的游戏。</p><h3 id="题目描述">题目描述</h3><p>桌上放着排成一排的若干硬币。我们用 <code>*</code> 表示正面，用 <code>o</code> 表示反面（是小写字母，不是零），比如可能情形是 <code>**oo***oooo</code>，如果同时翻转左边的两个硬币，则变为 <code>oooo***oooo</code>。现在小明的问题是：如果已知了初始状态和要达到的目标状态，每次只能同时翻转相邻的两个硬币，那么对特定的局面，最少要翻动多少次呢？</p><h3 id="输入格式">输入格式</h3><p>两行等长字符串，分别表示初始状态和要达到的目标状态，每行长度小于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1000</mn></mrow><annotation encoding="application/x-tex">1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1000</span></span></span></span>。</p><p>数据保证一定存在至少一种方案可以从初始状态和要达到的目标状态。</p><h3 id="输出格式">输出格式</h3><p>一个整数，表示最小操作步数。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">**********<br>o****o****<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">5<br></code></pre></td></tr></table></figure><h3 id="输入输出样例-2">输入输出样例 #2</h3><h4 id="输入-2">输入 #2</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">*o**o***o***<br>*o***o**o***<br></code></pre></td></tr></table></figure><h4 id="输出-2">输出 #2</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p>source：蓝桥杯 2013 省 B 组 H 题</p><h3 id="解决方案">解决方案</h3><p>在这个情景当中，如果一个硬币连续被翻动两次就相当于没翻，那么如果我们一遇到和目标情况不一样的硬币就把它和它后边一枚硬币翻动的话就能满足无后效性的条件。因为后边翻动的这枚硬币也会在下一次比较中被翻回去，相当于没翻。同时这样一来我们一次遍历就能完成比较，满足最优子结构的条件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">reverse</span>(<span class="hljs-params">arr, index</span>):<br>    <span class="hljs-keyword">if</span> arr[index] == <span class="hljs-string">&#x27;*&#x27;</span>:<br>        arr[index] = <span class="hljs-string">&#x27;o&#x27;</span><br>    <span class="hljs-keyword">else</span>:<br>        arr[index] = <span class="hljs-string">&#x27;*&#x27;</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    org = <span class="hljs-built_in">list</span>(sys.stdin.readline().strip())<br>    goal = <span class="hljs-built_in">list</span>(sys.stdin.readline().strip())<br><br>    count, length = <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(org)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(length):<br>        <span class="hljs-keyword">if</span> org[i] != goal[i]:<br>            reverse(org, i)<br>            reverse(org, i+<span class="hljs-number">1</span>)<br>            count += <span class="hljs-number">1</span><br><br>    <span class="hljs-built_in">print</span>(count)<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.vkrpkwxdlnqd{}</style><img src="/2025/04/10/note18/note18_pic01.png" class="vkrpkwxdlnqd"></div><h2 id="P8732-蓝桥杯-2020-国-ABC-答疑">P8732 [蓝桥杯 2020 国 ABC] 答疑</h2><h3 id="题目描述-2">题目描述</h3><p>有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 位同学同时找老师答疑。每位同学都预先估计了自己答疑的时间。老师可以安排答疑的顺序，同学们要依次进入老师办公室答疑。</p><p>一位同学答疑的过程如下:</p><ol><li><p>首先进入办公室，编号为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 的同学需要 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 毫秒的时间。</p></li><li><p>然后同学问问题老师解答，编号为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 的同学需要 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 毫秒的时间。</p></li><li><p>答疑完成后，同学很高兴，会在课程群里面发一条消息，需要的时间可以忽略。</p></li><li><p>最后同学收拾东西离开办公室，需要 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">e_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 毫秒的时间。一般需要 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn></mrow><annotation encoding="application/x-tex">10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span> 秒、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn></mrow><annotation encoding="application/x-tex">20</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">20</span></span></span></span> 秒或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn></mrow><annotation encoding="application/x-tex">30</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">30</span></span></span></span> 秒，即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">e_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 取值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10000</mn></mrow><annotation encoding="application/x-tex">10000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10000</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20000</mn></mrow><annotation encoding="application/x-tex">20000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">20000</span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30000</mn></mrow><annotation encoding="application/x-tex">30000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">30000</span></span></span></span>。</p></li></ol><p>一位同学离开办公室后，紧接着下一位同学就可以进入办公室了。</p><p>答疑从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 时刻开始。老师想合理的安排答疑的顺序，使得同学们在课程群里面发消息的时刻之和最小。</p><h3 id="输入格式-2">输入格式</h3><p>输入第一行包含一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，表示同学的数量。</p><p>接下来 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 行, 描述每位同学的时间。其中第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 行包含三个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>e</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s_{i}, a_{i}, e_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，意义如上所述。</p><h3 id="输出格式-2">输出格式</h3><p>输出一个整数，表示同学们在课程群里面发消息的时刻之和最小是多少。</p><h3 id="输入输出样例-1-2">输入输出样例 #1</h3><h4 id="输入-1-2">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br>10000 10000 10000<br>20000 50000 20000<br>30000 20000 30000<br></code></pre></td></tr></table></figure><h4 id="输出-1-2">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">280000<br></code></pre></td></tr></table></figure><h3 id="说明-提示-2">说明/提示</h3><p><strong>【样例说明】</strong></p><p>按照 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">1,3,2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span></span></span></span> 的顺序答疑，发消息的时间分别是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20000</mn><mo separator="true">,</mo><mn>80000</mn><mo separator="true">,</mo><mn>180000</mn></mrow><annotation encoding="application/x-tex">20000,80000,180000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">20000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">80000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">180000</span></span></span></span> 。</p><p><strong>【评测用例规模与约定】</strong></p><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">30 \%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">30%</span></span></span></span> 的评测用例, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>20</mn></mrow><annotation encoding="application/x-tex">1 \leq n \leq 20</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">20</span></span></span></span> 。</p><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>60</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">60 \%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">60%</span></span></span></span> 的评测用例, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>200</mn></mrow><annotation encoding="application/x-tex">1 \leq n \leq 200</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">200</span></span></span></span> 。</p><p>对于所有评测用例, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>1000</mn><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><msub><mi>s</mi><mi>i</mi></msub><mo>≤</mo><mn>60000</mn><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo>≤</mo><mn>1000000</mn></mrow><annotation encoding="application/x-tex">1 \leq n \leq 1000,1 \leq s_{i} \leq 60000,1 \leq a_{i} \leq 1000000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">60000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1000000</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub><mo>∈</mo><mo stretchy="false">{</mo><mn>10000</mn><mo separator="true">,</mo><mn>20000</mn><mo separator="true">,</mo><mn>30000</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">e_{i} \in\{10000,20000,30000\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">10000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">20000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">30000</span><span class="mclose">}</span></span></span></span> ，即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">e_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 一定是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10000</mn><mtext>、</mtext><mn>20000</mn><mtext>、</mtext><mn>30000</mn></mrow><annotation encoding="application/x-tex">10000 、 20000 、 30000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">10000</span><span class="mord cjk_fallback">、</span><span class="mord">20000</span><span class="mord cjk_fallback">、</span><span class="mord">30000</span></span></span></span> 之一。</p><p>蓝桥杯 2020 年国赛 A 组 H 题（B 组 H 题, C 组 J 题）。</p><h3 id="解决方案-2">解决方案</h3><p>对于相邻的两个同学<code>i</code>和<code>i+1</code>而言，他们发消息的时间的和为：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>（</mtext><msub><mi>s</mi><mi>i</mi></msub><mo>+</mo><msub><mi>a</mi><mi>i</mi></msub><mtext>）</mtext><mo>+</mo><mrow><mo fence="true">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo>+</mo><msub><mi>a</mi><mi>i</mi></msub><mo>+</mo><msub><mi>e</mi><mi>i</mi></msub><mo>+</mo><msub><mi>s</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{（}s_i+a_i\text{）}+\left( s_i+a_i+e_i+s_{i+1}+a_{i+1} \right) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord text"><span class="mord cjk_fallback">（</span></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord text"><span class="mord cjk_fallback">）</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></span></p><p>如果我们将两位同学交换，则变为：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>（</mtext><msub><mi>s</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mtext>）</mtext><mo>+</mo><mrow><mo fence="true">(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>s</mi><mi>i</mi></msub><mo>+</mo><msub><mi>a</mi><mi>i</mi></msub><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{（}s_{i+1}+a_{i+1}\text{）}+\left( s_{i+1}+a_{i+1}+e_{i+1}+s_i+a_i \right) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"></span><span class="mord text"><span class="mord cjk_fallback">（</span></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mord text"><span class="mord cjk_fallback">）</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></span></p><p>不难发现这次交换是不影响除这两位同学之外的同学们的发消息的时间的，因此满足无后效性。<br><br>因此，为了从局部最优解推得全局最优解，我们只需要将前两个式子中的较小的一个放在前边即可。<br><br>消元，不难发现，就是比较<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>e</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s_{i}, a_{i}, e_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>之和与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>e</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">s_{i+1}, a_{i+1}, e_{i+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span>之和。那么我们按此原则对输入排序并计算即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    times = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        time = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>        times.append(time)<br><br>    times.sort(key=<span class="hljs-keyword">lambda</span> x: <span class="hljs-built_in">sum</span>(x))<br><br>    now, ans = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        now += times[i][<span class="hljs-number">0</span>] + times[i][<span class="hljs-number">1</span>]<br>        ans += now<br>        now += times[i][<span class="hljs-number">2</span>]<br><br>    <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.nqbcnofkwxrd{}</style><img src="/2025/04/10/note18/note18_pic02.png" class="nqbcnofkwxrd"></div>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>贪心</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>贪心</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>几种数论基础函数的实现</title>
    <link href="/2025/04/09/note17/"/>
    <url>/2025/04/09/note17/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>几种数论基础函数的实现</h1><p>本页主要包含以下几种基础函数的实现：</p><ul><li>快速幂</li><li>埃氏筛</li></ul><p>Reference：</p><ul><li><a href="https://blog.csdn.net/m0_52072919/article/details/116400820">快速幂算法 超详细教程</a></li></ul><h2 id="P1226【模板】快速幂"><a href="https://www.luogu.com.cn/problem/P1226">P1226【模板】快速幂</a></h2><h3 id="题目描述">题目描述</h3><p>给你三个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">a,b,p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span></span></span></span>，求 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mi>b</mi></msup><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>p</mi></mrow><annotation encoding="application/x-tex">a^b \bmod p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span>。</p><h3 id="输入格式">输入格式</h3><p>输入只有一行三个整数，分别代表 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">a,b,p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span></span></span></span>。</p><h3 id="输出格式">输出格式</h3><p>输出一行一个字符串 <code>a^b mod p=s</code>，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">a,b,p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span></span></span></span> 分别为题目给定的值， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> 为运算结果。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 10 9<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2^10 mod 9=7<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p><strong>样例解释</strong></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>10</mn></msup><mo>=</mo><mn>1024</mn></mrow><annotation encoding="application/x-tex">2^{10} = 1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1024</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1024</mn><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mn>9</mn><mo>=</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">1024 \bmod 9 = 7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">1024</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span>。</p><p><strong>数据规模与约定</strong></p><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">100%</span></span></span></span> 的数据，保证 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>&lt;</mo><msup><mn>2</mn><mn>31</mn></msup></mrow><annotation encoding="application/x-tex">0\le a,b &lt; 2^{31}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31</span></span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a+b&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>≤</mo><mi>p</mi><mo>&lt;</mo><msup><mn>2</mn><mn>31</mn></msup></mrow><annotation encoding="application/x-tex">2 \leq p \lt 2^{31}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31</span></span></span></span></span></span></span></span></span></span></span></span>。</p><h3 id="解决方案">解决方案</h3><p>我们采用Reference中的第二种方法，这种方法更好理解一些。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">quick_power</span>(<span class="hljs-params">base, power</span>):<br>    result = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> power &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">if</span> power % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>:<br>            power -= <span class="hljs-number">1</span><br>            <span class="hljs-comment"># 随时取模可以进一步降低时间复杂度</span><br>            result *= base % p<br>        power /= <span class="hljs-number">2</span><br>        base *= base % p<br><br>    <span class="hljs-keyword">return</span> result<br>        <br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    a, b, p = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    ans = quick_power(a, b)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;&#125;^&#123;&#125; mod &#123;&#125;=&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(a, b, p, ans%p))<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.whrcoicfxbry{}</style><img src="/2025/04/09/note17/note17_pic01.png" class="whrcoicfxbry"></div><h2 id="P1218-USACO1-5-特殊的质数肋骨-Superprime-Rib"><a href="https://www.luogu.com.cn/problem/P1218">P1218 [USACO1.5] 特殊的质数肋骨 Superprime Rib</a></h2><h3 id="题目描述-2">题目描述</h3><p>农民约翰的母牛总是产生最好的肋骨。你能通过农民约翰和美国农业部标记在每根肋骨上的数字认出它们。</p><p>农民约翰确定他卖给买方的是真正的质数肋骨，是因为从右边开始切下肋骨，每次还剩下的肋骨上的数字都组成一个质数。</p><p>举例来说：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn><mtext> </mtext><mn>3</mn><mtext> </mtext><mn>3</mn><mtext> </mtext><mn>1</mn></mrow><annotation encoding="application/x-tex">7\ 3\ 3\ 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span><span class="mspace"> </span><span class="mord">3</span><span class="mspace"> </span><span class="mord">3</span><span class="mspace"> </span><span class="mord">1</span></span></span></span> 全部肋骨上的数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7331</mn></mrow><annotation encoding="application/x-tex">7331</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7331</span></span></span></span> 是质数；三根肋骨 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>733</mn></mrow><annotation encoding="application/x-tex">733</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">733</span></span></span></span> 是质数；二根肋骨 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>73</mn></mrow><annotation encoding="application/x-tex">73</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">73</span></span></span></span> 是质数；当然,最后一根肋骨 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span> 也是质数。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7331</mn></mrow><annotation encoding="application/x-tex">7331</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7331</span></span></span></span> 被叫做长度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> 的特殊质数。</p><p>写一个程序对给定的肋骨的数目 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，求出所有的特殊质数。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 不是质数。</p><h3 id="输入格式-2">输入格式</h3><p>一行一个正整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>。</p><h3 id="输出格式-2">输出格式</h3><p>按顺序输出长度为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 的特殊质数,每行一个。</p><h3 id="输入输出样例-1-2">输入输出样例 #1</h3><h4 id="输入-1-2">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br></code></pre></td></tr></table></figure><h4 id="输出-1-2">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs txt">2333<br>2339<br>2393<br>2399<br>2939<br>3119<br>3137<br>3733<br>3739<br>3793<br>3797<br>5939<br>7193<br>7331<br>7333<br>7393<br></code></pre></td></tr></table></figure><h3 id="说明-提示-2">说明/提示</h3><p>【数据范围】<br>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">100%</span></span></span></span> 的数据，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">1\le n \le 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span>。</p><p>题目翻译来自NOCOW。</p><p>USACO Training Section 1.5</p><h3 id="解决方案-2">解决方案</h3><p>这道题最让我吃惊的地方是居然用到了DFS，不妨先来看看我的第一版代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())       <br>        <br>    num = <span class="hljs-number">10</span> ** (n-<span class="hljs-number">1</span>)<br>    edge = <span class="hljs-number">10</span> ** n - <span class="hljs-number">1</span><br><br>    arr = [<span class="hljs-literal">True</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(edge+<span class="hljs-number">1</span>)]<br>    primes = []<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num, edge+<span class="hljs-number">1</span>):<br>        flag = <span class="hljs-literal">True</span><br>        j = i<br>        ii = []<br>        <span class="hljs-keyword">while</span> i:<br>            ii.append(i)<br>            i //= <span class="hljs-number">10</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> ii:<br>            <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> primes:<br>                flag = <span class="hljs-literal">False</span><br>                <span class="hljs-keyword">break</span><br><br>        <span class="hljs-keyword">if</span> flag:<br>            <span class="hljs-built_in">print</span>(j)<br></code></pre></td></tr></table></figure><p>这一版代码虽然在筛选质数的过程中用到了埃氏筛，高效降低了时间复杂度，但是由于随后在寻找答案的过程中进行了及其低效的逐个枚举，仍然使整段代码的时间复杂度达到了一个不可接受的程度。<br><br>随后在查看题解的过程中我才恍然大悟，找答案的过程不也是一个搜索吗，从一个数的第一位开始搜索，如果这一位是质数就接着判断下一位，这样一来就大大降低了时间复杂度：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">num, length</span>):<br>    <span class="hljs-keyword">if</span> length == n:<br>        <span class="hljs-built_in">print</span>(num)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>):<br>        <span class="hljs-keyword">if</span> (num*<span class="hljs-number">10</span> + i) <span class="hljs-keyword">in</span> primes:<br>            dfs(num*<span class="hljs-number">10</span>+i, length+<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>               <br>    num = <span class="hljs-number">10</span> ** (n-<span class="hljs-number">1</span>)<br>    edge = <span class="hljs-number">10</span> ** n - <span class="hljs-number">1</span><br><br>    arr = [<span class="hljs-literal">True</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(edge+<span class="hljs-number">1</span>)]<br>    primes = []<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, edge+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> arr[i]:<br>            primes.append(i)<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+i, edge+<span class="hljs-number">1</span>, i):<br>                arr[j] = <span class="hljs-literal">False</span><br><br>    dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.ghrltxbozgjx{}</style><img src="/2025/04/09/note17/note17_pic02.png" class="ghrltxbozgjx"></div>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>基础数论</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>数论</tag>
      
      <tag>快速幂</tag>
      
      <tag>埃氏筛</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DFS和BFS算法的应用</title>
    <link href="/2025/04/09/note16/"/>
    <url>/2025/04/09/note16/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>DFS和BFS算法的应用</h1><p>深度优先算法（DFS）和广度优先算法（BFS）都是经典的搜索算法，下面我们主要来讨论一下它们使用场景的不同：</p><ul><li>BFS适合用来搜索最优解。因为BFS搜索过程中遇到的解一定离根是最近的，此时算法即可终止，降低了时间复杂度。</li><li>DFS适合用来搜索全部的解，因为DFS的基本逻辑是将全局搜索完毕之后从其中找出离根最近的解，BFS的优势就没有了。</li><li>在空间复杂度上DFS是优于BFS的，这是因为DFS不需要队列来保存搜索过的状态。</li></ul><h2 id="P1219-USACO1-5-八皇后-Checker-Challenge"><a href="https://www.luogu.com.cn/problem/P1219">P1219 [USACO1.5] 八皇后 Checker Challenge</a></h2><h3 id="题目描述">题目描述</h3><p>一个如下的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mo>×</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">6 \times 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span> 的跳棋棋盘，有六个棋子被放置在棋盘上，使得每行、每列有且只有一个，每条对角线（包括两条主对角线的所有平行线）上至多有一个棋子。</p><p><img src="https://cdn.luogu.com.cn/upload/image_hosting/3h71x0yf.png" alt=""></p><p>上面的布局可以用序列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mtext> </mtext><mn>4</mn><mtext> </mtext><mn>6</mn><mtext> </mtext><mn>1</mn><mtext> </mtext><mn>3</mn><mtext> </mtext><mn>5</mn></mrow><annotation encoding="application/x-tex">2\ 4\ 6\ 1\ 3\ 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace"> </span><span class="mord">4</span><span class="mspace"> </span><span class="mord">6</span><span class="mspace"> </span><span class="mord">1</span><span class="mspace"> </span><span class="mord">3</span><span class="mspace"> </span><span class="mord">5</span></span></span></span> 来描述，第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 个数字表示在第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 行的相应位置有一个棋子，如下：</p><p>行号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mtext> </mtext><mn>2</mn><mtext> </mtext><mn>3</mn><mtext> </mtext><mn>4</mn><mtext> </mtext><mn>5</mn><mtext> </mtext><mn>6</mn></mrow><annotation encoding="application/x-tex">1\ 2\ 3\ 4\ 5\ 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace"> </span><span class="mord">2</span><span class="mspace"> </span><span class="mord">3</span><span class="mspace"> </span><span class="mord">4</span><span class="mspace"> </span><span class="mord">5</span><span class="mspace"> </span><span class="mord">6</span></span></span></span></p><p>列号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mtext> </mtext><mn>4</mn><mtext> </mtext><mn>6</mn><mtext> </mtext><mn>1</mn><mtext> </mtext><mn>3</mn><mtext> </mtext><mn>5</mn></mrow><annotation encoding="application/x-tex">2\ 4\ 6\ 1\ 3\ 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace"> </span><span class="mord">4</span><span class="mspace"> </span><span class="mord">6</span><span class="mspace"> </span><span class="mord">1</span><span class="mspace"> </span><span class="mord">3</span><span class="mspace"> </span><span class="mord">5</span></span></span></span></p><p>这只是棋子放置的一个解。请编一个程序找出所有棋子放置的解。<br>并把它们以上面的序列方法输出，解按字典顺序排列。<br>请输出前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 个解。最后一行是解的总个数。</p><h3 id="输入格式">输入格式</h3><p>一行一个正整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，表示棋盘是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n \times n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 大小的。</p><h3 id="输出格式">输出格式</h3><p>前三行为前三个解，每个解的两个数字之间用一个空格隔开。第四行只有一个数字，表示解的总数。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">6<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 4 6 1 3 5<br>3 6 2 5 1 4<br>4 1 5 2 6 3<br>4<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p>【数据范围】<br>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">100%</span></span></span></span> 的数据，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>13</mn></mrow><annotation encoding="application/x-tex">6 \le n \le 13</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">13</span></span></span></span>。</p><p>题目翻译来自NOCOW。</p><p>USACO Training Section 1.5</p><h3 id="解决方案">解决方案</h3><p>这道题显然需要我们找到所有可能的情况并判断其中哪些情况符合要求，所以我们的基本思路应该是DFS。<br><br>此外，由于在一个格子上沿八个方向的搜索效率较低，我们应该逐行进行横向搜索。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python">count = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">global</span> count<br>  <span class="hljs-comment"># 搜索函数的开头应该先明确推出条件</span><br>  <span class="hljs-comment"># 这里是当前搜索的行数超出棋盘搜索即终止</span><br>  <span class="hljs-keyword">if</span> x &gt; n:<br>    <span class="hljs-keyword">if</span> count &lt;= <span class="hljs-number">2</span>:<br>      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-built_in">print</span>(a[i], end=<span class="hljs-string">&quot; &quot;</span>)<br>      <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&quot;</span>)<br>    count += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span><br><br>  <span class="hljs-comment"># 然后开始实现搜索功能</span><br>  <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-comment"># 在上对角线及其平行线上的点的横纵坐标之和相等</span><br>    <span class="hljs-comment"># 在下对角线及其平行线上的点的横纵坐标之差相等</span><br>    <span class="hljs-keyword">if</span> b[y] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> c[x+y] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> d[x-y+n] == <span class="hljs-number">0</span>:<br>      a[x] = y<br>      b[y] = <span class="hljs-number">1</span><br>      c[x+y] = <span class="hljs-number">1</span><br>      d[x-y+n] = <span class="hljs-number">1</span><br><br>      <span class="hljs-comment"># 开始搜索下一行</span><br>      dfs(x+<span class="hljs-number">1</span>)<br><br>      <span class="hljs-comment"># 还原</span><br>      b[y] = <span class="hljs-number">0</span><br>      c[x+y] = <span class="hljs-number">0</span><br>      d[x-y+n] = <span class="hljs-number">0</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>  n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br>  <span class="hljs-comment"># a, b, c, d四个数组分别用来存储行、列、上对角线和下对角线中的数据</span><br>  a, b, c, d = [<span class="hljs-number">0</span>] * <span class="hljs-number">50</span>, [<span class="hljs-number">0</span>] * <span class="hljs-number">50</span>, [<span class="hljs-number">0</span>] * <span class="hljs-number">50</span>, [<span class="hljs-number">0</span>] * <span class="hljs-number">50</span><br><br>  <span class="hljs-comment"># 记录解的总数</span><br>  dfs(<span class="hljs-number">1</span>)<br><br>  <span class="hljs-built_in">print</span>(count)<br></code></pre></td></tr></table></figure><p>Bingo！</p><div class="center"><style>.erflyjcnecxi{}</style><img src="/2025/04/09/note16/note16_pic01.png" class="erflyjcnecxi"></div><h2 id="P8673-蓝桥杯-2018-国-C-迷宫与陷阱"><a href="https://www.luogu.com.cn/problem/P8673">P8673 [蓝桥杯 2018 国 C] 迷宫与陷阱</a></h2><h3 id="题目描述-2">题目描述</h3><p>小明在玩一款迷宫游戏，在游戏中他要控制自己的角色离开一间由 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>×</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">N \times N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 个格子组成的二维迷宫。</p><p>小明的起始位置在左上角，他需要到达右下角的格子才能离开迷宫。</p><p>每一步，他可以移动到上下左右相邻的格子中（前提是目标格子可以经过）。</p><p>迷宫中有些格子小明可以经过，我们用 <code>.</code> 表示；</p><p>有些格子是墙壁，小明不能经过，我们用 <code>#</code> 表示。</p><p>此外，有些格子上有陷阱，我们用 <code>X</code> 表示。除非小明处于无敌状态，否则不能经过。</p><p>有些格子上有无敌道具，我们用 <code>%</code> 表示。</p><p>当小明第一次到达该格子时，自动获得无敌状态，无敌状态会持续 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> 步。</p><p>之后如果再次到达该格子不会获得无敌状态了。</p><p>处于无敌状态时，可以经过有陷阱的格子，但是不会拆除 / 毁坏陷阱，即陷阱仍会阻止没有无敌状态的角色经过。</p><p>给定迷宫，请你计算小明最少经过几步可以离开迷宫。</p><h3 id="输入格式-2">输入格式</h3><p>第一行包含两个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><mn>1000</mn><mtext>，</mtext><mn>1</mn><mo>≤</mo><mi>K</mi><mo>≤</mo><mn>10</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1 \le N \le 1000，1 \le K \le 10)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord">1000</span><span class="mord cjk_fallback">，</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">10</span><span class="mclose">)</span></span></span></span>。</p><p>以下 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 行包含一个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>×</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">N\times N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 的矩阵。</p><p>矩阵保证左上角和右下角是 <code>.</code>。</p><h3 id="输出格式-2">输出格式</h3><p>一个整数表示答案。如果小明不能离开迷宫，输出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>。</p><h3 id="输入输出样例-1-2">输入输出样例 #1</h3><h4 id="输入-1-2">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 3<br>...XX<br>##%#.<br>...#.<br>.###.<br>.....<br></code></pre></td></tr></table></figure><h4 id="输出-1-2">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">10<br></code></pre></td></tr></table></figure><h3 id="输入输出样例-2">输入输出样例 #2</h3><h4 id="输入-2">输入 #2</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 1<br>...XX<br>##%#.<br>...#.<br>.###.<br>.....<br></code></pre></td></tr></table></figure><h4 id="输出-2">输出 #2</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">12<br></code></pre></td></tr></table></figure><h3 id="说明-提示-2">说明/提示</h3><p>时限 3 秒, 256M。蓝桥杯 2018 年第九届国赛</p><h3 id="解决方案-2">解决方案</h3><p>这道题显然要求的是一个最优的最短路径，所以我们大胆采用BFS即可，只需要对其中的条件写一个约束即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>dirs = [(-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">bfs</span>(<span class="hljs-params">n, k, arr, vis</span>):<br>  <span class="hljs-comment"># bfs先创建一个队列</span><br>  queue = deque()<br>  queue.append((<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<br>  vis[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><br>  <span class="hljs-keyword">while</span> queue:<br>    x, y, step, magic = queue.popleft()<br><br>    <span class="hljs-comment"># 还是先写退出条件</span><br>    <span class="hljs-keyword">if</span> x == n-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y == n-<span class="hljs-number">1</span>:<br>      <span class="hljs-keyword">return</span> step<br><br>    <span class="hljs-comment"># 开始搜索</span><br>    <span class="hljs-keyword">for</span> dx, dy <span class="hljs-keyword">in</span> dirs:<br>      nx, ny = x+dx, y+dy<br><br>      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>(<span class="hljs-number">0</span> &lt;= nx &lt; n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= ny &lt; n):<br>        <span class="hljs-keyword">continue</span><br>      <span class="hljs-keyword">if</span> arr[nx][ny] == <span class="hljs-string">&#x27;#&#x27;</span>:<br>        <span class="hljs-keyword">continue</span><br>      <span class="hljs-keyword">if</span> arr[nx][ny] == <span class="hljs-string">&#x27;X&#x27;</span> <span class="hljs-keyword">and</span> magic == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">continue</span><br><br>      new_magic = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, magic-<span class="hljs-number">1</span>)<br>      <span class="hljs-keyword">if</span> arr[nx][ny] == <span class="hljs-string">&#x27;%&#x27;</span>:<br>        new_magic = k<br><br>      <span class="hljs-comment"># 剪枝，这里将没有当下情况好的情况全部剪掉</span><br>      <span class="hljs-comment"># 时间复杂度得以大幅降低</span><br>      <span class="hljs-keyword">if</span> vis[nx][ny] &lt; new_magic:<br>        vis[nx][ny] = new_magic<br>        queue.append((nx, ny, step+<span class="hljs-number">1</span>, new_magic))<br><br>  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>  n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-comment"># 使用sys.stdin.readline()来加快读取速度</span><br>  arr = [sys.stdin.readline().strip() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>  <span class="hljs-comment"># 使用vis数组来记录每个点剩余的无敌时间</span><br>  vis = [[-<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> __ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><br>  ans = bfs(n, k, arr, vis)<br>  <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.fvbkbbjmmnsx{}</style><img src="/2025/04/09/note16/note16_pic02.png" class="fvbkbbjmmnsx"></div>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>搜索</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>搜索</tag>
      
      <tag>DFS</tag>
      
      <tag>BFS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基础图论_Kruskal算法</title>
    <link href="/2025/04/08/note15/"/>
    <url>/2025/04/08/note15/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>基础图论_Kruskal算法</h1><h2 id="P1111-修复公路">P1111 修复公路</h2><h3 id="题目背景">题目背景</h3><p>A 地区在地震过后，连接所有村庄的公路都造成了损坏而无法通车。政府派人修复这些公路。</p><h3 id="题目描述">题目描述</h3><p>给出 A 地区的村庄数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>，和公路数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>，公路是双向的。并告诉你每条公路的连着哪两个村庄，并告诉你什么时候能修完这条公路。问最早什么时候任意两个村庄能够通车，即最早什么时候任意两条村庄都存在至少一条修复完成的道路（可以由多条公路连成一条道路）。</p><h3 id="输入格式">输入格式</h3><p>第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 行两个正整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo separator="true">,</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">N,M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>。</p><p>下面 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> 行，每行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 个正整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>t</mi></mrow><annotation encoding="application/x-tex">x,y,t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span></span></span></span>，告诉你这条公路连着 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x,y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 两个村庄，在时间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> 时能修复完成这条公路。</p><h3 id="输出格式">输出格式</h3><p>如果全部公路修复完毕仍然存在两个村庄无法通车，则输出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>，否则输出最早什么时候任意两个村庄能够通车。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">4 4<br>1 2 6<br>1 3 4<br>1 4 5<br>4 2 3<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">5<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>≤</mo><mi>N</mi><mo>≤</mo><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">1\leq x, y\leq N \le 10 ^ 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>M</mi><mo separator="true">,</mo><mi>t</mi><mo>≤</mo><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1\leq M, t \le 10 ^ 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>。</p><h3 id="解决方案">解决方案</h3><p>这道题目要求我们寻找一个关键路径，即将所有的村庄连接起来之后耗时最长的一条权边的值为多少。那么我们就可以使用<code>Kruskal</code>算法或者<code>Prim</code>算法在村庄之间生成一条最小生成树。<br><br>而<code>Kruskal</code>算法和<code>Prim</code>算法在最终的实现效果上并无太大区别，只是实现方式有所不同，而<code>Kruskal</code>算法中采用了我们已经熟悉的<code>并查集</code>算法，为了节约备赛时间，我们在这里先只研究<code>Kruskal</code>算法在上述题目场景中的实现。<br><br><code>Kruskal</code>算法的基本思想在图中不断寻找两点之间最小的权边，如果这两点尚未连接，就将该权边添加到最终结果之中，否则就跳过，知道生成一个最小生成树为止。那么如果不使用二维数组进行更新的话，<code>并查集</code>在这里就有很好的适用性，我们可以使用<code>union</code>函数将拥有最小权边的两点连接起来，并在随后使用<code>find</code>函数找到根节点，中间可以使用一个<code>time</code>数组来记录关键权值。<br><br>以下是Python中上述思路的具体实现。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dsu</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, size</span>):<br>        <span class="hljs-variable language_">self</span>.pa = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(size+<span class="hljs-number">1</span>))<br>        <span class="hljs-variable language_">self</span>.time = [<span class="hljs-number">0</span>] * (size+<span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.pa[x] != x:<br>            <span class="hljs-variable language_">self</span>.pa[x] = <span class="hljs-variable language_">self</span>.find(<span class="hljs-variable language_">self</span>.pa[x])<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.pa[x]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">union</span>(<span class="hljs-params">self, x, y</span>):<br>        xx, yy = <span class="hljs-variable language_">self</span>.find(x), <span class="hljs-variable language_">self</span>.find(y)<br>        <span class="hljs-keyword">if</span> xx == yy:<br>            <span class="hljs-keyword">return</span><br>        <span class="hljs-variable language_">self</span>.pa[yy] = xx<br>        <span class="hljs-variable language_">self</span>.time[xx] = <span class="hljs-built_in">max</span>(<span class="hljs-variable language_">self</span>.time[xx], <span class="hljs-variable language_">self</span>.time[yy])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    routes = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        x, y, t = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        routes.append((x, y, t))<br><br>    <span class="hljs-comment"># 使用匿名函数对原数据排序</span><br>    village = Dsu(n)<br>    routes.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">2</span>])<br><br>    <span class="hljs-comment"># 依次连接尚未在同一棵树上的两个新结点</span><br>    <span class="hljs-keyword">for</span> x, y, t <span class="hljs-keyword">in</span> routes:<br>        <span class="hljs-keyword">if</span> village.find(x) != village.find(y):<br>            village.time[x] = t <span class="hljs-keyword">if</span> village.time[x] == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-built_in">max</span>(village.time[x], t)<br>            village.time[y] = t <span class="hljs-keyword">if</span> village.time[y] == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-built_in">max</span>(village.time[y], t)<br>            village.union(x, y)<br><br>    <span class="hljs-comment"># 开始判断森林中是否只有一个根结点</span><br>    <span class="hljs-comment"># 如果不是，说明有村庄没有被联通</span><br>    fathers = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> village.pa[i] == i:<br>            fathers.append(village.time[i])<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(fathers) != <span class="hljs-number">1</span>:<br>        <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(fathers[<span class="hljs-number">0</span>])<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.fanxvshvkdpq{}</style><img src="/2025/04/08/note15/note15_pic01.png" class="fanxvshvkdpq"></div>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>图论</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>图论</tag>
      
      <tag>并查集</tag>
      
      <tag>最小生成树</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基础图论_Floyd算法的Python实现</title>
    <link href="/2025/04/08/note14/"/>
    <url>/2025/04/08/note14/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>基础图论_Floyd算法的Python实现</h1><p>Floyd算法和Dijkstra算法是图论中最经典的两种求最短路径的算法，但亦有所不同。前者主要聚焦与一个确定的起点与不同的终点之间的最短路径，而后者则可以求出任意两点间的最短路径。<br><br>下面我们就以两道蓝桥杯真题为例。</p><h2 id="蓝桥公园"><a href="https://www.lanqiao.cn/problems/1121/learning/?problem_list_id=30&amp;page=1">蓝桥公园</a></h2><h3 id="题目描述">题目描述</h3><p>小明喜欢观景，于是今天他来到了蓝桥公园。</p><p>已知公园有 N 个景点，景点和景点之间一共有 M 条道路。小明有 Q 个观景计划，每个计划包含一个起点 st 和一个终点 ed，表示他想从 st 去到 ed。但是小明的体力有限，对于每个计划他想走最少的路完成，你可以帮帮他吗？</p><h3 id="输入描述">输入描述</h3><p>输入第一行包含三个正整数 N,M,Q</p><p>第 2 到 M+1 行每行包含三个正整数 u,v,w，表示 u↔v 之间存在一条距离为 w 的路。</p><p>第 M+2 到 M+Q−1 行每行包含两个正整数 st,ed，其含义如题所述。</p><div class="center"><style>.gjjzmstcbbhr{}</style><img src="/2025/04/08/note14/note14_pic02.png" class="gjjzmstcbbhr"></div><h3 id="输出描述">输出描述</h3><p>输出共 Q 行，对应输入数据中的查询。</p><p>若无法从 st 到达 ed 则输出 −1。</p><h3 id="输入输出样例">输入输出样例</h3><h4 id="示例-1">示例 1</h4><blockquote><p>输入</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 3 3<br>1 2 1<br>1 3 5<br>2 3 2<br>1 2<br>1 3<br>2 3<br></code></pre></td></tr></table></figure><blockquote><p>输出</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">1<br>3<br>2<br></code></pre></td></tr></table></figure><h3 id="运行限制">运行限制</h3><ul><li>最大运行时间：3s</li><li>最大运行内存: 128M</li></ul><h3 id="解决方案">解决方案</h3><p>Floyd算法的特点在于通过一个中间节点<code>k</code>来更新两个其它节点<code>i</code>和<code>j</code>间的最短路径，如果我们用数组<code>arr</code>来存储路径信息的话，那么不难想出状态转移方程应该为<code>arr[i][j] = min(arr[i][j], arr[i][k] + arr[k][j])</code>。（这里就是一种动态规划的思想）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python">INF = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Floyd</span>(<span class="hljs-params">arr, n</span>):<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>                arr[i][j] = <span class="hljs-built_in">min</span>(arr[i][j], arr[i][k] + arr[k][j])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    n, m, q = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    arr = [[INF <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> __ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        arr[u][v] = arr[v][u] = <span class="hljs-built_in">min</span>(arr[u][v], w)<br><br>    Floyd(arr, n)<br><br><span class="hljs-comment">##    for i in range(n+1):</span><br><span class="hljs-comment">##        for j in range(n+1):</span><br><span class="hljs-comment">##            print(arr[i][j], end=&quot; &quot;)</span><br><span class="hljs-comment">##        print(&quot;\n&quot;)</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(q):<br>        st, ed = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        <span class="hljs-keyword">if</span> arr[st][ed] == INF:<br>            <span class="hljs-built_in">print</span>(-<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">elif</span> st == ed:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(arr[st][ed])<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.bavghaxmulfl{}</style><img src="/2025/04/08/note14/note14_pic03.png" class="bavghaxmulfl"></div>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>图论</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>图论</tag>
      
      <tag>最短路径</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>二分答案的应用</title>
    <link href="/2025/04/07/note13/"/>
    <url>/2025/04/07/note13/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>二分答案</h1><h2 id="P8647-蓝桥杯-2017-省-AB-分巧克力"><a href="https://www.luogu.com.cn/problem/P8647">P8647 [蓝桥杯 2017 省 AB] 分巧克力</a></h2><h3 id="题目描述">题目描述</h3><p>儿童节那天有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> 位小朋友到小明家做客。小明拿出了珍藏的巧克力招待小朋友们。</p><p>小明一共有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 块巧克力，其中第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 块是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>i</mi></msub><mo>×</mo><msub><mi>W</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">H_i \times W_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的方格组成的长方形。</p><p>为了公平起见，小明需要从这 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 块巧克力中切出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> 块巧克力分给小朋友们。切出的巧克力需要满足：</p><ol><li><p>形状是正方形，边长是整数。</p></li><li><p>大小相同。</p></li></ol><p>例如一块 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mo>×</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">6 \times 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span> 的巧克力可以切出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span> 块 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>×</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2 \times 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 的巧克力或者 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 块 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">3 \times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 的巧克力。</p><p>当然小朋友们都希望得到的巧克力尽可能大，你能帮小 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">H_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 计算出最大的边长是多少么？</p><h3 id="输入格式">输入格式</h3><p>第一行包含两个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>N</mi><mo separator="true">,</mo><mi>K</mi><mo>≤</mo><msup><mn>10</mn><mn>5</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1 \le N,K \le 10^5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。</p><p>以下 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 行每行包含两个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">H_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">W_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><msub><mi>H</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>W</mi><mi>i</mi></msub><mo>≤</mo><msup><mn>10</mn><mn>5</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1 \le H_i,W_i \le 10^5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。</p><p>输入保证每位小朋友至少能获得一块 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>×</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1 \times 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 的巧克力。</p><h3 id="输出格式">输出格式</h3><p>输出切出的正方形巧克力最大可能的边长。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 10  <br>6 5  <br>5 6<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p>蓝桥杯 2022 省赛 A 组 I 题。</p><h3 id="解决方案">解决方案</h3><p>首先我们来了解一下所谓的二分答案算法。<br><br>我的个人理解是，二分答案算法主要应用于在有多种答案满足题意时求答案的最值，即哪个答案最大或者哪个答案最小。以上述题目为例，从切出边长为1的小正方形到切出以所有<code>H</code>和<code>W</code>中的最大值<code>maxi</code>为边长的小正方形，答案的可能区间即为[1, maxi]。而我们就是要在这个区间内使用朴素二分搜索算法将我们要找到的最值求出，即为二分答案算法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 判断当下的值是否为答案之一</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">x</span>):<br>  count = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span> h, w <span class="hljs-keyword">in</span> chs:<br>    count1 = h // x<br>    count2 = w // x<br>    count += count1 * count2<br><br>  <span class="hljs-keyword">return</span> count &gt;= k<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>  n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>  chs = []<br>  maxi = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    h, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    maxi = <span class="hljs-built_in">max</span>(<span class="hljs-built_in">max</span>(h, w), maxi)<br>    chs.append((h, w))<br><br>  <span class="hljs-comment"># 二分</span><br>  ans, low, high = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, maxi<br>  <span class="hljs-keyword">while</span> low &lt;= high:<br>    mid = <span class="hljs-built_in">int</span>((low + high) / <span class="hljs-number">2</span>)<br><br>    <span class="hljs-keyword">if</span> check(mid):<br>      ans = <span class="hljs-built_in">max</span>(ans, mid)<br>      low = mid + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>      high = mid - <span class="hljs-number">1</span><br><br>  <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.zpudrnffoxsf{}</style><img src="/2025/04/07/note13/note13_pic01.png" class="zpudrnffoxsf"></div><h2 id="P1024-NOIP-2001-提高组-一元三次方程求解"><a href="https://www.luogu.com.cn/problem/P1024">P1024 [NOIP 2001 提高组] 一元三次方程求解</a></h2><h3 id="题目描述-2">题目描述</h3><p>有形如：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><mi>b</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>c</mi><mi>x</mi><mo>+</mo><mi>d</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a x^3 + b x^2 + c x + d = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>  这样的一个一元三次方程。给出该方程中各项的系数（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi><mo separator="true">,</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">a,b,c,d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span></span></span></span> 均为实数），并约定该方程存在三个不同实根（根的范围在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">-100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">100</span></span></span></span> 至 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn></mrow><annotation encoding="application/x-tex">100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span> 之间），且根与根之差的绝对值 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≥</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\ge 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>。要求由小到大依次在同一行输出这三个实根(根与根之间留有空格)，并精确到小数点后 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 位。</p><p>提示：记方程 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f(x) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，若存在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 个数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_1 &lt; x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>×</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f(x_1) \times f(x_2) &lt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，则在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_1, x_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 之间一定有一个根。</p><h3 id="输入格式-2">输入格式</h3><p>一行，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> 个实数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi><mo separator="true">,</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">a, b, c, d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span></span></span></span>。</p><h3 id="输出格式-2">输出格式</h3><p>一行，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 个实根，从小到大输出，并精确到小数点后 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 位。</p><h3 id="输入输出样例-1-2">输入输出样例 #1</h3><h4 id="输入-1-2">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">1 -5 -4 20<br></code></pre></td></tr></table></figure><h4 id="输出-1-2">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">-2.00 2.00 5.00<br></code></pre></td></tr></table></figure><h3 id="说明-提示-2">说明/提示</h3><p><strong>【题目来源】</strong></p><p>NOIP 2001 提高组第一题</p><h3 id="解决方案-2">解决方案</h3><p>显然此题需要从-100到100之间枚举，但是题目中给出的<code>根与根之差的绝对值≥1</code>说明在一个长度为1的区间内不可能有两个根，因此我们可以将一个长度为1的区间作为我们的最小枚举单位，在此单位内进行二分查找。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cal</span>(<span class="hljs-params">x</span>):<br>  <span class="hljs-keyword">return</span> a * x ** <span class="hljs-number">3</span> + b * x ** <span class="hljs-number">2</span> + c * x + d<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>  a, b, c, d = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">float</span>, <span class="hljs-built_in">input</span>().split())<br><br>  count = <span class="hljs-number">0</span><br>  anss = []<br>  <span class="hljs-comment"># 在可能的取值范围内枚举</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">100</span>, <span class="hljs-number">101</span>):<br>    <span class="hljs-comment"># 最小枚举单位的长度为1</span><br>    low, high = i, i+<span class="hljs-number">1</span><br>    res1, res2 = cal(low), cal(high)<br><br>    <span class="hljs-keyword">if</span> res1 == <span class="hljs-number">0</span>:<br>      anss.append(low)<br>      count += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">if</span> res1 * res2 &lt; <span class="hljs-number">0</span>:<br>      <span class="hljs-comment"># 二分查找时，若值类型为浮点数，最好不要将边界条件设置为0</span><br>      <span class="hljs-comment"># 否则容易超时</span><br>      <span class="hljs-keyword">while</span> high - low &gt;= <span class="hljs-number">0.001</span>:<br>        mid = (high + low) / <span class="hljs-number">2</span><br><br>      <span class="hljs-comment"># 说明前半段中有根，右边界应该内收</span><br>        <span class="hljs-keyword">if</span> cal(mid) * res1 &lt;= <span class="hljs-number">0</span>:<br>          high = mid<br>        <span class="hljs-keyword">else</span>:<br>          low = mid<br>      <span class="hljs-comment"># 最后右端点一定就是根</span><br>      anss.append(high)<br>      count += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">if</span> count == <span class="hljs-number">3</span>:<br>      <span class="hljs-keyword">break</span><br><br>  <span class="hljs-keyword">for</span> ans <span class="hljs-keyword">in</span> anss:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:.2f&#125;&quot;</span>.<span class="hljs-built_in">format</span>(ans), end=<span class="hljs-string">&quot; &quot;</span>)<br></code></pre></td></tr></table></figure><p>Bingo！</p><div class="center"><style>.bmaghcmaqrcj{}</style><img src="/2025/04/07/note13/note13_pic02.png" class="bmaghcmaqrcj"></div>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>二分</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>二分答案</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>并查集的应用</title>
    <link href="/2025/04/07/note12/"/>
    <url>/2025/04/07/note12/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>并查集的应用</h1><h2 id="P1551-亲戚">P1551 亲戚</h2><h3 id="题目背景">题目背景</h3><p>若某个家族人员过于庞大，要判断两个是否是亲戚，确实还很不容易，现在给出某个亲戚关系图，求任意给出的两个人是否具有亲戚关系。</p><h3 id="题目描述">题目描述</h3><p>规定：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 是亲戚，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span> 是亲戚，那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span> 也是亲戚。如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 是亲戚，那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 的亲戚都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 的亲戚，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 的亲戚也都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 的亲戚。</p><h3 id="输入格式">输入格式</h3><p>第一行：三个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo separator="true">,</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">n,m,p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span></span></span></span>，（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo separator="true">,</mo><mi>p</mi><mo>≤</mo><mn>5000</mn></mrow><annotation encoding="application/x-tex">n,m,p \le 5000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5000</span></span></span></span>），分别表示有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个人，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 个亲戚关系，询问 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> 对亲戚关系。</p><p>以下 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 行：每行两个数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">M_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">M_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><msub><mi>M</mi><mi>i</mi></msub><mo separator="true">,</mo><mtext> </mtext><msub><mi>M</mi><mi>j</mi></msub><mo>≤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1 \le M_i,~M_j\le n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace nobreak"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，表示 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">M_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">M_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 具有亲戚关系。</p><p>接下来 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> 行：每行两个数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">P_i,P_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>，询问 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">P_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 是否具有亲戚关系。</p><h3 id="输出格式">输出格式</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> 行，每行一个 <code>Yes</code> 或 <code>No</code>。表示第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 个询问的答案为“具有”或“不具有”亲戚关系。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs txt">6 5 3<br>1 2<br>1 5<br>3 4<br>5 2<br>1 3<br>1 4<br>2 3<br>5 6<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">Yes<br>Yes<br>No<br></code></pre></td></tr></table></figure><h3 id="解决方案">解决方案</h3><p>对于森林的管理与查询，<a href="https://oi-wiki.org/ds/dsu/#__tabbed_3_2">并查集</a>是一种很高效的数据结构。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dsu</span>:<br>    <span class="hljs-comment"># 初始化</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, size</span>):<br>        <span class="hljs-variable language_">self</span>.pa = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(size+<span class="hljs-number">1</span>))<br><br>    <span class="hljs-comment"># 查询_路径压缩</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.pa[x] != x:<br>            <span class="hljs-variable language_">self</span>.pa[x] = <span class="hljs-variable language_">self</span>.find(<span class="hljs-variable language_">self</span>.pa[x])<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.pa[x]<br><br>    <span class="hljs-comment"># 合并</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">union</span>(<span class="hljs-params">self, x, y</span>):<br>        <span class="hljs-variable language_">self</span>.pa[<span class="hljs-variable language_">self</span>.find(x)] = <span class="hljs-variable language_">self</span>.find(y)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    n, m, p = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    relatives = Dsu(n)<br><br>    <span class="hljs-comment"># 有亲戚关系，进行合并操作</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        x, y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        relatives.union(x, y)<br><br>    <span class="hljs-comment"># 已经结束合并，进行查询操作</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(p):<br>        x, y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        <span class="hljs-keyword">if</span> relatives.find(x) == relatives.find(y):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Yes&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;No&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.hpajshrubezd{}</style><img src="/2025/04/07/note12/note12_pic01.png" class="hpajshrubezd"></div><p>下面来看蓝桥杯真题，这是带权并查集的一种应用：</p><h2 id="P11005-蓝桥杯-2024-省-Python-B-缴纳过路费">P11005 [蓝桥杯 2024 省 Python B] 缴纳过路费</h2><h3 id="题目描述-2">题目描述</h3><p>在繁华的商业王国中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 座城市被 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> 条商路巧妙地连接在一起，形成了一个错综复杂的无向图网络。每条商路是双向通行的，并且任意两座城市之间最多只有一条直接的商路。每条商路都有它的规则，其中最引人注目的就是穿过<br>商路，需要缴纳过路费。因此，商人们在选择商路时必须格外认真。</p><p>有一位名叫小蓝的商人，他对于商路的花费有着自己独到的见解。在小蓝眼中，一条路线包含一条或多条商路，但路线的成本并不是沿途累积的过路费总和，而是这条路线上最贵的那一次收费。这个标准简单而直接，让他能迅速评估出一条路线是否划算。</p><p>于是，他设立了一个目标，即找出所有城市对，这些城市之间的最低路线成本介于他心中预设的两个数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> 之间。他相信，这样的路线既不会太廉价，以至于路况糟糕；也不会过于昂贵，伤害他精打细算的荷包。</p><p>作为小蓝的助手，请你帮助小蓝统计出所有满足条件的城市对数量。</p><h3 id="输入格式-2">输入格式</h3><p>输入的第一行包含四个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo separator="true">,</mo><mi>M</mi><mo separator="true">,</mo><mi>L</mi><mo separator="true">,</mo><mi>R</mi></mrow><annotation encoding="application/x-tex">N, M, L, R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>，表示有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 座城市和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> 条双向通行的商路，以及小蓝心中预设的最高过路费的下限 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 和上限 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>。</p><p>接下来 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> 行，每行包含三个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo separator="true">,</mo><mi>w</mi></mrow><annotation encoding="application/x-tex">u, v,w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>，表示城市 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> 和城市 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> 之间有一条双向通行的商路，过路费为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>。保证每对城市之间最多只有一条直接的商路。</p><h3 id="输出格式-2">输出格式</h3><p>输出一行包含一个整数，表示满足条件的城市对数量。</p><h3 id="输入输出样例-1-2">输入输出样例 #1</h3><h4 id="输入-1-2">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 5 1 2<br>1 2 2<br>1 3 5<br>1 4 1<br>2 4 5<br>2 5 4<br></code></pre></td></tr></table></figure><h4 id="输出-1-2">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p>对于 30% 的评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msup><mn>10</mn><mn>3</mn></msup><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><mi>M</mi><mo>≤</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo>×</mo><msup><mn>10</mn><mn>3</mn></msup><mo separator="true">,</mo><mfrac><mrow><mi>N</mi><mo>×</mo><mo stretchy="false">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mo stretchy="false">)</mo><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><mi>L</mi><mo>≤</mo><mi>R</mi><mo>≤</mo><msup><mn>10</mn><mn>5</mn></msup><mtext>，</mtext><mn>1</mn><mo>≤</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo>≤</mo><mi>N</mi><mo separator="true">,</mo><mi>u</mi><mo mathvariant="normal">≠</mo><mi>v</mi><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><mi>w</mi><mo>≤</mo><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1 \le N \le 10^3,1 \le M \le \min(2 \times 10^3,\frac{N×(N−1)}{2}),1 \le L \le R \le 10^5，1 \le u, v \le N, u \ne v,1 \le w \le 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">×</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>。</p><p>对于所有评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msup><mn>10</mn><mn>5</mn></msup><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><mi>M</mi><mo>≤</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo>×</mo><msup><mn>10</mn><mn>5</mn></msup><mo separator="true">,</mo><mfrac><mrow><mi>N</mi><mo>×</mo><mo stretchy="false">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac><mo stretchy="false">)</mo><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><mi>L</mi><mo>≤</mo><mi>R</mi><mo>≤</mo><msup><mn>10</mn><mn>9</mn></msup><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo>≤</mo><mi>N</mi><mo separator="true">,</mo><mi>u</mi><mo mathvariant="normal">≠</mo><mi>v</mi><mtext>，</mtext><mn>1</mn><mo>≤</mo><mi>w</mi><mo>≤</mo><msup><mn>10</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">1 \le N \le 10^5,1 \le M \le \min(2 \times 10^5,\frac{N×(N−1)}{2}),1 \le L \leR \le 10^9,1 \le u, v \le N, u \ne v，1 \le w \le 10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">×</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord cjk_fallback">，</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>。</p><h5 id="样例解释">样例解释</h5><p>在样例中，满足条件的城市对有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>2</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1, 2),(1, 4),(2, 4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mclose">)</span></span></span></span>。</p><h3 id="解决方案-2">解决方案</h3><p>在这道题目当中我们可以将输入情况分为三种：</p><ul><li>小于左边界值的</li><li>介于要求区间的</li><li>大于右边界值的<br>不难发现，对于第三种情况我们是应当舍弃的，因为一旦途径这条边，一定没有符合要求的路径。<br><br>其次是前两种情况，其中第二种情况是真正起作用的，是使得路径合法的，因此这种输入下，只要联通，城市之间都可以两两互相配对。但是对于第一种情况而言，直接相连的城市并不合法，需要删除。<br></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dsu</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, size</span>):<br>        <span class="hljs-variable language_">self</span>.pa = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(size+<span class="hljs-number">1</span>))<br>        <span class="hljs-variable language_">self</span>.size = [<span class="hljs-number">1</span>] * (size+<span class="hljs-number">1</span>)<br>        <span class="hljs-comment"># 这里使用size数组来记录每个父节点下连接叶子节点的个数</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.pa[x] != x:<br>            <span class="hljs-variable language_">self</span>.pa[x] = <span class="hljs-variable language_">self</span>.find(<span class="hljs-variable language_">self</span>.pa[x])<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.pa[x]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">union</span>(<span class="hljs-params">self, x, y</span>):<br>        xx, yy = <span class="hljs-variable language_">self</span>.find(x), <span class="hljs-variable language_">self</span>.find(y)<br>        <span class="hljs-keyword">if</span> xx == yy:<br>            <span class="hljs-keyword">return</span><br>        <span class="hljs-variable language_">self</span>.pa[yy] = xx<br>        <span class="hljs-variable language_">self</span>.size[xx] += <span class="hljs-variable language_">self</span>.size[yy]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">c</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x * (x-<span class="hljs-number">1</span>) // <span class="hljs-number">2</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    n, m, l, r = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>    cities_1 = Dsu(n)<br>    cities_2 = Dsu(n)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>        u, v, w = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        <span class="hljs-keyword">if</span> w &lt;= r: cities_1.union(u, v)<br>        <span class="hljs-keyword">if</span> w &lt; l: cities_2.union(u, v)<br><br>    ans = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># 判断是不是父节点</span><br>        <span class="hljs-keyword">if</span> cities_1.find(i) == i:<br>            ans += c(cities_1.size[i])<br>        <span class="hljs-keyword">if</span> cities_2.find(i) == i:<br>            ans -= c(cities_2.size[i])<br><br>    <span class="hljs-built_in">print</span>(ans)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.bvnswepgshdf{}</style><img src="/2025/04/07/note12/note12_pic02.png" class="bvnswepgshdf"></div>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>并查集</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>并查集</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>前缀和与差分的应用</title>
    <link href="/2025/04/03/note11/"/>
    <url>/2025/04/03/note11/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>前缀和与差分的应用</h1><h2 id="前缀和：P10904-蓝桥杯-2024-省-C-挖矿">前缀和：P10904 [蓝桥杯 2024 省 C] 挖矿</h2><h3 id="题目描述">题目描述</h3><p>小蓝正在数轴上挖矿，数轴上一共有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个矿洞，第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 个矿洞的坐标为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。小蓝从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 出发，每次可以向左或向右移动 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 的距离，当路过一个矿洞时，就会进行挖矿作业，获得 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 单位矿石，但一个矿洞不能被多次挖掘。小蓝想知道在移动距离不超过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 的前提下，最多能获得多少单位矿石？</p><h3 id="输入格式">输入格式</h3><p>输入的第一行包含两个正整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n,m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span></span></span></span>，用一个空格分隔。</p><p>第二行包含 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">a_1, a_2,\cdots, a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，相邻整数之间使用一个空格分隔。</p><h3 id="输出格式">输出格式</h3><p>输出一行包含一个整数表示答案。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 4<br>0 -3 -1 1 2<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">4<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p><strong>【样例说明】</strong></p><p>路径：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>→</mo><mo>−</mo><mn>1</mn><mo>→</mo><mn>0</mn><mo>→</mo><mn>1</mn><mo>→</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">0\to -1\to 0\to 1\to 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>，可以对 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{0,-1,1,2\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">}</span></span></span></span> 四个矿洞挖掘并获得最多 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> 块矿石。</p><p><strong>【评测用例规模与约定】</strong></p><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">20\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">20%</span></span></span></span> 的评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">1 \le n \le 10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>；<br>对于所有评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1 \le n \le 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><msup><mn>10</mn><mn>6</mn></msup><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo>≤</mo><msup><mn>10</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">-10^6 \le a_i \le 10^6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>m</mi><mo>≤</mo><mn>2</mn><mo>×</mo><msup><mn>10</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">1 \le m \le 2 \times 10^6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span>。</p><h3 id="解决方案">解决方案</h3><p>在这道题的情景下，我们显然需要先判断哪个方向上的矿石数目多，哪个方向上的矿石数目多就往哪个方向上挖。同时再用一个变量或者数组来记录剩余的步数，每挖一个矿就检查剩余的步数，来确保能得到一个最优解。<br><br>而如果要判断哪个方向上剩余的矿石数目多，我们就可以使用<a href="https://oi-wiki.org/basic/prefix-sum/">前缀和</a>的方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>  n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>  holes = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><br>  N = <span class="hljs-number">2000005</span><br>  ls = [<span class="hljs-number">0</span>] * N<br>  rs = [<span class="hljs-number">0</span>] * N<br>  zeros = <span class="hljs-number">0</span><br><br>  <span class="hljs-keyword">for</span> hole <span class="hljs-keyword">in</span> holes:<br>    <span class="hljs-keyword">if</span> hole &lt; <span class="hljs-number">0</span>:<br>      ls[-hole] += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">elif</span> hole == <span class="hljs-number">0</span>:<br>      zeros += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>      rs[hole] += <span class="hljs-number">1</span><br><br>  <span class="hljs-comment"># 计算前缀和</span><br>  <span class="hljs-comment"># 这里i最大为m是朝一个方向最多只能走m步</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>    ls[i] += ls[i-<span class="hljs-number">1</span>]<br>    rs[i] += rs[i-<span class="hljs-number">1</span>]<br><br>  <span class="hljs-comment"># 有了前缀和之后开始枚举</span><br>  ans = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>):<br>      <span class="hljs-comment"># 先枚举左边：</span><br>      count = ls[i]<br>      <span class="hljs-comment"># 判断是否还能掉头挖矿：</span><br>      <span class="hljs-keyword">if</span> m - <span class="hljs-number">2</span> * i &gt; <span class="hljs-number">0</span>:<br>        count += rs[m-<span class="hljs-number">2</span>*i]<br>      <br>      ans = <span class="hljs-built_in">max</span>(count, ans)<br><br>      <span class="hljs-comment"># 再枚举右边</span><br>      count = rs[i]<br>      <span class="hljs-keyword">if</span> m - <span class="hljs-number">2</span> * i &gt; <span class="hljs-number">0</span>:<br>        count += ls[m-<span class="hljs-number">2</span>*i]<br>      <br>      ans = <span class="hljs-built_in">max</span>(count, ans)<br><br>  ans += zeros<br><br>  <span class="hljs-built_in">print</span>(ans)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>  main()<br></code></pre></td></tr></table></figure><p>Bingo!</p><div class="center"><style>.irluegpnkajr{}</style><img src="/2025/04/03/note11/note11_pic01.png" class="irluegpnkajr"></div><h2 id="差分：P10903-蓝桥杯-2024-省-C-商品库存管理">差分：P10903 [蓝桥杯 2024 省 C] 商品库存管理</h2><h3 id="题目描述-2">题目描述</h3><p>在库存管理系统中，跟踪和调节商品库存量是关键任务之一。小蓝经营的仓库中存有多种商品，这些商品根据类别和规格被有序地分类并编号，编号范围从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 至 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>。初始时，每种商品的库存量均为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。</p><p>为了高效地监控和调整库存量，小蓝的管理团队设计了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 个操作，每个操作涉及到一个特定的商品区间，即一段连续的商品编号范围（例如区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>L</mi><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[L, R]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">]</span></span></span></span>）。执行这些操作时，区间内每种商品的库存量都将增加 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>。然而，在某些情况下，管理团队可能会决定不执行某些操作，使得这些操作涉及的商品区间内的库存量不会发生改变，维持原有的状态。</p><p>现在，管理团队需要一个评估机制，来确定如果某个操作未被执行，那么最终会有多少种商品的库存量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。对此，请你为管理团队计算出，对于每个操作，如果不执行该操作而执行其它操作，库存量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 的商品的种类数。</p><h3 id="输入格式-2">输入格式</h3><p>输入的第一行包含两个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span>，分别表示商品的种类数和操作的个数。</p><p>接下来的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 行，每行包含两个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>，表示一个操作涉及的商品区间。</p><h3 id="输出格式-2">输出格式</h3><p>输出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 行，每行一个整数，第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 行的整数表示如果不执行第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 个操作，则最终库存量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 的商品种类数。</p><h3 id="输入输出样例-1-2">输入输出样例 #1</h3><h4 id="输入-1-2">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">5 3<br>1 2<br>2 4<br>3 5<br></code></pre></td></tr></table></figure><h4 id="输出-1-2">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">1<br>0<br>1<br></code></pre></td></tr></table></figure><h3 id="说明-提示-2">说明/提示</h3><p><strong>【样例说明】</strong></p><p>考虑不执行每个操作时，其余操作对商品库存的综合影响：</p><ul><li><p><strong>不执行操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></strong>：剩余的操作是操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>（影响区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[2, 4]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mclose">]</span></span></span></span>）和操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>（影响区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[3, 5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mclose">]</span></span></span></span>）。执行这两个操作后，商品库存序列变为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 1, 2, 2, 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>。在这种情况下，只有编号为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 的商品的库存量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。因此，库存量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 的商品种类数为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>。</p></li><li><p><strong>不执行操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></strong>：剩余的操作是操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>（影响区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, 2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span>）和操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>（影响区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[3, 5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mclose">]</span></span></span></span>）。执行这两个操作后，商品库存序列变为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, 1, 1, 1, 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>。在这种情况下，所有商品的库存量都不为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。因此，库存量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 的商品种类数为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。</p></li><li><p><strong>不执行操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></strong>：剩余的操作是操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>（影响区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, 2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span>）和操作 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>（影响区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[2, 4]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mclose">]</span></span></span></span>）。执行这两个操作后，商品库存序列变为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, 2, 1, 1, 0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose">]</span></span></span></span>。在这种情况下，只有编号为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span> 的商品的库存量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。因此，库存量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 的商品种类数为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>。</p></li></ul><p><strong>【评测用例规模与约定】</strong></p><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">20\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">20%</span></span></span></span> 的评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo>≤</mo><mn>5</mn><mo>×</mo><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">1 \le n,m \le 5 \times 10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>L</mi><mo>≤</mo><mi>R</mi><mo>≤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1\le L \le R \le n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>。<br>对于所有评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo>≤</mo><mn>3</mn><mo>×</mo><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1 \le n,m \le 3 \times 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>L</mi><mo>≤</mo><mi>R</mi><mo>≤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1 \le L \le R \le n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>。</p><h3 id="解决方案-2">解决方案</h3><p>这道题涉及了区间的计算，而在需要频繁进行区间更新的场景中，<a href="https://oi-wiki.org/basic/prefix-sum/">差分</a>数组可以提供高效的解决方案。<br><br>关于差分在区间计算中的特殊性可以由下边这个简单的示例来说明：</p><div class="center"><style>.oxgnislqhepm{}</style><img src="/2025/04/03/note11/note11_pic02.png" class="oxgnislqhepm"></div><p>不难发现，若对原数组区间[l,r]整体加上一个k，则对于其差分数组<code>b</code>来说，就是<code>b[l] += 1</code>，<code>b[r+1] -= 1</code>。随后再对该差分数组进行前缀和运算即可得到原数组。<br><br>那么我们也就得到了对于此题的解决方案：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>  lrs = []<br>  n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    l, r = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    lrs.append((l, r))<br><br>  <span class="hljs-comment"># 枚举每一种区间不进行操作的情况</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    lrs_copy = lrs[:i]+lrs[i+<span class="hljs-number">1</span>:]<br><br>    goods = [<span class="hljs-number">0</span>] * (n + <span class="hljs-number">5</span>)<br><br>    <span class="hljs-comment"># 得到差分数组</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>      goods[i] -= goods[i-<span class="hljs-number">1</span>]<br>    <span class="hljs-comment"># 对边界值进行加减</span><br>    <span class="hljs-keyword">for</span> l, r <span class="hljs-keyword">in</span> lrs_copy:<br>      goods[l-<span class="hljs-number">1</span>] += <span class="hljs-number">1</span><br>      goods[r] -= <span class="hljs-number">1</span><br>    <span class="hljs-comment"># 进行前缀和以得到原数组</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>      goods[j] += goods[j-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-comment">#输出最终库存量为0的商品种类数</span><br>    <span class="hljs-built_in">print</span>(goods[:n].count(<span class="hljs-number">0</span>))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>  main()<br></code></pre></td></tr></table></figure><p>需要注意的是，这段代码的时间复杂度较高，但这里我们仅用于掌握差分的思想，不再对其进行优化。</p>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>前缀和及差分</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>前缀和</tag>
      
      <tag>差分</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>洛谷P8612的多方法实现（dfs和记忆化搜索）</title>
    <link href="/2025/04/02/note10/"/>
    <url>/2025/04/02/note10/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>洛谷P8612的多方法实现</h1><h2 id="题目描述">题目描述</h2><p>X 国王有一个地宫宝库。是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n \times m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 个格子的矩阵。每个格子放一件宝贝。每个宝贝贴着价值标签。</p><p>地宫的入口在左上角，出口在右下角。</p><p>小明被带到地宫的入口，国王要求他只能向右或向下行走。</p><p>走过某个格子时，如果那个格子中的宝贝价值比小明手中任意宝贝价值都大，小明就可以拿起它（当然，也可以不拿）。</p><p>当小明走到出口时，如果他手中的宝贝恰好是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 件，则这些宝贝就可以送给小明。</p><p>请你帮小明算一算，在给定的局面下，他有多少种不同的行动方案能获得这 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 件宝贝。</p><h2 id="输入格式">输入格式</h2><p>输入一行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 个整数，用空格分开：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo>≤</mo><mn>50</mn><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mn>12</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k(1 \le n,m \le 50,1 \le k \le 12)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">50</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">12</span><span class="mclose">)</span></span></span></span>。</p><p>接下来有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 行数据，每行有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mn>0</mn><mo>≤</mo><msub><mi>C</mi><mi>i</mi></msub><mo>≤</mo><mn>12</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C_i(0 \le C_i \le 12)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">12</span><span class="mclose">)</span></span></span></span> 代表这个格子上的宝物的价值。</p><h2 id="输出格式">输出格式</h2><p>要求输出一个整数，表示正好取 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 个宝贝的行动方案数。该数字可能很大，输出它对 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1000000007</mn><mo stretchy="false">(</mo><msup><mn>10</mn><mn>9</mn></msup><mo>+</mo><mn>7</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">1000000007(10^9+7)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord">1000000007</span><span class="mopen">(</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">7</span><span class="mclose">)</span></span></span></span> 取模的结果。</p><h2 id="输入输出样例-1">输入输出样例 #1</h2><h3 id="输入-1">输入 #1</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 2 2<br>1 2<br>2 1<br></code></pre></td></tr></table></figure><h3 id="输出-1">输出 #1</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br></code></pre></td></tr></table></figure><h2 id="输入输出样例-2">输入输出样例 #2</h2><h3 id="输入-2">输入 #2</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 3 2<br>1 2 3<br>2 1 5<br></code></pre></td></tr></table></figure><h3 id="输出-2">输出 #2</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">14<br></code></pre></td></tr></table></figure><h2 id="说明-提示">说明/提示</h2><p>时限 1 秒, 256M。蓝桥杯 2014 年第五届省赛</p><h2 id="解决方案">解决方案</h2><h3 id="DFS">DFS</h3><p>在看到这道题目的时候我们可以很自然地想到使用搜索的方法，那么DFS的写法如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br>sys.setrecursionlimit(<span class="hljs-number">1000000</span>)<br><br>dirs = [(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)]<br>ans = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x, y, count, maxi</span>): <br>  <span class="hljs-comment"># 用count来记录已经捡起来的宝物数</span><br>  <span class="hljs-comment"># 用maxi来记录已经捡起来的宝物中最高的价值</span><br>  <span class="hljs-keyword">global</span> ans<br><br>  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (<span class="hljs-number">0</span> &lt;= x &lt; n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= y &lt; m):<br>    <span class="hljs-keyword">return</span> <br>  <span class="hljs-keyword">if</span> x == n-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y == m-<span class="hljs-number">1</span>:<br>    <span class="hljs-comment"># 有两种情况可以满足走到出口时小明正好有k件宝贝</span><br>    <span class="hljs-comment"># 一种是在这之前已经拿到了k件宝贝</span><br>    <span class="hljs-comment"># 另一种是恰好在出口处捡到了第k件宝贝</span><br>    <span class="hljs-keyword">if</span> count == k <span class="hljs-keyword">or</span> (count == k-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> arr[x][y] &gt; maxi):<br>      ans += <span class="hljs-number">1</span><br>      <span class="hljs-keyword">return</span> <br><br>  <span class="hljs-comment"># 开始搜索，一共有四种情况：向下拿，向右拿，向下不拿，向右不拿</span><br>  <span class="hljs-keyword">for</span> dx, dy <span class="hljs-keyword">in</span> dirs:<br>    nx, ny = x + dx, y + dy<br>    <span class="hljs-comment"># 不拿</span><br>    dfs(nx, ny, count, maxi)<br>    <span class="hljs-comment"># 拿</span><br>    <span class="hljs-keyword">if</span> arr[x][y] &gt; maxi:<br>      dfs(nx, ny, count+<span class="hljs-number">1</span>, arr[x][y])<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>  n, m, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>  <br>  arr = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    ls = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>      arr[i][j] = ls[j]<br><br>  dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>)<br>  <span class="hljs-built_in">print</span>(ans % <span class="hljs-number">1000000007</span>)<br></code></pre></td></tr></table></figure><p>但是这种写法只能拿到42分，说明这种写法的时间复杂度还是比较高的，那么接下来我们尝试记忆化搜索的写法。</p><div class="center"><style>.lmajptryujgo{}</style><img src="/2025/04/02/note10/note10_pic01.png" class="lmajptryujgo"></div><h3 id="记忆化搜索">记忆化搜索</h3><p>所谓记忆化搜索就是将先前的搜索结果记录到一个数组当中，如果后续再次遇到相同的情景直接读取之前记录的结果即可，这将大大简化搜索过程，在这道题的情境下记忆化搜索的写法如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python">dirs = [(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)]<br><span class="hljs-comment"># Python中用_来表示不被关心的变量，在这里用其长短变化可以较为直观地显示出层级变化</span><br>mem = [[[[-<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">15</span>)] <span class="hljs-keyword">for</span> __ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">15</span>)] <span class="hljs-keyword">for</span> ___ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">55</span>)] <span class="hljs-keyword">for</span> ____ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">55</span>)]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs_memory</span>(<span class="hljs-params">x, y, count, maxi</span>):<br>  ans = <span class="hljs-number">0</span><br><br>  <span class="hljs-comment"># 说明已经被记录过</span><br>  <span class="hljs-keyword">if</span> mem[x][y][count][maxi] != -<span class="hljs-number">1</span>:<br>    <span class="hljs-keyword">return</span> mem[x][y][count][maxi]<br><br>  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (<span class="hljs-number">0</span> &lt;= x &lt; n <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= y &lt; m):<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>  <span class="hljs-keyword">if</span> x == n-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y == m-<span class="hljs-number">1</span>:<br>    <span class="hljs-keyword">if</span> count == k <span class="hljs-keyword">or</span> (count == k-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> arr[x][y] &gt; maxi):<br>      ans += <span class="hljs-number">1</span><br><br>  <span class="hljs-comment"># 开始搜索</span><br>  <span class="hljs-keyword">for</span> dx, dy <span class="hljs-keyword">in</span> dirs:<br>    nx, ny = x + dx, y + dy<br>    ans += dfs_memory(nx, ny, count, maxi)<br>    <span class="hljs-keyword">if</span> arr[x][y] &gt; maxi:<br>      ans += dfs_memory(nx, ny, count+<span class="hljs-number">1</span>, arr[x][y])<br><br>  mem[x][y][count][maxi] = ans % <span class="hljs-number">1000000007</span><br>  <span class="hljs-keyword">return</span> mem[x][y][count][maxi]<br><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>  n, m, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br><br>  arr = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    ls = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>      arr[i][j] = ls[j]<br><br>  ans = dfs_memory(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>)<br>  <span class="hljs-built_in">print</span>(ans % <span class="hljs-number">1000000007</span>)<br></code></pre></td></tr></table></figure><p>Bingo！并且可以发现运行时间大幅减少：</p><div class="center"><style>.qvpdybzpxios{}</style><img src="/2025/04/02/note10/note10_pic02.png" class="qvpdybzpxios"></div><h3 id="动态规划">动态规划</h3>]]></content>
    
    
    <categories>
      
      <category>算法相关</category>
      
      <category>搜索</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dfs</tag>
      
      <tag>洛谷</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>记忆化搜索</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>学习笔记_25_03_14</title>
    <link href="/2025/03/14/note07/"/>
    <url>/2025/03/14/note07/</url>
    
    <content type="html"><![CDATA[<h1>学习笔记_25_03_14</h1><h2 id="Reference">Reference</h2><ul><li><a href="https://www.luogu.com.cn/article/9l7bstz8">题解 P3913 【车的攻击】</a></li></ul><h2 id="P3913-车的攻击"><a href="https://www.luogu.com.cn/problem/P3913">P3913 车的攻击</a></h2><h3 id="题目描述">题目描述</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>×</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">N \times N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 的国际象棋棋盘上有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> 个车，第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>个车位于第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>行，第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 列。求至少被一个车攻击的格子数量。</p><p>车可以攻击所有同一行或者同一列的地方。</p><h3 id="输入格式">输入格式</h3><p>第1 行，2 个整数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo separator="true">,</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">N,K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span>。</p><p>接下来K 行，每行2 个整数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i,C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</p><h3 id="输出格式">输出格式</h3><p>1 个整数，表示被攻击的格子数量。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">3 2<br>1 2<br>2 2<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">7<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p>• 对于30% 的数据，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msup><mn>10</mn><mn>3</mn></msup><mo separator="true">;</mo><mn>1</mn><mo>≤</mo><mi>K</mi><mo>≤</mo><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">1 \le N \le 10^3; 1 \le K \le 10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>；</p><p>• 对于60% 的数据，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msup><mn>10</mn><mn>6</mn></msup><mo separator="true">;</mo><mn>1</mn><mo>≤</mo><mi>K</mi><mo>≤</mo><msup><mn>10</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">1 \le N \le 10^6; 1 \le K \le 10^6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span>；</p><p>• 对于100% 的数据，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msup><mn>10</mn><mn>9</mn></msup><mo separator="true">;</mo><mn>1</mn><mo>≤</mo><mi>K</mi><mo>≤</mo><msup><mn>10</mn><mn>6</mn></msup><mo separator="true">;</mo><mn>1</mn><mo>≤</mo><msub><mi>R</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>C</mi><mi>i</mi></msub><mo>≤</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">1 \le N \le 10^9; 1 \le K \le 10^6; 1 \le R_i , C_i \le N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>。</p><h3 id="解决方案">解决方案</h3><p>笔者的第一版代码是在硬抗庞大的数据规模的情况下头铁按照模拟棋盘的思路写出的，因此喜提10分…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    n, k = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    cars = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>        x, y = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>        cars.append((x, y))<br><br>    <span class="hljs-comment"># 创建棋盘</span><br>    Map = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br><br>    <span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> cars:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            Map[x][i] += <span class="hljs-number">1</span><br>            Map[i][y] += <span class="hljs-number">1</span><br><br>    count = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">if</span> Map[i][j] != <span class="hljs-number">0</span>:<br>                count += <span class="hljs-number">1</span><br><br>    <span class="hljs-built_in">print</span>(count)<br></code></pre></td></tr></table></figure><p>因此显然这道题需要换一种角度思考，不妨就按Reference中题解给出的思路去理解。即使在不向一个方向平移<code>车</code>的情况下，我们依旧能够想象出其盲区的小格子的大致样子。与其尝试移动<code>车</code>，不如尝试将所有的零碎小格子拼成一块矩形，其面积与棋盘面积的差就是我们所要的答案。<br><br>两个相同的<code>x</code>值或<code>y</code>值显然只能对同一列造成影响，那么我们只需要统计一共有多少种不同的<code>x</code>值和<code>y</code>值即可。<br><br>那么最后要求的答案即为<code>n * n - (n - count_x) * (n - count_y)</code>。<br></p><p>c++题解如下所示（Python版本似乎由于语言的限制还是会爆TLE）：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> K = <span class="hljs-number">1000010</span>;<br><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> xs[K], ys[K];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> n, k;<br>    cin &gt;&gt; n &gt;&gt; k;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; k; i++)<br>    &#123;<br>        cin &gt;&gt; xs[i] &gt;&gt; ys[i];<br>    &#125;<br><br>    <span class="hljs-comment">// 开始计算坐标中不重复的点的个数</span><br>    <span class="hljs-built_in">sort</span>(xs, xs + k);<br>    <span class="hljs-built_in">sort</span>(ys, ys + k);<br><br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> count_x = <span class="hljs-number">0</span>, count_y = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; k; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (xs[i] != xs[i<span class="hljs-number">+1</span>])<br>        &#123;<br>            count_x++;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (ys[i] != ys[i<span class="hljs-number">+1</span>])<br>        &#123;<br>            count_y++;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> count = n * n - (n - count_x) * (n - count_y);<br>    cout &lt;&lt; count;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>数学问题</tag>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>学习笔记_25_03_17</title>
    <link href="/2025/03/14/note08/"/>
    <url>/2025/03/14/note08/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>学习笔记_25_03_17</h1><h2 id="P11003-蓝桥杯-2024-省-Python-B-蓝桥村的真相"><a href="https://www.luogu.com.cn/problem/P11003">P11003 [蓝桥杯 2024 省 Python B] 蓝桥村的真相</a></h2><h3 id="题目描述">题目描述</h3><p>在风景如画的蓝桥村，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 名村民围坐在一张古老的圆桌旁，参与一场思想<br>的较量。这些村民，每一位都有着鲜明的身份：要么是誉满乡野的诚实者，要么是无可救药的说谎者。</p><p>当会议的钟声敲响，一场关于真理与谬误的辩论随之展开。每位村民轮流发言，编号为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 的村民提出了这样的断言：坐在他之后的两位村民——也就是<br>编号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">i + 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>（注意，编号是环形的，所以如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 是最后一个，则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 是<br>第一个，以此类推）之中，一个说的是真话，而另一个说的是假话。</p><p>在所有摇曳不定的陈述中，有多少真言隐藏在谎言的面纱之后？</p><p>请你探索每一种可能的真假排列组合，并计算在所有可能的真假组合中，<br>说谎者的总数。</p><h3 id="输入格式">输入格式</h3><p>输入的第一行包含一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>，表示每次输入包含 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 组数据。</p><p>接下来依次描述 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 组数据。</p><p>每个数据一行包含一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，表示村落的人数。</p><h3 id="输出格式">输出格式</h3><p>输出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 行，每行包含一个整数，依次表示每组数据的答案。</p><h3 id="输入输出样例-1">输入输出样例 #1</h3><h4 id="输入-1">输入 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs txt">2<br>3<br>3<br></code></pre></td></tr></table></figure><h4 id="输出-1">输出 #1</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">6<br>6<br></code></pre></td></tr></table></figure><h3 id="说明-提示">说明/提示</h3><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">10\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">10%</span></span></span></span> 的评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><mn>1</mn><mtext>，</mtext><mn>3</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">T = 1，3 \le n \le 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mord cjk_fallback">，</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span>。</p><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>40</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">40\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">40%</span></span></span></span> 的评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>T</mi><mo>≤</mo><msup><mn>10</mn><mn>2</mn></msup><mtext>，</mtext><mn>3</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>3</mn><mo>×</mo><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">1 \le T \le 10^2，3 \le n \le 3 \times10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>。</p><p>对于所有评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>T</mi><mo>≤</mo><msup><mn>10</mn><mn>5</mn></msup><mtext>，</mtext><mn>3</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><msup><mn>10</mn><mn>18</mn></msup></mrow><annotation encoding="application/x-tex">1 \le T \le 10^5，3 \le n \le 10^{18}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9501em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">18</span></span></span></span></span></span></span></span></span></span></span></span>。</p><h3 id="样例解释">样例解释</h3><p>在样例中，可能的组合有「假，假，假」「真，真，假」「真，假，真」「假，<br>真，真」，说谎者的总数为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">3 + 1 + 1 + 1 = 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span>。</p><h3 id="解决方案">解决方案</h3><p>和<a href="https://www.luogu.com.cn/problem/P10900">P10900 [蓝桥杯 2024 省 C] 数字诗意</a>类似，这也是一道数据规模巨大无比的题，达到10的18次方。根据笔者截至目前的经验，这种数据规模的题目在蓝桥杯中考察的并不是对时间复杂度的优化，而是暗示这道题目中一定隐藏着某种十分简单的数学规律，足以使得做题家们秒杀。<br><br>以此题为例：</p><div class="center"><style>.kaqpvqcwvetg{}</style><img src="/2025/03/14/note08/note08_pic01.png" class="kaqpvqcwvetg"></div><p>不难发现，除了第三种情况之外，其它三种情况均为以一个含有两个1一个0的最小单位进行循环的。即。有三种情况每三位中都有一个说谎话的村民，<code>count = n / 3</code>，而另一种下所有人都在说谎, <code>count = n</code>。<br><br>故在题目要求考虑所有情况的情况下，总数为<code>(n / 3) * 3 + n = 2n</code>。<br><br>此外，如果串的长度不为3的倍数的时候，例如为<code>1011</code>的时候，按照题目首尾相连的要求，不难发现这个串是不合法的，其它情况同样如此，因此当n不为3的倍数的时候，所有人都是说谎者。<br><br>因此，解决代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">t = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t):<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    <span class="hljs-keyword">if</span> n%<span class="hljs-number">3</span> == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(n * <span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(n)<br></code></pre></td></tr></table></figure><h2 id="P11002-蓝桥杯-2024-省-Python-B-神奇闹钟"><a href="https://www.luogu.com.cn/problem/P11002">P11002 [蓝桥杯 2024 省 Python B] 神奇闹钟</a></h2><h3 id="题目描述-2">题目描述</h3><p>小蓝发现了一个神奇的闹钟，从纪元时间（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1970</mn></mrow><annotation encoding="application/x-tex">1970</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1970</span></span></span></span> 年 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 月 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 日 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>00</mn><mo>:</mo><mn>00</mn><mo>:</mo><mn>00</mn></mrow><annotation encoding="application/x-tex">00:00:00</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">00</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">00</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">00</span></span></span></span>）开始，每经过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 分钟，这个闹钟便会触发一次闹铃（纪元时间也会响铃）。这引起了小蓝的兴趣，他想要好好研究下这个闹钟。</p><p>对于给出的任意一个格式为 <code>yyyy-MM-dd HH:mm:ss</code> 的时间，小蓝想要知道在这个时间点之前（包含这个时间点）的最近的一次闹铃时间是哪个时间？</p><p>注意，你不必考虑时区问题。</p><h3 id="输入格式-2">输入格式</h3><p>输入的第一行包含一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>，表示每次输入包含 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 组数据。</p><p>接下来依次描述 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 组数据。</p><p>每组数据一行，包含一个时间（格式为 <code>yyyy-MM-dd HH:mm:ss</code>）和一<br>个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 表示闹铃时间间隔（单位为分钟）。</p><h3 id="输出格式-2">输出格式</h3><p>输出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 行，每行包含一个时间（格式为 <code>yyyy-MM-dd HH:mm:ss</code>），依<br>次表示每组数据的答案。</p><h3 id="输入输出样例-1-2">输入输出样例 #1</h3><h4 id="输入-1-2">输入 #1</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2</span><br><span class="hljs-attribute">2016</span>-<span class="hljs-number">09</span>-<span class="hljs-number">07</span> <span class="hljs-number">18</span>:<span class="hljs-number">24</span>:<span class="hljs-number">33</span> <span class="hljs-number">10</span><br><span class="hljs-attribute">2037</span>-<span class="hljs-number">01</span>-<span class="hljs-number">05</span> <span class="hljs-number">01</span>:<span class="hljs-number">40</span>:<span class="hljs-number">43</span> <span class="hljs-number">30</span><br></code></pre></td></tr></table></figure><h4 id="输出-1-2">输出 #1</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2016</span>-<span class="hljs-number">09</span>-<span class="hljs-number">07</span> <span class="hljs-number">18</span>:<span class="hljs-number">20</span>:<span class="hljs-number">00</span><br><span class="hljs-attribute">2037</span>-<span class="hljs-number">01</span>-<span class="hljs-number">05</span> <span class="hljs-number">01</span>:<span class="hljs-number">30</span>:<span class="hljs-number">00</span><br></code></pre></td></tr></table></figure><h3 id="说明-提示-2">说明/提示</h3><p>对于所有评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>T</mi><mo>≤</mo><mn>10</mn><mtext>，</mtext><mn>1</mn><mo>≤</mo><mi>x</mi><mo>≤</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">1 \le T \le 10，1 \le x \le 1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord">10</span><span class="mord cjk_fallback">，</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1000</span></span></span></span>，保证所有的时间格式都是合法的。</p><h3 id="解决方案-2">解决方案</h3><p>收录这个题主要是想要记录一下Python中datetime库的使用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    t = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t):<br>        date, time, x = <span class="hljs-built_in">input</span>().split()<br>        year, month, day = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, date.split(<span class="hljs-string">&#x27;-&#x27;</span>))<br>        hour, minute, second = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, time.split(<span class="hljs-string">&#x27;:&#x27;</span>))<br><br>        <span class="hljs-comment"># 使用datetime创建日期，其中年月日三个变量是必填的，时分秒如果不填则默认为0</span><br>        date_begin = datetime(<span class="hljs-number">1970</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br>        date_now = datetime(year, month, day, hour, minute, second)<br><br>        <span class="hljs-comment"># 要善用取模，进而得到已经经过的周期数</span><br>        counts = <span class="hljs-built_in">int</span>((date_now - date_begin).total_seconds()) // <span class="hljs-number">60</span> // <span class="hljs-built_in">int</span>(x)<br><br>        <span class="hljs-comment"># 使用timedelta进行日期之间的运算</span><br>        ans = date_begin + timedelta(minutes=<span class="hljs-built_in">int</span>(x)*counts)<br>        <span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><h2 id="P10901-蓝桥杯-2024-省-C-封闭图形个数"><a href="https://www.luogu.com.cn/problem/P10901">P10901 [蓝桥杯 2024 省 C] 封闭图形个数</a></h2><h3 id="题目描述-3">题目描述</h3><p>在蓝桥王国，数字的大小不仅仅取决于它们的数值大小，还取决于它们所形成的“封闭图形”的个数。</p><p>封闭图形是指数字中完全封闭的空间，例如数字<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span> 都没有形成封闭图形，而数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span></span></span></span> 分别形成了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 个封闭图形，数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span> 则形成了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 个封闭图形。值得注意的是，封闭图形的个数是可以累加的。例如，对于数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>68</mn></mrow><annotation encoding="application/x-tex">68</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">68</span></span></span></span>，由于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span> 形成了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 个封闭图形，而 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span> 形成了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 个，所以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>68</mn></mrow><annotation encoding="application/x-tex">68</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">68</span></span></span></span> 形成的封闭图形的个数总共为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>。</p><p>在比较两个数的大小时，如果它们的封闭图形个数不同，那么封闭图形个数较多的数更大。例如，数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>41</mn></mrow><annotation encoding="application/x-tex">41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">41</span></span></span></span> 和数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>18</mn></mrow><annotation encoding="application/x-tex">18</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">18</span></span></span></span>，它们对应的封闭图形的个数分别为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>，因此数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>41</mn></mrow><annotation encoding="application/x-tex">41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">41</span></span></span></span> 小于数组 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>18</mn></mrow><annotation encoding="application/x-tex">18</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">18</span></span></span></span>。如果两个数的封闭图形个数相同，那么数值较大的数更大。例如，数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>14</mn></mrow><annotation encoding="application/x-tex">14</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">14</span></span></span></span> 和数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>41</mn></mrow><annotation encoding="application/x-tex">41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">41</span></span></span></span>，它们的封闭图形的个数都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，但 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>14</mn><mo>&lt;</mo><mn>41</mn></mrow><annotation encoding="application/x-tex">14 &lt; 41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">14</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">41</span></span></span></span>，所以数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>14</mn></mrow><annotation encoding="application/x-tex">14</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">14</span></span></span></span> 小于数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>41</mn></mrow><annotation encoding="application/x-tex">41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">41</span></span></span></span>。如果两个数字的封闭图形个数和数值都相同，那么这两个数字被认为是相等的。</p><p>小蓝对蓝桥王国的数字大小规则十分感兴趣。现在，他将给定你 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">a_1, a_2,\cdots, a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，请你按照蓝桥王国的数字大小规则，将这 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 数从小到大排序，并输出排序后结果。</p><h3 id="输入格式-3">输入格式</h3><p>输入的第一行包含一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，表示给定的数字个数。</p><p>第二行包含 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">a_1, a_2,\cdots, a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，相邻整数之间使用一个空格分隔，表示待排序的数字。</p><h3 id="输出格式-3">输出格式</h3><p>输出一行包含 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个整数，相邻整数之间使用一个空格分隔，表示按照蓝桥王国的数字大小规则从小到大排序后的结果。</p><h3 id="输入输出样例-1-3">输入输出样例 #1</h3><h4 id="输入-1-3">输入 #1</h4><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">3</span><br><span class="hljs-symbol">18 </span><span class="hljs-number">29</span> <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><h4 id="输出-1-3">输出 #1</h4><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">6 </span><span class="hljs-number">29</span> <span class="hljs-number">18</span><br></code></pre></td></tr></table></figure><h3 id="说明-提示-3">说明/提示</h3><p><strong>【样例说明】</strong></p><p>对于给定的数字序列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>18</mn><mo separator="true">,</mo><mn>29</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[18, 29, 6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">18</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">29</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">]</span></span></span></span>，数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>18</mn></mrow><annotation encoding="application/x-tex">18</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">18</span></span></span></span> 的封闭图形个数为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>，数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>29</mn></mrow><annotation encoding="application/x-tex">29</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">29</span></span></span></span> 的封闭图形个数为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span> 的封闭图形个数为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>。按照封闭图形个数从小到大排序后，得到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>29</mn><mo separator="true">,</mo><mn>6</mn><mo separator="true">,</mo><mn>18</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[29, 6, 18]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">29</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">18</span><span class="mclose">]</span></span></span></span>。</p><p>由于数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>29</mn></mrow><annotation encoding="application/x-tex">29</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">29</span></span></span></span> 和数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">6</span></span></span></span> 的封闭图形个数相同，因此需要进一步按照数值大小对它们进行排序，最终得到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>6</mn><mo separator="true">,</mo><mn>29</mn><mo separator="true">,</mo><mn>18</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[6, 29, 18]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">29</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">18</span><span class="mclose">]</span></span></span></span>。</p><p><strong>【评测用例规模与约定】</strong></p><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">50\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">50%</span></span></span></span> 的评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>2</mn><mo>×</mo><msup><mn>10</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">1\le n \le 2 \times 10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo>≤</mo><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1 \le a_i \le 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>。<br>对于所有评测用例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>2</mn><mo>×</mo><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1 \le n\le 2 \times 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo>≤</mo><msup><mn>10</mn><mn>9</mn></msup></mrow><annotation encoding="application/x-tex">1 \le a_i \le 10^9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span></span></span></span>。</p><h3 id="解决方案-3">解决方案</h3><p>这道题的思路挺明确的，可以使用一个字典来存储一个数字本身的值和其对应的封闭图形个数，然后分别作为第一关键字和第二关键字进行排序输出即可。<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    length = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><br>    count_1 = [<span class="hljs-string">&quot;0&quot;</span>, <span class="hljs-string">&quot;4&quot;</span>, <span class="hljs-string">&quot;6&quot;</span>, <span class="hljs-string">&quot;9&quot;</span>]<br>    count_2 = [<span class="hljs-string">&quot;8&quot;</span>]<br><br>    <span class="hljs-comment"># 尝试用字典写这道题</span><br>    nums_dic = <span class="hljs-built_in">dict</span>()<br>    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>        count = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(num):<br>            <span class="hljs-keyword">if</span> n <span class="hljs-keyword">in</span> count_1:<br>                count += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> n <span class="hljs-keyword">in</span> count_2:<br>                count += <span class="hljs-number">2</span><br>            nums_dic[num] = count<br><br>    <span class="hljs-built_in">print</span>(nums_dic)<br><br>    nums_order = <span class="hljs-built_in">sorted</span>(nums_dic.items(), key=<span class="hljs-keyword">lambda</span> x:(x[<span class="hljs-number">1</span>], x[<span class="hljs-number">0</span>]), reverse=<span class="hljs-literal">False</span>)<br>    <span class="hljs-comment"># 这里边主要想记录的就是在sorted()函数中使用lambda匿名函数。</span><br>    <span class="hljs-comment"># 首先nums_dic.items()返回的是字典中的键值对集合(以样例输入为例)：</span><br>    <span class="hljs-comment"># [(18, 2), (29, 1), (6, 1)]</span><br>    <span class="hljs-comment"># 而sorted()函数会遍历这其中的每一个元组</span><br>    <span class="hljs-comment"># 对于每一个元组，sorted()函数会将其作为参数传递给key参数</span><br>    <span class="hljs-comment"># 而key参数又指定了匿名函数lambda x: (x[1], x[0])</span><br>    <span class="hljs-comment"># 因此sorted()函数就会根据元组中具体的某一个值作为key进行排序</span><br>    <span class="hljs-comment"># 此外，sorted()函数支持多关键字排序，使得上述写法可以实现多关键字排序</span><br>    <span class="hljs-built_in">print</span>(nums_order)<br><br>    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums_order:<br>        <span class="hljs-built_in">print</span>(num[<span class="hljs-number">0</span>], end=<span class="hljs-string">&#x27; &#x27;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>但是结果是这道题爆红了，主播喜提0分…</p><div class="center"><style>.fjpyfcepqmlj{}</style><img src="/2025/03/14/note08/note08_pic02.png" class="fjpyfcepqmlj"></div>由于没有参考数据可以检查，使用deepseek得出的结论是：<blockquote><p>1.字典去重问题：字典的键是数字本身，当输入中存在重复数字时，后续相同数字的计算会覆盖之前的记录。例如，输入 18 18 会被存储为 {18: 2}，导致输出时只保留一个 18。<br> 2.排序结果缺失元素：最终输出基于字典的键（去重后的数字），而非原始输入的所有元素，导致输出数量与输入不一致。</p></blockquote><p>因此解决方案就应该是动态地进行排序，使每一个输入都有一个对应的输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    length = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split()))<br><br>    <span class="hljs-comment"># 定义每个字符对应的封闭图形个数</span><br>    holes = &#123;<span class="hljs-string">&#x27;0&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;4&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;6&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;9&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;8&#x27;</span>: <span class="hljs-number">2</span>&#125;<br><br>    <span class="hljs-comment"># 直接排序原列表，动态计算封闭数作为排序依据</span><br>    nums.sort(key=<span class="hljs-keyword">lambda</span> x: (<span class="hljs-built_in">sum</span>(holes.get(i, <span class="hljs-number">0</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(x)), x))<br>    <span class="hljs-comment"># 这里也是在lambda函数中定义了两个关键字</span><br>    <span class="hljs-comment"># 第一关键字是x中的封闭图形个数之和，第二关键字是x本身</span><br>    <span class="hljs-comment"># 突然觉得Python里的一行流也是浪漫之至啊</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27; &#x27;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, nums)))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>最后成功AC！</p>]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>数学问题</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>python - 匿名函数
- 日期库</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>学习笔记_25_03_18</title>
    <link href="/2025/03/14/note09/"/>
    <url>/2025/03/14/note09/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>学习笔记_25_03_18</h1><h2 id="P11000-蓝桥杯-2024-省-Python-B-数字串个数"><a href="https://www.luogu.com.cn/problem/P11000">P11000 [蓝桥杯 2024 省 Python B] 数字串个数</a></h2><h3 id="题目描述">题目描述</h3><p>小蓝想要构造出一个长度为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10000</mn></mrow><annotation encoding="application/x-tex">10000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10000</span></span></span></span> 的数字字符串，有以下要求：</p><ol><li><p>小蓝不喜欢数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，所以数字字符串中不可以出现 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>；</p></li><li><p>小蓝喜欢数字 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span>，所以数字字符串中必须要有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span> 这两个数字。</p></li></ol><p>请问满足题意的数字字符串有多少个？这个数字会很大，你只需要输出其<br>对 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>9</mn></msup><mo>+</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">10^9 + 7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span></span></span></span> 取余后的结果。</p><h3 id="输入格式">输入格式</h3><p>无</p><h3 id="输出格式">输出格式</h3><p>一行一个整数表示答案。</p><h3 id="解决方案">解决方案</h3><p>这道题本质上还是一个数学问题，在排除<code>0</code>之后，一共有1-9九个数字，因此一个长度为10000的字符串目前一共有<code>9^10000</code>种组合可能。<br><br>如果这九个数字中没有<code>3</code>，九个数字变为八个数字，则一共有<code>8^10000</code>种组合可能。<br><br>同理，如果没有<code>7</code>，一共有<code>8^10000</code>种组合可能；如果既没有<code>3</code>又没有<code>7</code>，则一共有<code>7^10000</code>种组合可能<br><br>那就不难得出一个类似于下图的韦恩图：</p><div class="center"><style>.pggqxnxsmgfr{}</style><img src="/2025/03/14/note09/note09_pic01.png" class="pggqxnxsmgfr"></div><p>根据容斥原理不难得出我们所要求的结果数为<code>9^10000 - 8^10000 - 8^10000 + 7^10000</code>。则题解代码为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>((<span class="hljs-number">9</span>**<span class="hljs-number">10000</span> - <span class="hljs-number">8</span>**<span class="hljs-number">10000</span>*<span class="hljs-number">2</span> + <span class="hljs-number">7</span>**<span class="hljs-number">10000</span>) // (<span class="hljs-number">10</span> ** <span class="hljs-number">9</span> + <span class="hljs-number">7</span>))<br></code></pre></td></tr></table></figure><p>但是这条语句突破了Python中的最大整数限制并因此报错，所以这里还想强调一下<code>pow()</code>函数的使用，可以避免类似的情况：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">mod = <span class="hljs-number">10</span>**<span class="hljs-number">9</span> + <span class="hljs-number">7</span><br><span class="hljs-built_in">print</span>((<span class="hljs-built_in">pow</span>(<span class="hljs-number">9</span>, <span class="hljs-number">10000</span>, mod) - <span class="hljs-number">2</span> * <span class="hljs-built_in">pow</span>(<span class="hljs-number">8</span>, <span class="hljs-number">10000</span>, mod) + <span class="hljs-built_in">pow</span>(<span class="hljs-number">7</span>, <span class="hljs-number">10000</span>, mod)) % mod)<br><span class="hljs-comment"># pow()函数的第三个参数即为前两个参数的计算结果将要取模的模数</span><br></code></pre></td></tr></table></figure><h2 id="P10999-蓝桥杯-2024-省-Python-B-穿越时空之门"><a href="https://www.luogu.com.cn/problem/P10999">P10999 [蓝桥杯 2024 省 Python B] 穿越时空之门</a></h2><h3 id="题目描述-2">题目描述</h3><p>随着 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2024</mn></mrow><annotation encoding="application/x-tex">2024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2024</span></span></span></span> 年的钟声回荡，传说中的时空之门再次敞开。这扇门是一条神秘<br>的通道，它连接着二进制和四进制两个不同的数码领域，等待着勇者们的探索。<br>在二进制的领域里，勇者的力量被转换成了力量数值的二进制表示中各数<br>位之和。</p><p>在四进制的领域里，力量的转换规则相似，变成了力量数值的四进制表示中各数位之和。</p><p>穿越这扇时空之门的条件是严苛的：当且仅当勇者在二进制领域的力量等同于四进制领域的力量时，他才能够成功地穿越。</p><p>国王选定了小蓝作为领路人，带领着力量值从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2024</mn></mrow><annotation encoding="application/x-tex">2024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2024</span></span></span></span> 的勇者们踏上了这段探索未知的旅程。作为小蓝的助手，你的任务是帮助小蓝计算出，在这 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2024</mn></mrow><annotation encoding="application/x-tex">2024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2024</span></span></span></span> 位勇者中，有多少人符合穿越时空之门的条件。</p><h3 id="输入格式-2">输入格式</h3><p>无</p><h3 id="输出格式-2">输出格式</h3><p>一行一个整数表示答案。</p><h3 id="解决方案-2">解决方案</h3><p>这道题的思路很简单，主要想记录的点在于如何进行任意进制间的转换。由于Python默认只提供了二、八、十和十六一共四种进制之间的转换函数，因此掌握辗转相除法的代码实现还是非常有比较的，特此记录。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_to_base</span>(<span class="hljs-params">num, base</span>):<br>    <span class="hljs-keyword">if</span> num == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;0&quot;</span><br>    digits = []<br>    <span class="hljs-keyword">while</span> num:<br>        digits.append(<span class="hljs-built_in">int</span>(num%base))<br>        num //= base<br>    digits = digits[::-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>.join(<span class="hljs-built_in">str</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> digits)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    count = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2025</span>):<br>        i_bin = <span class="hljs-built_in">bin</span>(i)[<span class="hljs-number">2</span>:]<br>        i_four = convert_to_base(i, <span class="hljs-number">4</span>)<br><br>        sum_bin = <span class="hljs-number">0</span><br>        sum_four = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> i_bin:<br>            sum_bin += <span class="hljs-built_in">int</span>(m)<br>        <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> i_four:<br>            sum_four += <span class="hljs-built_in">int</span>(n)<br><br>        <span class="hljs-keyword">if</span> sum_bin == sum_four:<br>            count += <span class="hljs-number">1</span><br><br>    <span class="hljs-built_in">print</span>(count)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>洛谷</tag>
      
      <tag>数学问题</tag>
      
      <tag>蓝桥杯</tag>
      
      <tag>任意进制转换</tag>
      
      <tag>python - pow函数</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机三级网络技术相关知识点整理</title>
    <link href="/2025/03/13/note06/"/>
    <url>/2025/03/13/note06/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>计算机三级网络技术相关知识点整理</h1><h2 id="Reference">Reference</h2><ul><li><a href="https://www.bilibili.com/video/BV1F5411a76A?spm_id_from=333.788.videopod.episodes&amp;vd_source=d2a4fcb87f01b1e635c2de07e4f9fb34">(Bilibili)[合集] 这些技巧助你一周通过计算机三级网络技术（无基础）</a></li><li><a href="https://info.support.huawei.com/info-finder/encyclopedia/zh/BGP.html">什么是BGP</a></li><li><a href="https://blog.csdn.net/HinsCoder/article/details/130864989">【网络协议详解】——BGP协议（学习笔记）</a></li><li><a href="https://blog.csdn.net/keith6785753/article/details/107088632">BGP协议总结（比较详细，好理解）</a></li><li><a href="https://blog.csdn.net/keith6785753/article/details/107031390">路由协议之OSPF总结（比较详细，好理解）</a></li><li><a href="https://blog.csdn.net/weixin_43941364/article/details/105509724">路由选择协议 RIP、OSPF、BGP 详解</a></li><li><a href="https://blog.csdn.net/weixin_44827418/article/details/106545050">RIP协议及距离向量算法（详解）</a></li><li><a href="https://blog.csdn.net/weixin_44867889/article/details/144196993">网络安全技术详解：防火墙与入侵检测和防御系统（IDS/IPS）</a></li><li><a href="https://blog.csdn.net/spsglz/article/details/79114018">弹性分组环RPR</a></li><li><a href="https://blog.csdn.net/m0_73995538/article/details/133427700">集线器与交换机有什么区别？一文带你了解</a></li><li><a href="https://www.cnblogs.com/wjoyxt/p/7477095.html">运维常说的 5个9、4个9、3个9 的可靠性，到底是什么？？？</a></li><li><a href="https://blog.csdn.net/weixin_47221969/article/details/122450590">【计算机三级】网路技术学习笔记 第六章 交换机及其配置</a></li><li><a href="https://blog.csdn.net/gui951753/article/details/79593307">NAT(地址转换技术)详解</a></li><li><a href="https://blog.csdn.net/qq_21125183/article/details/86487747">计算机网络：NAT基本原理</a></li><li><a href="https://blog.csdn.net/qq_62683583/article/details/127897940">NAT地址转换（超详细解说版）</a></li><li><a href="https://zh.wikipedia.org/wiki/IEEE_802.11">IEEE 802.11</a></li><li><a href="https://blog.csdn.net/qq_45789531/article/details/144632524">什么是IEEE 802.11——无线局域网标准？</a></li><li><a href="https://zhuanlan.zhihu.com/p/17391337608">常用网络协议整理笔记(四) —DHCP协议</a></li><li><a href="https://blog.csdn.net/LongL_GuYu/article/details/139484094">TCSEC介绍</a></li><li><a href="https://zhuanlan.zhihu.com/p/371546653">网络中的QOS技术</a></li><li><a href="https://blog.csdn.net/m0_73166659/article/details/127099735">网络综合布线七大子系统详解（图解）</a></li><li><a href="https://blog.csdn.net/ZGHS_ZG/article/details/122826063">计算机三级网络技术最全知识点总结【8】</a></li><li><a href="https://blog.csdn.net/baidu_37964071/article/details/80514340">ICMP协议详解</a></li><li><a href="https://blog.csdn.net/m0_65551023/article/details/140049770">FTP 文件传输协议：概念、工作原理；上传下载操作步骤</a></li><li><a href="https://zhuanlan.zhihu.com/p/608487379">计算机三级网络技术（八）</a></li><li><a href="https://zhuanlan.zhihu.com/p/608212281">计算机三级网络技术（七）</a></li><li><a href="https://zhuanlan.zhihu.com/p/338846618">这是我见过对DNS最通俗易懂的解释了</a></li><li><a href="https://blog.csdn.net/qq_44955314/article/details/119384213">网络管理常用命令之Pathping 命令使用详解(图文)</a></li><li><a href="https://zhuanlan.zhihu.com/p/360854854">计算机三级网络技术复习知识点总结</a></li><li><a href="https://blog.csdn.net/bigbangbangbang1/article/details/138268209">网络层次架构：核心层、汇聚层、接入层，解密网络的脉络！</a></li><li><a href="https://blog.csdn.net/weixin_48594741/article/details/114752076">三级网络技术–宽带接入技术–XDSL</a></li><li><a href="https://www.cnblogs.com/Chuck-Yue/p/10395644.html">计算机网络七：中继器、集线器、交换机、路由器、网桥和网关</a></li><li><a href="https://blog.csdn.net/qq_61649579/article/details/129126632">路由表的更新算法（解题思路）</a></li><li><a href="https://blog.csdn.net/2301_78053665/article/details/142180689">最新24年计算机三级网络技术速过指南之校园网部署的解题方法与思路，包拿分教程</a></li><li><a href="https://blog.csdn.net/qq_41948771/article/details/88911307">计算机三级网络技术大题详解，教你快速拿到60分</a></li><li><a href="https://blog.csdn.net/weixin_64949771/article/details/123512453">计算机三级网络技术-----DHCP报文分析</a></li><li><a href="https://blog.csdn.net/Mr_wish/article/details/105540264">【考前冲刺】计算机三级网络技术之综合题-sniffer抓包分析</a></li><li><a href="https://blog.csdn.net/2301_78053665/article/details/142055712">最新计算机等级考试三级网络技术应用题——20分全部收入囊中攻略！</a></li><li><a href="https://blog.csdn.net/Tanecious/article/details/145720895">计算机三级网络技术知识汇总【2】</a></li><li><a href="https://blog.csdn.net/Tanecious/article/details/146161785">计算机三级网络技术知识点汇总【8】</a></li><li><a href="https://blog.csdn.net/Tanecious/article/details/146441320">计算机三级网络技术知识汇总【11】</a></li><li><a href="https://baike.baidu.com/item/HiperLAN/10470958">hiperlan</a></li></ul><p>注：本文的架构参考CSDN博主@Tanecious.的相关文章进行整理</p><h2 id="选择题">选择题</h2><h3 id="一、路由选择协议">一、路由选择协议</h3><p>首先我们需要了解路由选择域的概念，其是指一组使用相同路由协议或策略进行路由决策的网络设备集合，我们通常将其称之为一个自治系统AS(Autonomous System)，可以简要地理解为就是几个路由器组成了一个小团体。<br><br>而不论是小团体内部还是不同的小团体之间都显然需要有一种规则来进行通信，于是我们得到了内部网关协议和外部网关协议的概念。<br></p><blockquote><p>“值得一提的是，尽管一个 AS 内部使用了路由选择协议，但是一个 AS 对其他 AS 还是相当于两个普通的路由器在通信。”</p></blockquote><h4 id="1-内部网关协议IGP-Interior-Gateway-Protocol">1. 内部网关协议IGP(Interior Gateway Protocol)</h4><p>在IGP发展的过程中，主要出现了两种协议，即RIP和OSPF。<br></p><h5 id="1-路由信息协议RIP-Routing-Information-Protocol">1) 路由信息协议RIP(Routing Information Protocol)</h5><p>首先要介绍的是，<strong>RIP是一种分布式的、基于距离向量的路由选择协议</strong>。所谓距离向量算法是一种在网络中计算和选择最优路径的算法，其核心思想为：</p><ul><li>每个路由器会维护一张路由表，其中将记录该路由器到其它网络的距离（用跳数表示）和下一跳地址。</li><li>路由器会定期与邻居路由器交换路由信息（即距离向量），并以此来更新自己的路由表。</li><li>用跳数来表示数据包从出发地到目的地之间经过的路由器数量。特别地，从一路由器到直接连接的跳数为1。</li></ul><style>.ogxhphgoxwyx{}</style><img src="/2025/03/13/note06/note06_pic01.png" class="ogxhphgoxwyx"><style>.yysqhifgoniw{}</style><img src="/2025/03/13/note06/note06_pic02.png" class="yysqhifgoniw"><p>但是需要注意的是，在RIP中一条路由最多只能包含15个路由器，因此距离为16表示网络不可达。这也就意味着RIP协议只适用于小型互联网。</p><h5 id="2-开放最短路径优先OSPF-Open-Shortest-Path-First">2) 开放最短路径优先OSPF(Open Shortest Path First)</h5><p>为了克服RIP只能应用于小型互联网的缺点，开放最短路径优先协议得以被开发，所谓“最短路径优先”即意味着该协议采用最短路径算法。<br><br>为了更好地管理大型互联网，OSPF将一个AS继续划分为了若干个更小的范围，即<strong>区域</strong>，这使得路由更新收敛速度得以提高。而每一个区域都有一个32位的用点分十进制表示的区域标识符。此外，<strong>每个区域内路由器的数量不超过200个</strong>。</p><style>.ckwtkyuosgjp{}</style><img src="/2025/03/13/note06/note06_pic03.png" class="ckwtkyuosgjp"><p>其中主干区域的标识符规定为0.0.0.0。<br></p><p>和RIP的距离向量算法不同的是，OSPF采用的是<strong>分布式的链路状态协议</strong>，主要具有以下几个特点：</p><ul><li>一个OSPF区域内的每个路由器都会在本地存储一个链路状态数据库，其中包含着<strong>本区域内</strong>的所有路由器的链路状态信息（拓扑结构图，而非一张完整的路由表），这使得路由器可以独立地计算出到达任意目的地的路径，而不是像RIP一样走一步看一步。</li><li>当链路状态发生变化时，路由器通过<strong>洪泛法</strong>向<strong>所有的</strong>（不是相邻的）路由器发送更新信息。</li></ul><p>此外，我们在使用OSPF计算最短路径的时候，需要引入链路状态度量来衡量成本，那么我们可以考虑的就有<strong>费用、距离、延时和带宽</strong>等，但是没有路径和收敛时间，这两者都是RIP协议中距离向量的参数。</p><h4 id="2-外部网关协议EGP-External-Gateway-Protocol">2. 外部网关协议EGP(External Gateway Protocol)</h4><p>而EGP一般我们强调的就是BGP，且目前最常用的是BGP-4。<br></p><h5 id="1-边界网关协议BGP-Boreder-Gateway-Protocol">1) 边界网关协议BGP(Boreder Gateway Protocol)</h5><p>众所周知的是，在计算机通信协议栈中，ICP和UDP的一大区别就在于前者是有连接的而后者是无连接的，从这一角度出发，<strong>一个BGP发言人应使用TCP而不是UDP与其他AS的BGP发言人交换路由信息</strong>。同时，BGP需要TCP来保证自身的稳定性。<br><br>我们再来详细了解一下关于BGP发言人的相关概念：在配置BGP时，每个AS的管理员要选择至少一个路由器作为该自治系统的“BGP发言人”。那么也就不难理解，BGP协议交换路由信息的节点数是以AS为单位的，BGP交换路由信息的节点数不小于AS数。<br>而和RIP的距离向量协议、OSPF的链路状态协议不同的是，BGP采用<strong>路由向量协议</strong>，这有效防止了路由环路的发生。<br><br>此外，在BGP-4中规定了以下4种消息类型：</p><div class="center"><table><thead><tr><th style="text-align:center">类型</th><th style="text-align:center">报文名称</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">OPEN（打开）</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">UPDATE（更新）</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">NOTIFICATION（通知）</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">KEEPALIVE（保活）</td></tr></tbody></table></div><p>以下是关于这几种消息类型的注意事项：</p><ul><li>OPEN消息是TCP连接建立后发送的第一个消息，随后两个BGP发言人需要<strong>周期性</strong>地交换KEEPALIVE消息来确认双方的相邻关系。</li><li>UPDATE消息用来在对等体之间交换路由信息，既可以发布也可以撤销多条不可达路由信息。且使用UPDATE更新路由时，<strong>一个报文只能增加一条路由</strong>。</li><li><strong>当BGP检测到错误状态时就会向对等体发出NOTIFICATION消息</strong>，之后BGP连接就会中断。</li></ul><h3 id="二、计算机安全">二、计算机安全</h3><h4 id="1-入侵检测系统（IDS）">1. 入侵检测系统（IDS）</h4><p>IDS是一种通常以<strong>被动方式</strong>工作的系统，在监测到潜在威胁后会发出警报。根据网络拓扑结构的不同，IDS的探测器可以通过以下三种方式部署在被检测网络当中：</p><ul><li><strong>利用交换设备的镜像功能</strong>，使交换设备将流向各端口的数据包复制一份给监控端口以进行数据分析和处理。</li><li>在网络中增加一台<strong>集线器</strong>改变网络拓扑结构。</li><li>增加一个TAP<strong>分路器</strong>设备对交换式网络中的数据包进行分析和处理。</li></ul><p>IDS也具有以下几种模式：</p><ul><li>层次式：将数据收集的工作分布在整个网络中</li><li>协作式：各数据分析模块可以相对独立地进行决策</li><li>对等式：<strong>真正避免了单点故障的方式</strong></li></ul><h4 id="2-入侵防御系统（IPS）">2. 入侵防御系统（IPS）</h4><p>入侵防御系统IPS(Intrusion Prevention System)是一种在入侵检测系统IDS(Intrusion Detection System)基础上发展而来的。IPS在IDS的基础上增加了<strong>主动响应功能</strong>，不仅能够监测威胁，还能够主动阻止或减轻攻击的影响。<br><br><strong>IPS工作在In-Line（内联）模式</strong>，这意味着其直接部署在网络流量的传输路径上，实时监控并处理数据包。这也使得<strong>IPS具备嗅探功能</strong>（“嗅探功能”是指通过网络接口捕获并分析流经网络的数据包的技术。）。<br><br>根据部署位置和工作方式的不同，IPS可以分为以下几个类型：</p><ul><li>基于主机的HIPS（Host-based IPS）：HIPS部署在受保护的主机系统当中，能够监控主机的系统调用、文件访问和进程行为，阻挡攻击。</li><li>基于网络的NIPS（Network-based IPS）：NIPS部署在网络边界，一般串联于防火墙和路由器之间（即被保护的链路中）。NIPS对攻击的<strong>误报</strong>（不是漏报）会导致合法的通信被阻断。</li><li>基于应用的AIPS（Application-based IPS）：AIPS一般部署在受保护的应用服务器前端。</li></ul><h4 id="3-常见的网络攻击类型">3. 常见的网络攻击类型</h4><p>常见的网络攻击类型主要有以下几种：</p><div class="center"><table><thead><tr><th style="text-align:center">攻击类型</th><th style="text-align:center">原理简述</th></tr></thead><tbody><tr><td style="text-align:center"><strong>DDoS 攻击</strong></td><td style="text-align:center">利用已经攻占的多个系统向目标攻击，被害设备面对大量请求无法正常处理而拒绝服务</td></tr><tr><td style="text-align:center"><strong>Land 攻击</strong></td><td style="text-align:center">向某个设备发送数据包，并将数据包的源 IP 地址和目的地址都设置成攻击目标的地址</td></tr><tr><td style="text-align:center"><strong>Smurf 攻击</strong></td><td style="text-align:center">利用 ICMP 广播地址放大攻击流量，淹没目标服务器</td></tr><tr><td style="text-align:center"><strong>SYN Flooding</strong></td><td style="text-align:center">利用 TCP 三次握手过程，使受害主机处于会话请求之中，直至连接超时停止响应</td></tr><tr><td style="text-align:center"><strong>SQL 注入</strong></td><td style="text-align:center">插入恶意 SQL 代码，操纵数据库查询。</td></tr><tr><td style="text-align:center"><strong>Ping of Death</strong></td><td style="text-align:center">发送超大的 ICMP 数据包，导致目标系统崩溃。</td></tr></tbody></table><!-- | **源路由欺骗攻击**| 伪造源路由信息，绕过安全设备检测。| --><p>| <strong>Cookie 篡改</strong>| 修改客户端 Cookie 数据，伪造用户身份或权限。|<br>| <strong>DNS 欺骗</strong>  | 伪造 DNS 响应，诱导用户访问恶意网站。|<br>| <strong>Tear Drop 攻击</strong>| 发送特制分片 IP 数据包，导致目标系统崩溃。|</p></div><p>其中需要注意的有：</p><ul><li>由于SQL注入攻击是利用了系统漏洞，所以防火墙无法阻断</li><li><strong>基于网络的防护系统也无法阻断Cookie篡改和DNS欺骗</strong>，因为它们不是通过阻塞网络或者耗费网络资源来进行攻击的。同理，基于网络的防护系统可以阻断Smurf攻击。</li><li>Tear doop、Smurf攻击可以被路由器阻止</li></ul><h4 id="4-漏洞扫描技术和工具">4. 漏洞扫描技术和工具</h4><p>主要有以下几种漏洞扫描技术和工具：</p><ul><li>主动扫描：主动扫描是指通过向目标系统发送特定的探测包或请求，主动收集目标系统的漏洞信息。它是一种积极的扫描方式，能够快速发现目标系统的漏洞，但也因此具有一定的侵入性，会对目标系统造成一定影响。</li><li>被动扫描：被动扫描是指通过监听网络流量，分析目标系统的行为和通信模式，间接发现漏洞。这和同样处于被动的状态的IDS有相似性。</li><li>X-Scanner：X-Scanner是一款国产的漏洞扫描工具，采用多线程方式对制定IP地址段进行安全漏洞扫描。由于X-Scanner运行在Windows平台下，因此<strong>只能检测运行Windows系统的硬件</strong>。</li><li><strong>ISS的</strong>System Scanner：通过依附于主机上的扫描器代理侦测主机内部的漏洞，是主动扫描而非被动扫描。</li><li>CVE：CVE是一个公开的漏洞数据库，为已知的漏洞和暴露提供唯一的标识符，也就是说CVE为每个漏洞确定了唯一的名称和标准化的描述。</li><li>MBSA：微软的安全评估工具。</li></ul><h4 id="5-Cisco-PIX-525防火墙">5. Cisco PIX 525防火墙</h4><p>PIX防火墙中定义了以下四种模式：</p><ul><li>非特权模式：默认登录后进入非特权模式，其权限最低，只能执行基本的查看命令和有限的测试命令</li><li>特权模式：在非特权模式中输入<code>enable</code>命令后进入，权限较高，可以查看设备的所有状态信息</li><li>监视模式：也称为“维护模式”，在设备启动时按下<code>Escape</code>或<code>Break</code>健进入，用于设备故障恢复或密码重置。<strong>在监视模式中，可以更新操作系统映像和口令恢复</strong>。</li><li>配置模式：在特权模式下输入<code>configure terminal</code>命令进入，权限最高，可以修改设备的配置<br>此外在Cisco PIX 525防火墙中，接口的命名和安全级别是预定义的，用于区分不同网络区域的安全等级：</li><li>Ethernet0：外部接口（Outside），连接到外部路由器或互联网服务提供商（ISP），<strong>安全级别为0</strong></li><li>Ethernet1：内部接口（inside），连接到内部交换机或核心网络设备，<strong>安全级别为100</strong></li><li>Ethernet2：中间接口（dmz），连接DMZ（非军事区）网络，用于放置对外提供服务的服务器（如 Web 服务器、邮件服务器），<strong>安全级别为50</strong>。<br>其中安全级别是一个用来衡量接口的可信程度的数值，数值越高该接口所连接的网络越可信。默认情况下，高安全级别接口的流量可以访问低安全级别接口。<strong>如果想要反向流动的话需要使用<code>conduit</code>命令。</strong><br><br>说到命令，Cisco PIX525的常见命令还有以下几种：</li><li>nat:地址转换命令，将内网的私有IP转换为外网公网IP。</li><li>global:指定公网地址范围并定义地址池。</li><li>fixup:启用或禁止一个服务或者协议。</li><li>static:配置静态IP地址翻译，<strong>使内部地址与外部地址一一对应</strong>。</li></ul><h4 id="6-可信计算机系统评估准则TCSEC">6. 可信计算机系统评估准则TCSEC</h4><blockquote><p>TCSEC（Trusted Computer System Evaluation Criteria，可信计算机系统评估标准）是一套重要的计算机系统安全评估标准。它起源于20世纪70年代的美国国防科学委员会，并在1985年由美国国防部正式公布，因此也被称为“橙皮书”。<br>TCSEC的重要性不仅在于其具体的分级标准，还在于它为后来的IT安全评估标准如ITSEC和CC（通用准则）奠定了基础。这些标准现已被国际标准化组织采纳为ISO 15408，广泛应用于欧洲及全球范围内。</p></blockquote><div class="center"><table><thead><tr><th>等级</th><th>类别</th><th>子级</th><th>名称</th><th>标准描述</th></tr></thead><tbody><tr><td>D</td><td>最小保护</td><td>-</td><td>最小保护（Minimal Protection）</td><td>未通过任何安全评估的系统，不能用于多用户环境下重要信息处理。</td></tr><tr><td>C</td><td>自主保护</td><td>C1</td><td>自主安全保护</td><td>提供基本的访问控制，用户和数据分离。</td></tr><tr><td></td><td></td><td>C2</td><td>受控访问保护</td><td>更严格的访问控制，支持审计功能，能够追踪用户活动。</td></tr><tr><td>B</td><td>强制保护</td><td>B1</td><td>标记安全保护</td><td>引入强制访问控制（MAC），数据标记和基于标签的访问控制。</td></tr><tr><td></td><td></td><td>B2</td><td>结构化保护</td><td>更强的安全策略，支持隐蔽通道分析和更严格的系统设计。</td></tr><tr><td></td><td></td><td>B3</td><td>安全域</td><td>高度安全的系统设计，支持最小特权原则和全面的审计功能。</td></tr><tr><td>A</td><td>验证保护</td><td>A1</td><td>验证设计</td><td>最高安全级别，要求形式化验证和严格的安全设计流程。</td></tr></tbody></table></div><h4 id="7-三种备份方式比较">7. 三种备份方式比较</h4><p>现在主要的备份方式有完全备份、差异备份和增量备份三种：</p><ul><li>完全备份：备份所有选定的数据，无论数据是否发生变化。</li><li>差异备份：备份自上次完全备份以来发生变化的所有数据。</li><li>增量备份：备份自上次备份（无论是完全备份、差异备份还是增量备份）以来发生变化的数据。</li></ul><p>此外还需要了解一个备份数的概念，它通常指的是为同一个数据保留的备份版本的数量，通过保存多个时间点的备份副本，确保在数据丢失、损坏或误操作时能够灵活恢复到不同时间点的状态。</p><div class="center"><table><thead><tr><th style="text-align:center">特性</th><th style="text-align:center">完全备份</th><th style="text-align:center">差异备份</th><th style="text-align:center">增量备份</th></tr></thead><tbody><tr><td style="text-align:center"><strong>备份数据量</strong></td><td style="text-align:center">最大</td><td style="text-align:center">中等</td><td style="text-align:center">最小</td></tr><tr><td style="text-align:center"><strong>备份时间</strong></td><td style="text-align:center">最长</td><td style="text-align:center">中等</td><td style="text-align:center">最短</td></tr><tr><td style="text-align:center"><strong>恢复速度</strong></td><td style="text-align:center">最快</td><td style="text-align:center">较快</td><td style="text-align:center">较慢</td></tr><tr><td style="text-align:center"><strong>恢复复杂度</strong></td><td style="text-align:center">最简单</td><td style="text-align:center">较简单</td><td style="text-align:center">最复杂</td></tr><tr><td style="text-align:center"><strong>存储空间占用</strong></td><td style="text-align:center">最大</td><td style="text-align:center">中等</td><td style="text-align:center">最小</td></tr><tr><td style="text-align:center"><strong>备份数</strong></td><td style="text-align:center">4份</td><td style="text-align:center">1全备+6差异</td><td style="text-align:center">1全备+6增量</td></tr></tbody></table></div><h4 id="8-加密通信">8. 加密通信</h4><p>常见的密码方法可以分为两类，一类是对称密码，另一类是非对称密码：</p><ul><li>对于对称密码而言，如果网络中有N个用户，则需要密钥的个数是N*（N-1）个。</li><li>对于非对称密码而言，如果网络中有N个用户，需要的密钥个数为2N个。</li></ul><h3 id="三、城域网结构与设计">三、城域网结构与设计</h3><h4 id="1-城域网的结构">1. 城域网的结构</h4><p>和OSI模型类似，城域网的三层网络结构是采用层次化架构的三层网络，它将网络分为了核心层、汇聚层和接入层：</p><blockquote><ol><li>接入层（Access Layer）：这是用户设备（如计算机、手机、打印机等）接入网络的入口。接入层负责提供用户接入、认证、安全策略等功能，同时也执行本地流量处理。交换机在这一层起到关键作用，将用户设备连接到网络。<br>2. 汇聚层（Distribution Layer）：汇聚层位于接入层和核心层之间，承担连接不同接入层子网的任务。在汇聚层，流量聚合和筛选，同时进行部门间的隔离（通过虚拟局域网或VLAN技术）。 <br>3. 核心层（Core Layer）：核心层是网络的主干，负责高速数据传输和流量交换。它连接不同的汇聚层和提供网络的高可用性和冗余。核心层需要具备高带宽、低延迟和高可用性的特点。</li></ol></blockquote><p>其中，对用户流量进行路由处理的是核心交换层。</p><div class="center"><style>.yqzkmefrpknt{}</style><img src="/2025/03/13/note06/note06_pic10.png" class="yqzkmefrpknt"></div><h4 id="2-城域网QoS技术">2. 城域网QoS技术</h4><blockquote><p>无论是语音还是视频，在IP网上都以IP数据包方式传输，其所需带宽完全可以由宽带多业务网络满足。但为了保证在其它数据的干扰下，或在高峰拥塞期间，在多对一的流量汇聚点上，满足关键业务的带宽、时延、抖动和丢包等要求，就需要网络提供必要的QoS（服务质量保证）技术。</p></blockquote><p>主要考察的技术有以下三种：</p><ul><li>资源预留（RSVP, Resource Reservation Protocol）：RSVP 是一种信令协议，用于在IP网络中为特定数据流预留资源（如带宽）。</li><li>区分服务（DiffServ, Differentiated Services）：DiffServ 是一种基于分类的QoS技术，通过将数据包分为不同类别并为每类分配优先级，实现服务质量保障。它适用于大规模网络，扩展性较好。</li><li>多协议标记交换（MPLS, Multiprotocol Label Switching）：MPLS 是一种基于标签的转发技术，通过为数据包添加标签，实现高效的路由和流量工程（Traffic Engineering），同时支持QoS。</li></ul><h4 id="3-NAT技术">3. NAT技术</h4><blockquote><p>…以至于二十世纪90年代初，网络专家们意识到，这样大手大脚下去，IPv4地址很快就要耗光了。于是，人们开始考虑IPv4的替代方案，同时采取一系列的措施来减缓IPv4地址的消耗。正是在这样一个背景之下，本期的主角闪亮登场，它就是网络地址转换——NAT。<br>NAT是一项神奇的技术，说它神奇在于它的出现几乎使IPv4起死回生。在IPv4已经被认为行将结束历史使命之后近20年时间里，人们几乎忘了IPv4的地址空间即将耗尽这样一个事实——在新技术日新月异的时代，20年可算一段漫长的历史。更不用说，在NAT产生以后，网络终端的数量呈加速上升趋势，对IP地址的需求剧烈增加。此足见NAT技术之成功，影响之深远。</p></blockquote><p>我们首先需要来了解一下所谓公有IP和私有IP的概念:</p><ul><li>公有IP地址：公有IP地址是全球唯一的，用于在互联网上标识设备。它由**互联网编号分配机构（IANA）**及其下属机构（如RIRs）统一分配和管理。</li><li>私有IP地址：私有IP地址用于内部网络（如家庭、企业局域网），不能在互联网上直接路由。它们由网络管理员自由分配，无需向IANA申请。</li></ul><p>需要注意的是，IANA专门保留了3块IP地址作私有地址用：<br></p><div class="center"><table><thead><tr><th style="text-align:center">起始地址</th><th style="text-align:center">结束地址</th></tr></thead><tbody><tr><td style="text-align:center">10.0.0.0</td><td style="text-align:center">10.255.255.255</td></tr><tr><td style="text-align:center">172.16.0.0</td><td style="text-align:center">172.16.255.255</td></tr><tr><td style="text-align:center">192.168.0.0</td><td style="text-align:center">192.168.255.255</td></tr></tbody></table></div><p>这也就解释了前段时间一道课内阶段测试题的答案：<br></p><div class="center"><style>.dvncomgwhlbi{}</style><img src="/2025/03/13/note06/note06_pic06.png" class="dvncomgwhlbi"></div>言归正传，那么NAT（Network Address Translation）就是一种把内部私有IP地址翻译成合法公有IP地址的技术。<br>其中NAT技术主要分为：<ul><li>静态NAT技术：即一个公网IP地址对应一个私有IP地址。</li><li>动态NAT技术：即同一个公网IP地址分配给不同的私网用户使用，但是时间必须错开，它包含一个公有IP地址池和一张动态地址映射表。</li></ul><p>而计算机三级网络技术中有关NAT的主要考察知识点就是动态地址转换表。下边我们直接以真题为例进行分析：<br></p><div class="center"><style>.vawiogqtfwwi{}</style><img src="/2025/03/13/note06/note06_pic07.png" class="vawiogqtfwwi"></div><p>此外还有一种情况：</p><div class="center"><style>.pckygskrdwrl{}</style><img src="/2025/03/13/note06/note06_pic07.png" class="pckygskrdwrl"></div><p>当内部网络的一个专用地址需要访问外网的时候，NAT会将其转换为Internet上唯一的外部公用地址+端口号，也就是<code>58.73.1.1, 1423</code>。而外部网络相应这个访问请求的时候也只能是响应这个转换过后的外部公用地址。因此本题答案为<code>58.73.1.1:1423</code>。</p><h4 id="4-RPR弹性分组环">4. RPR弹性分组环</h4><p>弹性分组环（RPR, Resilient Packet Ring）是一种采用环形拓扑且是<strong>互逆双环拓扑</strong>（见下图）的网络架构，广泛应用于城域网（MAN）或广域网（WAN）。其中，两个RPR节点之间的裸光纤最大长度可达<strong>100公里</strong>。<br></p><div class="center"><style>.rdnrslkdxmrc{}</style><img src="/2025/03/13/note06/note06_pic04.jpg" class="rdnrslkdxmrc"></div><p>和前边提到过的技术类似，RPR也是基于前置基数发展而来的，其前身为光纤分布式数据接口FDDI（Fiber Distributed Data Interface）。FDDI是早期的环形网络技术（<strong>同样是双环</strong>），主要应用于较小的局域网（LAN）当中。在传统的FDDI环当中，当源节点向目的节点发送一个数据帧时，这个数据帧将由<strong>源节点</strong>从环中收回。但在RPR环中，这个数据帧将由<strong>目的节点</strong>从环中收回。<br></p><blockquote><p>提高带宽利用率:<br>FDDI 的问题：在 FDDI 中，数据帧必须由源节点收回，即使数据已经到达目的节点，帧仍然会在环上继续传输，直到返回源节点。这导致带宽浪费，尤其是在长距离环网中。<br><br>RPR 的优势：RPR 中，目的节点在接收到数据帧后立即将其从环中移除，释放了后续环路的带宽，使得其他节点可以立即使用这些空闲带宽。这种机制显著提高了环网的带宽利用率。</p></blockquote><p>正常情况下，RPR中的两个环会同时工作，其中<strong>外环沿顺时针方向</strong>，<strong>内环沿逆时针方向</strong>，当一个环损坏时就由另一个环承担所有数据帧的传输工作。<br><br>着眼于环上的每一个节点，RPR技术通过<strong>公平算法</strong>来控制各个节点，进而使得RPR及其节点具备以下特性：</p><ul><li>RPR环上的各个节点共享带宽。</li><li>RPR可以对不同的业务数据分配不同的优先级，优先级高的业务将被分配更高的带宽，这使得RPR可以在光纤上高效传输IP分组。</li><li>RPR环上的每一个节点都执行<strong>SRP算法</strong>（空间复用协议，Spatial Reuse Protocol）。SRP算法是实现公平算法的重要基础，其将帮助实现带宽的高效利用。</li></ul><p>由以上特性可得整个RPR环处于一种十分高效的动态分配当中，这也要求RPR的内外环都采用<strong>统计复用</strong>的方法传输和控制分组。所谓统计复用，指的就是根据实际需求分配资源，允许多个数据流共享同一传输通道，按需使用带宽，从而提高利用率。<br><br>此外，RPR提供了环自愈保护的功能：</p><blockquote><p>“(5)环自愈保护。当RPR环中出现严重故障或者发生光纤中断后，中断处的两个站点就会发出控制帧，沿光纤方向通知各个节点。正要发送数据的站点接收到这个消息后，立即把要发送的数据倒换到另一个方向的光纤上。一般来说，在环保护切换时，要按照业务流的不同服务等级、根据相同目标一起倒换原则依次向反向光纤倒换业务。RPR和SDH一样，能保证业务的倒换时问<strong>少于50ms</strong>。”</p></blockquote><p>其中提到的SDH是指同步数字体系（Synchronous Digital Hierarchy），是一种在RPR之前发展出来的技术，同样具有50ms级的环自愈保护功能。但其技术核心是同步传输（时分复用），与采用<strong>统计复用</strong>的RPR相较而言带宽利用率较低。<br></p><h4 id="5-数字用户线xDSL接入技术">5.数字用户线xDSL接入技术</h4><p>xDSL是一种<strong>基于电话线</strong>的宽带接入技术，通过调制解调器将数字信号转换为模拟信号，在一对铜双绞线上传输。它能够在现有的电话线上实现高速数据传输，<strong>同时不影响电话服务</strong>。而xDSL技术包括以下几种变种：</p><ul><li>非对称数字用户线ADSL：ADSL的上下行传输速率不对称，<strong>为64~640kbps（上行）/1.5~6Mbps（下行）。</strong></li><li>高比特率数字用户线HDSL：HDSL的上下行传输速率对称，<strong>为1.544Mbps</strong>。</li></ul><h4 id="6-光纤同轴电缆混合网HFC">6. 光纤同轴电缆混合网HFC</h4><p>此外我们再梳理一些关于光纤同轴电缆混合网HFC的相关知识点：</p><ul><li>根据命名不难发现HFC是一种混合网络技术，其使用光纤作为主干传输介质而将同轴电缆作为最后一公里的接入介质。</li><li>HFC是一个双向传输系统，支持上行和下行通信。</li><li>HFC中应用到了电缆调制解调器，即Cable Modem。所谓调制，就是将基带信号转换为适合再特定信道中传输的高频信号的过程，在HFC中就是在发送端将数据调制为同轴电缆允许的频率发送出去。而解调则为调制的逆过程。<ul><li>Cable Modem利用频分多路复用方法将信道分为上行信道与下行信道。</li><li>Cable Modem是处于同轴电缆上的，<strong>它将用户计算机与同轴电缆连接起来</strong>。</li><li>Cable Modem传输方式分为对称式和非对称式两类。</li></ul></li></ul><h4 id="7-光纤接入技术">7. 光纤接入技术</h4><p>ITU：International Telecommunication Union（国际电信联盟），是联合国下属的专门机构，负责制定全球电信标准。ITU 标准在光纤通信中广泛使用，特别是在 SDH（同步数字体系） 和 SONET（同步光网络） 技术中。<br><br>而OC：Optical Carrier（光载波），是 SONET 标准中用于表示光纤传输速率的等级，其定义了光纤网络中信号的传输速率，通常用于北美地区的 SONET 网络。<br></p><div class="center"><table><thead><tr><th style="text-align:center">ITU标准</th><th style="text-align:center">传输速率</th></tr></thead><tbody><tr><td style="text-align:center">OC-3</td><td style="text-align:center">155.52Mbps</td></tr><tr><td style="text-align:center">OC-12</td><td style="text-align:center">622.08Mbps</td></tr></tbody></table></div><p>一个比较好记忆的方法是<strong>OC-1的传输速率是51.84Mbps</strong>，其它标准基于此倍增即可。<br></p><h3 id="四、局域网设计与设备">四、局域网设计与设备</h3><h4 id="1-综合布线系统">1. 综合布线系统</h4><div class="center"><style>.swwftgxsdijr{}</style><img src="/2025/03/13/note06/note06_pic08.jpg" class="swwftgxsdijr"></div><p>其中需要注意的知识点有：</p><ul><li>建筑群子系统可以是多种布线方式的任意组合，但不能只是一种布线方式的单一选择。其中，地下管道布线是最理想的方式。</li><li><strong>嵌入式插座是用来连接双绞线的</strong>。关于双绞线，其分为UDP（非屏蔽双绞线）和STP（屏蔽双绞线）。两者虽都具有避免电磁干扰的功能，但前者是基于双绞线本身的结构，而后者则是基于屏蔽层的使用。也正因此，STP 比 UTP 贵、复杂、抗干扰能力强、辐射小。</li><li>多介质插座用来连接铜缆和光纤，满足用户“光纤到桌面”的需求。</li><li>水平布线子系统的电缆长度在90m以内。</li><li>干线线缆铺设经常采用点对点结合和分支结合两种方式。</li></ul><p>以下是在建筑群布线子系统中可采用的四种铺设方式：</p><ul><li>巷道布线法：利用建筑物之间的地下巷道铺设电缆。由于地下巷道中存在热水管道，有烫伤电缆的可能性。</li><li>架空布线法：利用原有的电线杆布线。显然，成本低但安全性不高。</li><li>直埋布线法：该方法除了部分电缆外，其余部分都没有管道保护，容易受到破坏。<strong>是对线缆保护最不利的方式</strong>。</li><li>管道布线法：在管道和入孔组成的地下系统中进行布线，为电缆提供了最好的机械保护。</li></ul><h4 id="2-集线器">2. 集线器</h4><p>集线器是一种运作在OSI模型（见下图）中的<strong>物理层</strong>中的一种网络硬件，可以让其链接的设备工作在同一网段。<br></p><div class="center"><style>.gvankjbcpfpw{}</style><img src="/2025/03/13/note06/note06_pic05.png" class="gvankjbcpfpw"><center style="font-size:14px;color:#C0C0C0;text-decoration:underline">正如图中所示，集线器使用双绞线连接工作站</center></div><p>作为在物理层中工作的设备，即纯硬件网络底层设备，集线器仅对数据传输起到同步、放大和整型的作用。它采用<strong>CSMA/CD</strong>（Carrier Sense Multiple Access with Collision Detection，载波侦听多路访问/冲突检测）介质访问控制机制，这使得其具有以下功能：</p><ul><li>载波侦听：在发送数据之前，设备会先侦听共享介质上是否有其它设备正在发送数据。</li><li>多路访问：多个设备共享同一介质，任何设备都可以在介质空闲时发送数据。</li><li>冲突检测：如果两个或多个设备同时检测到介质空闲并开始发送数据，就会发生冲突。设备会等待一段随机时间（称为退避时间）后重新尝试发送。</li></ul><p>综合这些功能，我们可以得到：<strong>在集线器中每次只有一个节点能够发送数据</strong>，而其它节点都处于接收数据的状态（当然多个节点可以同时接收）。<br></p><p>同时，集线器采用广播模式，即其不是基于MAC/网卡/IP地址完成数据转发的，而是<strong>信源节点利用一对发送线将数据通过集线器内部的总线广播出去的</strong>。这也意味着，在某个端口工作的时候，其它所有端口都能收听到信息（连接到一个集线器的所有节点是共享同一个冲突域的）。</p><h4 id="3-中继器">3. 中继器</h4><p>中继器同样是一个工作在物理层的连接设备，其适用于完全相同的两类网络的互连。中继器对在线路上的信号具有放大再生功能，能够扩大网络传输的距离。</p><p class="note note-light"><p>（判断正误）中继器工作在MAC层。</p></p>错误，MAC层是数据链路层的一个子层，而中继器显然工作在物理层。<h4 id="4-网桥">4. 网桥</h4><p>网桥工作在数据链路层，这意味着它具备了一定处理传输数据的能力。</p><blockquote><p>简单的说网桥就是个硬件网络协议翻译器，假设你有2台电脑，一台兼容机安装windows，一台是Apple安装OS2，那么两台电脑之间是默认网络协议是不同的，兼容机可能只会说TCP/IP，苹果机只会说Apple talk，就好象两个外国人都不会说对方的语言，怎么办？找个翻译，网桥就是翻译。</p></blockquote><p>而根据转发策略可以将网桥分为透明网桥和源路由网桥：</p><ul><li>透明网桥：透明网桥在转发数据帧时，不需要发送方或接收方进行任何配置或修改。<strong>透明网桥一般用在两个MAC层协议相同的网段之间的互联</strong>。</li><li>源路由网桥：源路由网桥要求发送方在数据帧中指定完整的传输路径。</li></ul><h4 id="5-交换机">5. 交换机</h4><p>和上文中提到的集线器类似，交换机（Switch）也是一种实现不同设备之间通信的设备，可以将多台数据终端设备连接在一起，构成星状结构的网络。但是交换机已经是OSI模型中第二层数据链路层的设备了，这意味着交换机不但可以对数据的传输做到同步、放大和整形，而且可以过滤短帧、碎片等，从而保证数据传输的完整性和正确性。<br><br>交换机的基本功能为：</p><ol><li>建立和维护一个表示MAC地址与交换机端口对应关系的交换表。交换机会采用盖时间戳的方法刷新交换表。</li><li><strong>在发送节点和接收节点之间，建立一条虚连接。即发送方所连的交换机端口（源端口）到接收方所连的交换机端口（目的端口）之间建立虚连接。</strong></li><li>完成数据帧的转发或过滤。</li></ol><h5 id="1）-交换机的交换模式">1） 交换机的交换模式</h5><p>总体来说，交换机的交换方式有静态交换和动态交换两种：</p><ul><li>静态交换：由人工来完成端口之间传输通道的建立。</li><li>动态交换（最常用）：<strong>依据目的地的MAC地址查询交换表</strong>（不是IP地址），由表中给出的输出端口来建立传输通道（一个数据帧传送完成后自动断开）。<ul><li>直通模式：<ul><li>快速转发交换模式：也叫<strong>直通交换模式</strong>，交换机在接收了帧的<strong>前14个字节</strong>后就会立刻转发该数据帧。</li><li>碎片丢弃交换模式：这种交换模式将在转发数据帧前先过滤掉大部分数据报错误的碎片。（如果帧的长度小于<strong>64</strong>，则被视为碎片，交换机直接丢弃；而任何大于64字节的数据帧都被交换机视为有效帧，进行转发）</li></ul></li><li>存储转发模式：在这种模式下交换机将会将接收到的整个数据帧都保存在缓冲区中，然后在检验数据有效性之后再行转发。</li></ul></li></ul><h5 id="2）-虚拟局域网技术">2） 虚拟局域网技术</h5><p>VLAN（Virtual Local Area Network，虚拟局域网） 是一种将物理局域网（LAN）划分为多个逻辑子网的技术。通过 VLAN，网络管理员可以在同一物理网络基础设施上创建多个独立的广播域，从而提高网络的安全性、灵活性和管理效率。以下是需要注意的相关知识点：</p><ul><li>由于VLAN依靠具有VLAN功能的交换机建立，因此其和交换机一同处在<strong>数据链路层</strong>当中。同理，<strong>VLAN是以交换式网络为基础的</strong>。</li><li>VLAN可隔离广播信息，<strong>每个VLAN为一个广播域，也就是一个独立的逻辑网段</strong>，VLAN中的广播信息，只能发送给这个VLAN内部的成员，并不发送给其他VLAN成员。如果VLAN之间想要互相通信的话就必须通过路由器。</li><li>VLAN通常用VLAN ID（vlan号，12bit）和VLAN name（vlan名，32个字符）来标识，若创建一个VLAN时没有给定名字，则系统自动使用的缺省VLAN名为VLAN00XXX（XXX即为vlan号）。可用于Ethernet的VLANID是1~1000。</li><li>VLAN的划分不受实际交换机区段的限制，也不受用户所在的物理位置和物理网段的限制。</li></ul><h5 id="3）-交换机带宽">3） 交换机带宽</h5><p>带宽是指在一定时间内，网络或设备能够传输的最大数据量。</p><p>来看一道真题：</p><p class="note note-light">一台交换机具有24个10/100Mbps端口和2个1000Mbps端口，如果所有端口都工作在全双工状态，那么交换机总带宽应为<br> A）4.4Gbps<br> B）6.4Gbps<br> C）6.8Gbps<br> D）8.8Gbps<br></p>其中全双工状态的意思是数据可以同时双向传输（发送和接收），因此每个端口的带宽需要乘以2。为了计算总带宽我们也要将10/100Mbps的端口朝最大值估计。故总带宽B为：<p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>B</mi><mo>=</mo><mtext>（</mtext><mn>24</mn><mo>×</mo><mn>100</mn><mo>+</mo><mn>2</mn><mo>×</mo><mn>1000</mn><mtext>）</mtext><mo>×</mo><mn>2</mn><mo>=</mo><mn>8800</mn><mi>M</mi><mi>b</mi><mi>p</mi><mi>s</mi><mo>=</mo><mn>8.8</mn><mi>G</mi><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">B=\text{（}24\times 100+2\times 1000\text{）}\times 2=8800Mbps=8.8Gbps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord text"><span class="mord cjk_fallback">（</span></span><span class="mord">24</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">100</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord">1000</span><span class="mord text"><span class="mord cjk_fallback">）</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">8800</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">b</span><span class="mord mathnormal">p</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">8.8</span><span class="mord mathnormal">G</span><span class="mord mathnormal">b</span><span class="mord mathnormal">p</span><span class="mord mathnormal">s</span></span></span></span></span></p><p>还有另一种题型：</p><p class="note note-light">一台接入屋交换机具有16个100/1000Mbps全双工下联端口，它的上联端口带宽至少应为<br>A)  0.8Gbps<br>B)  1.6Gbps<br>C)  2.4Gbps<br>D)  3.2Gbps<br></p><p>这时题目中出现了上下联端口的区别，我们需要记住的是：在网络系统分层设计中，层次之间的<strong>上连带宽与下一级带宽之比一般控制在1:20</strong>，因此此题的答案是3.2Gbps/20 = 1.6Gbps。</p><h5 id="4）-交换机的VTP工作模式">4） 交换机的VTP工作模式</h5><p>VTP（VLAN Trunking Protocol，VLAN干道协议） 是 Cisco 交换机用于在局域网中自动同步 VLAN 信息的协议。通过 VTP，管理员可以在一个交换机上配置 VLAN，并自动将这些配置传播到其他交换机，从而简化 VLAN 管理。VTP 有三种工作模式：</p><ul><li>服务器模式（Server）:其为VLAN配置的源头在服务器模式下，交换机可以创建、修改和删除 VLAN，并将这些更改传播到其他交换机。</li><li>客户端模式（Client）：客户端模式交换机不能创建、修改或删除 VLAN，只能接收服务器模式交换机发送的 VLAN 信息。</li><li>透明模式（Transparent）：透明模式交换机可以创建、修改和删除 VLAN，但这些更改不会传播到其他交换机。且透明模式交换机会转发 VTP 消息，但不会根据这些消息更新自己的 VLAN 数据库。</li></ul><h5 id="5）-二层交换机和三层交换机">5） 二层交换机和三层交换机</h5><p>二层交换机和三层交换机的命名由来即其所在的网络层级的不同，二层交换机处于数据链路层（Layer 2），是基于MAC地址进行数据转发的（<strong>二层交换机维护一个表示MAC地址与交换机端口对应关系的交换表</strong>）；而三层交换机处于网络层（Layer 3），是基于IP地址进行数据路由的。不难发现，三层交换机带一些路由器的功能。</p><h5 id="6）-交换机中使用到的技术">6） 交换机中使用到的技术</h5><ul><li>生成树协议STP：生成树协议是一个运行在交换机和网桥设备上的二层链路管理协议，其主要功能和目的是通过建立一个稳定的树状结构网络来保证网络中没有回路。一般来说，它允许在第二层中提供冗余路径，以保证网络可靠地运行。而<strong>IEEE 802.11d是最早的STP标准</strong>，同时也是应用最为广泛的STP标准。此外，STP通过比较交换机的优先级来确定根桥，<strong>优先级的范围为0~61440，步长为4096</strong>。<br><br>此外，在生成树协议STP工作的时候，交换机之间会传递网桥协议数据单元BPDU，其数据包有两种类型：<ul><li>包含配置信息的配置BPDU，长度不超过35个字节</li><li>包含拓扑变化信息的拓扑变化通知BPDU，不超过4个字节</li></ul></li><li>Flood：当交换表中没有接收帧的目的MAC地址时，交换机采用Flood技术转发该帧。</li></ul><h4 id="6-小结">6. 小结</h4><p>综上所述，无线设备主要有以下四大种类：</p><ul><li>无线网卡：也叫VLAN适配器，是无线局域网中最基本的硬件，主要用来<strong>实现点对点的通信</strong>，从而组成一个最小的局域网。</li><li>无线接入点：即无线AP（Access Point），这种设备的基本功能是集合无线或者有线终端，其作用类似于集线器和交换机。</li><li>无线网桥：主要用于连接几个不同的网段，从而实现较远距离的通信。</li><li>无线路由器：无线路由器是具有无线路由功能的AP，一般情况下具有NAT功能。</li></ul><p class="note note-light"><p>采用点对点模式（Ad hoc）建立一个小型无线局域网时应选用的无线设备是：<br><br>A）无线网卡<br>B）无线接入点<br>C）无线网桥<br>D）无线路由器</p></p><p>根据小结内容不难发现此题答案为无线网卡。</p><h3 id="五、中小型网络系统">五、中小型网络系统</h3><h4 id="1-核心层网络设计">1. 核心层网络设计</h4><p>中小型网络系统的主题部分是核心层网络，<strong>其采用的技术标准是GE/10GE</strong>，能够承担整个网络系统流量的40%-60%。<br><br>其设计方式一般如下图所示：</p><div class="center"><style>.nxckecvujxgl{}</style><img src="/2025/03/13/note06/note06_pic36.png" class="nxckecvujxgl"></div><p>这两种设计方式的共同点是都采用了冗余电路的光纤连接了两个核心路由器，但是它们之间亦有区别：</p><ul><li>图(a)：直接利用了核心路由器的带宽，但是占用的核心路由器端口较多（流量压力大），<strong>而高端路由器的端口价格很高，所以设备成本会升高</strong>。（成本高）</li><li>图(b)：在采用链路冗余的同时还增加了一台交换机，这样一来可以分担核心路由器的带宽，但是也容易形成带宽瓶颈，存在单点故障的潜在危险。（可靠性低容易坏）</li></ul><h3 id="六、无线局域网技术与设备">六、无线局域网技术与设备</h3><h4 id="1-IEEE通信协议">1.IEEE通信协议</h4><p>计算机三级网络技术主要考察的IEEE协议有IEEE 802.11和IEEE 802.16两种。802.11标准的重点在于解决局域网范围内移动结点的通信问题，而802.16标准的重点是解决建筑物之间的数据通信问题（城市范围内的宽带无线接入问题）。</p><h5 id="1）-IEEE-802-11">1） IEEE 802.11</h5><blockquote><p>IEEE 802.11是IEEE 802标准委员会（IEEE 802 LAN/MAN Standards Committee）下属的无线局域网工作组，也指代由该组织制定的无线局域网标准。</p></blockquote><p>最初的IEEE 802.11标准中定义了三种物理层技术，分别是两个扩频技术（通过将信号扩展到更宽的频带上传输，以提高抗干扰能力和安全性）和一个红外传播规范（作为在某些特定场景中的补充技术）：</p><ul><li>跳频扩频（FHSS）：最大传输速率为2Mbps</li><li>直接序列扩频（DSSS）：支持1Mbps和2Mbps</li><li>红外（IR）：支持1Mbps和2Mbps</li></ul><p>因此不难看出，最初的IEEE 802.11技术中定义的传输速率是1Mbps和2Mbps。<br><br>而自上世纪90年代该技术提出之后，也经历了一系列的发展与更新，下面是IEEE 802.11三种协议的比较：</p><table><thead><tr><th style="text-align:center">协议</th><th style="text-align:center">802.11b</th><th style="text-align:center">802.11a</th><th style="text-align:center">802.11g</th></tr></thead><tbody><tr><td style="text-align:center">工作频段</td><td style="text-align:center">2.4Ghz</td><td style="text-align:center">5Ghz</td><td style="text-align:center">2.4Ghz</td></tr><tr><td style="text-align:center">最大传输速率</td><td style="text-align:center">11Mbps</td><td style="text-align:center">54Mbps</td><td style="text-align:center">54Mbps</td></tr><tr><td style="text-align:center">实际吞吐量</td><td style="text-align:center">5~7Mbps</td><td style="text-align:center">28~31Mbps</td><td style="text-align:center">28~31Mbps（纯802.11g环境） / 10~12Mbps（与802.11b混合环境）</td></tr><tr><td style="text-align:center">最大容量</td><td style="text-align:center">33Mbps（3信道*11）</td><td style="text-align:center">432Mbps（8*54）</td><td style="text-align:center">162Mbps（3*54）</td></tr></tbody></table><!-- <div class="center"><div class="table-box"><table><thead><tr><th><strong>标准版本</strong></th><th><strong>发布年份</strong></th><th><strong>最大传输速率</strong></th><th><strong>频段</strong></th><th><strong>Wi-Fi代数</strong></th><th><strong>特点/描述</strong></th></tr></thead><tbody><tr><td>802.11</td><td>1997</td><td>2 Mbps</td><td>2.4 GHz</td><td>-</td><td>第一个无线网络标准，速率较低，未广泛应用。</td></tr><tr><td>802.11a</td><td>1999</td><td>54 Mbps</td><td>5 GHz</td><td>-</td><td>速率提高，抗干扰能力强，但覆盖范围较小。</td></tr><tr><td>802.11b</td><td>1999</td><td>11 Mbps</td><td>2.4 GHz</td><td>Wi-Fi 1</td><td>成本低，覆盖范围广，适用于家庭和小型办公室。</td></tr><tr><td>802.11g</td><td>2003</td><td>54 Mbps</td><td>2.4 GHz</td><td>Wi-Fi 3</td><td>结合了802.11a的速率和802.11b的覆盖优势，普及度高。</td></tr><tr><td>802.11n</td><td>2009</td><td>600 Mbps</td><td>2.4 GHz/5 GHz</td><td>Wi-Fi 4</td><td>引入MIMO技术，多天线设计，显著提升传输速率和覆盖范围。</td></tr><tr><td>802.11ac</td><td>2014</td><td>6.9 Gbps</td><td>5 GHz</td><td>Wi-Fi 5</td><td>支持MU-MIMO，大幅提升多用户环境的传输效率。</td></tr><tr><td>802.11ax</td><td>2019</td><td>9.6 Gbps</td><td>2.4 GHz/5 GHz/6 GHz</td><td>Wi-Fi 6</td><td>支持OFDMA技术，优化高密度环境下的通信性能。</td></tr><tr><td>802.11be</td><td>预计2024年</td><td>40 Gbps</td><td>6 GHz</td><td>Wi-Fi 7</td><td>采用更高效的调制方式（4096-QAM），支持更低时延和更高带宽。</td></tr></tbody></table></div></div> --><p>此外还需要注意几个名词或概念的理解：</p><ul><li>UNII波段：<br>UNII 波段（Unlicensed National Information Infrastructure）是 5 GHz 频段的一部分，因此在上表中频段为2.4Ghz的版本并未使用UNII波段。</li><li>RTS/CTS机制：RTS/CTS（Request to Send / Clear to Send）是 IEEE 802.11 标准中用于解决隐藏节点问题的机制。该机制在 MAC 子层定义，用于减少数据帧冲突。</li><li>IEEE 802.11d 是当前最流行的 STP（生成树协议）标准</li><li>IEEE 802.11定义了两种类型的设备：<ul><li>无线结点：即支持IEEE 802.11标准的设备，通常是一台接入设备上加入一块无线网络接口卡（据此实现点对点通信）构成的</li><li>无线接入点：无线接入点的作用是提供有线和无线网络之间的桥接</li></ul></li><li>802.11b的运行模式：<ul><li>点对点模式：点对点模式是指无线网卡和无线网卡之间的通信方式，这种连接方式对于小型网络来说是非常方便的，<strong>最多可以连接256台PC</strong>。</li><li>基本模式：基本模式是指无线网络规模扩充或无线和有线网络并存时的通信方式，也是IEEE 802.11b现在最普及的方式。这时接入点负责频段管理及漫游等指挥工作，一个接入点最多可以连接1024台PC。</li></ul></li></ul><h5 id="2）-IEEE-802-16">2） IEEE 802.16</h5><div class="center"><table><thead><tr><th>协议版本</th><th>适用结点</th><th>备注</th></tr></thead><tbody><tr><td>802.16a</td><td>固定结点接入</td><td>-</td></tr><tr><td>802.16d</td><td>固定结点接入</td><td>IEEE 802.16a 的修订版本</td></tr><tr><td>802.16e</td><td>固定或移动结点接入</td><td>-</td></tr></tbody></table></div><h4 id="2-蓝牙系统">2. 蓝牙系统</h4><p>蓝牙是一种工作在ISM（工业、科学和医疗）频段，亦即<strong>2.402~2.480GHz频段</strong>，上的开放性的、短距离无线通信技术标准。其主要参数和技术指标如下：</p><ul><li>蓝牙采用跳频扩频（FHSS）技术来减少干扰，以<strong>每秒1600次</strong>的速率在其79个信道（2.402~2.480共79个）间切换。</li><li>此外，根据应用场景类型的不同，蓝牙又分为了同步信道和异步信道两种不同的通信模式：<ul><li>同步信道：数据以固定的时间间隔传输以保证时效性，因此适合语音等对延迟敏感的数据，其<strong>传输速率为64kbps</strong>。</li><li>异步信道：数据不以固定的间隙进行传输，适合非事实性应用<ul><li>非对称模式：上行和下行速率可以不同，为<strong>723.2 kbps（下行） / 57.6 kbps（上行）</strong>。</li><li>对称模式：上行和下行速率相同，<strong>为433.9 kbps。</strong></li></ul></li></ul></li><li>在理想情况下，如果蓝牙的发<strong>射功率为100mw时</strong>，其<strong>最大传输距离为100米</strong>。</li></ul><h4 id="3-HiperLAN技术与标准">3. HiperLAN技术与标准</h4><blockquote><p>HiperLAN （High Performance Radio LAN）是一种在欧洲应用的无线局域网通讯标准的一个子集。HiperLAN有两种规格：HiperLAN/1和HiperLAN/2，这两种标准均被欧洲电信标准协会（ETSI）采用。</p></blockquote><p>HiperLAN/1和HiperLAN/2的技术标准如下所示：</p><div class="center"><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">HiperLAN/1</th><th style="text-align:center">HiperLAN/2</th></tr></thead><tbody><tr><td style="text-align:center">射频频率</td><td style="text-align:center">5GHZ</td><td style="text-align:center">5GHZ</td></tr><tr><td style="text-align:center">上行速率</td><td style="text-align:center">20Mbps</td><td style="text-align:center">50Mbps</td></tr></tbody></table></div><p>而关于HiperLAN/2还有以下几个考点：</p><ul><li>覆盖范围：HiperLAN/2<strong>在室内的覆盖范围一般为30m</strong>，<strong>在室外一般为 150m</strong>。</li><li>面向连接：与其他无线局域网技术不同，在HiperLAN/2网络中数据的传输是面向连接的。</li><li>高传输速率：HiperLAN/2采用先进的OFDM调制技术。</li></ul><h4 id="4-Cisco-Aironet-1100">4. Cisco Aironet 1100</h4><blockquote><p>Cisco Aironet 1100是无线局域网收发器的一种，主要是用于独立无线网络的中心点或无线网络和有线网络之间的连接点。兼容IEEE802.11b和IEEE802.11g，工作在2.4GHz频段， 使用的是IOS操作系统。</p></blockquote><h5 id="1）将接入点接入网络">1）将接入点接入网络</h5><p>在安装无线接入点之前，会先向网络管理员询问以下信息：</p><ul><li>系统名</li><li>无线网络中对大小写敏感的服务集标识符（SSID），这是客户端设备用来访问接入点的唯一标识。</li><li>SNMP集合名称及其文件属性</li><li>如果没有连接到DHCP服务器，则需要为接入点指定一个唯一的IP地址</li><li>如果接入点与PC不在同一个子网内，则需要子网掩码和默认网关</li></ul><h5 id="2）配置无线接入点">2）配置无线接入点</h5><p>第一次配置无线接入点的时候一般采用<strong>本地配置方式</strong>（无需将无线接入点连接到一个有线的网络中，不需要配置SSID），默认的IP地址是10.0.0.1，并将成为一个小型的DHCP服务器。这时接入点可以为设备分配多达20个10.0.0.x范围内的IP地址。<br><br>接下来则要按照以下方法配置接入点：</p><ul><li>使用5类双绞线将一台PC机连接到Aironet 1100的以太网端口</li><li>确认PC机获得了10.0.0.x网段地址</li><li>打开浏览器</li><li><strong>在URL栏中输入10.0.0.1</strong>，接下来会出现密码框</li><li>按<code>Tab</code>键越过用户名字到密码字段</li><li>输入大小写敏感的密码后按回车键，接下来会出现接入点汇总状态的页面。单击<code>Express Setup</code>进入快速配置页面</li><li>输入各项配置数据</li></ul><h3 id="七、网络信息系统与服务器系统">七、网络信息系统与服务器系统</h3><h4 id="1-DHCP协议">1. DHCP协议</h4><p>动态主机配置协议DHCP（Dynamic Host Configuration Protocol）是一种使用<strong>UDP</strong>协议工作的应用在局域网中的网络协议，能够动态地自动地为用户分配IP地址。<br><br>DHCP主要有以下几种分配IP地址的方法：</p><ul><li>动态IP地址分配：DHCP服务器从一个IP地址池中动态分配IP地址给客户端。当客户端释放IP地址或租约过期时，该IP地址可以被重新分配给其他客户端。这是最常见的DHCP分配方式。</li><li>静态IP地址分配：DHCP服务器将特定的IP地址分配给特定的客户端MAC地址。这意味着客户端每次连接到网络时都会获得相同的IP地址。这对于需要固定IP地址的服务器或其他关键设备很有用。</li><li>保留IP地址分配：这是一种介于动态和静态分配之间的方式。DHCP服务器保留一些IP地址，仅分配给特定的MAC地址，但仍然允许这些IP地址在客户端断开连接后被释放。</li></ul><p>和交换表、路由表类似，DHCP服务器中会维护一个租约表，其中记录了当前DHCP所有分配的租约期信息：</p><ul><li>静态租约表：对应一个静态租约存储文件，server运行时从文件中读取静态租约表。</li><li>动态租约表：对应一个周期存储文件，server周期性将租约表存进该文件，在程序开始时将会读取上次存放的租约表。</li></ul><p>当客户端向服务器请求的时候，DHCP服务器会先查找租约表，若存在对应的表项就返回，否则就从IP地址池中选择可用IP地址返回，并将其记录下来。<br></p><p>关于DHCP服务器配置的术语和主要参数如下：</p><ul><li>作用域：作用域是DHCP服务器分配给客户端的IP地址范围。它<strong>定义</strong>了可分配的IP地址池，而<strong>不负责IP地址的分配</strong>。此外，在修建作用域后必须<strong>激活</strong>才可以为客户机分配地址。<strong>当DHCP服务器负责多个网段IP地址分配时，需要配置多个作用域</strong>。当新建一个作用域的时候，必须键入的信息是起始IP地址和结束IP地址。</li><li>排除范围：排除范围是作用域内不分配给客户端的IP地址段。添加排除范围时，<strong>只需要排除起始IP和结束IP即可</strong>。</li><li>租约：租约是客户端从DHCP服务器获取IP地址的使用期限。注意要将此概念与用户的上网时间区别开来。租约期限决定了客户端向服务器更新租约的频率。此外，<strong>客户机的地址租约续订是由客户端软件自动完成的</strong>。</li><li>保留：保留是<strong>将作用域地址范围内的任何IP地址</strong>（可以使用被排除的IP地址序列）固定分配给特定客户端（<strong>通过MAC地址识别</strong>），确保了子网上指定的硬件设备始终可使用相同的IP地址。</li><li>新建保留：新建保留时需输入保留名称、IP地址、MAC地址、描述和支持类型等项目。</li></ul><p class="note note-light">（判断正误）一个作用域可负责多个网段IP地址的分配。</p><p>这道题需要搞清楚的有两点，一是作用域并不负责IP地址的分配，负责IP地址分配的是DHCP服务器；第二点是当DHCP服务器要负责多个网段的IP地址分配的时候，需要配置多个作用域。</p><h4 id="2-DNS服务器">2. DNS服务器</h4><blockquote><p>DNS是域名系统（Domain Name System）的简称，因特网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP地址。</p></blockquote><p>DNS服务器配置的主要参数有：</p><ul><li>正向查找域：正向查找域用于将域名解析为IP地址</li><li>反向查找域：反向查找域用于将IP地址解析为域名</li><li>资源记录<ul><li>主机地址（A）：将域名解析为IPv4地址</li><li>别名（CNAME）：将域名指向另一个域名，就例如本网站<code>loquattree.xyz</code>在配置DNS解析的时候就会在增加一条<code>www.loquattree.xyz</code>的别名来满足大多数人的输入习惯</li><li>邮件交换器（MX）：指定邮件服务器的地址</li></ul></li><li>转发器：转发器也是一个DNS服务器，用于将无法解析的查询请求转发到其他 DNS 服务器</li></ul><p>DNS服务器按层次分为3类服务器：</p><ul><li>根DNS服务器：根DNS服务器是 DNS 层次结构的最高层，负责管理全球 DNS 系统的根域（.）。 <strong>安装DNS服务时，根服务器将被自动安装到系统当中</strong>。</li><li>顶级域（TLD）服务器：顶级域服务器负责管理顶级域名（如 .com、.org、.net 等）以及国家代码顶级域名（如 .cn、.uk 等）</li><li>权威DNS服务器：权威DNS服务器是负责管理特定域名（如 <a href="http://example.com">example.com</a>）的 DNS 服务器<br>在进行域名解析的时候，查询顺序为：客户机的缓存、本地DNS服务器、本地DNS服务器缓存、权威DNS服务器。</li></ul><p>DNS服务器中有以下几种常见的命令：</p><ul><li>ipconfig：可以显示当前的TCP/IP网络配置，<strong>可以用来清空DNS缓存</strong>。</li><li>netstat：用于显示网络连接、路由表、接口统计信息等。</li><li>pathping：返回两部分内容，第一部分显示到达目的地经过了哪些路由，第二部分显示了路径中每个路由器上数据包丢失方面的信息，可以<strong>用来检测本机配置的DNS服务器是否工作正常</strong>。</li><li>route：用于显示和操作本地IP路由表条目，可以修改主机默认网关设置。</li><li>nslookup：用于查询 DNS 记录，是 DNS 服务器管理和故障排查的常用工具，<strong>可以测试正向和反向查找区域</strong>。</li><li>ping：测试网络连通性，<strong>可以测试正向查找区域</strong>。</li></ul><p>除此之外，还可以通过调控动态更新和生存时间来配置DNS服务器：</p><ul><li>动态更新：动态更新允许客户机在发生更改时动态更新其资源记录，减少了对资源记录的手动管理，<strong>适用于频繁更改位置并使用DHCP获取IP地址的客户端</strong>。DNS动态更新选项卡中有：<ul><li>不允许动态更新</li><li>只允许安全的动态更新</li><li>允许安全的和非安全的动态更新</li></ul></li><li>生存时间：指该记录被客户端查询到，放在缓存中的持续时间。</li></ul><p>此外，在计算机三级网络技术中常见的Windows 2003操作系统中<strong>默认情况下是不安装DNS服务的，而可配置的是DNS转发器</strong>。</p><p class="note note-light">(判断正误)DNS服务器的IP地址可以由DHCP服务器动态分配。</p>错误，由于DNS服务器会被频繁访问，故其IP地址应该是静态设置的固定地址。<h4 id="3-Winmail邮件服务器">3. Winmail邮件服务器</h4><p>Webmail 服务器是邮件系统中的一个重要组成部分，它允许用户通过浏览器（如 Chrome、Firefox）访问和管理邮件，而无需安装专门的邮件客户端（如 Outlook、Thunderbird），其工作流程为：</p><ul><li>用户在客户端创建新邮件</li><li>客户端软件使用SMTP（发送邮件）协议将邮件发到发件方的邮件服务器</li><li>发件方邮件服务器使用SMTP协议将邮件发到收件方的邮件服务器</li><li>收件方邮件服务器将收到的邮件存储待处理</li><li>收件方客户端软件使用POP3或IMAP4（收取邮件）协议从邮件服务器中读取邮件。</li></ul><p>以下是关于Winmail服务器的一些基本概念：</p><ul><li>Winmail 邮件服务器支持基于 Web 方式的访问和管理，因此在安装邮件服务器软件之前要安装 IIS（Internet Information Services，微软开发的 Web 服务器软件，用于在 Windows 系统上托管网站和 Web 应用程序）。同时，Winmail 用户使用浏览器查看邮件会 使用到 HTTP 协议。</li><li>Winmail服务器允许用户自行注册新邮箱（格式为<code>用户名@域名</code>），其域名是服务器固定的，并不能自行设置。但Winmail用户不可以使用Outlook等客户端注册新邮箱。</li><li>Winmail服务器的管理工具主要包括系统设置、域名设置、快速设置向导：<ul><li>系统设置中可以进行SMTP设置、邮件过滤和更改管理员密码等操作</li><li>域名设置中可以修改域的参数，用于增加新域、构建虚拟邮件服务器、删除已有的域。此外，在域名设置中可以决定是否允许自行注册新用户。</li><li>在Winmail快速设置向导中创建新用户时，需要输入新建用户的信息，包括用户名、域名及用户密码（不是系统邮箱的密码、管理员密码），可选择是否允许客户通过 Winmail 注册新邮箱。</li></ul></li><li>建立邮件路由，即邮件从发件人传递到收件人的过程（经过的路径选择和转发机制），<strong>须在DNS服务器中建立邮件服务器主机记录和邮件交换器记录</strong>。</li></ul><h4 id="4-WWW服务器">4. WWW服务器</h4><p>总体来说，WWW服务器采用了B/S模式应用模式，即浏览器/服务器模式，该结构统一采用Web浏览器作为客户端，分为了三层架构。以下是主要考点：</p><ul><li>在创建不同的网站服务器时，能够作为网络标识的有IP地址、TCP端口号和主机头三部分。</li><li>同一台服务器可以构建多个网站，每个网站对应服务器上的一个目录，因此建立Web站点时必须为一个站点指定一个主目录。可以是一个虚拟目录（必须在主目录下），但一定要有一个目录。</li></ul><h4 id="5-文件传输协议FTP与Serv-U-FTP服务器">5. 文件传输协议FTP与Serv-U FTP服务器</h4><blockquote><p>FTP（File Transfer Protocol）是一种文件传输协议，用来上传和下载，实现远程共享文件，和统一管理文件。FTP允许用户在两台计算机之间传输文件，其中一台计算机充当服务器，另一台计算机充当客户端。</p></blockquote><p><strong>FTP协议可以传输所有文件</strong>，而Serv-U FTP服务器则是一款支持FTP的服务器软件，其基本配置管理原则符合FTP协议的要求，相关知识点如下所示：</p><ul><li>初始状态下是没有设置管理员密码的，可以直接进入管理程序</li><li>FTP服务器的默认端口为21，但也可以在该端口损坏的情况下选择其它端口</li><li>FTP服务器可以构建多个<strong>由IP地址和端口号识别的</strong>虚拟服务器，这就是说<strong>每个虚拟服务器由IP地址和端口号唯一识别</strong>，而不是只单单靠IP地址唯一识别。</li><li>服务器选项不提供IP访问选项，用户常规选项中不包含用户主目录。</li><li>FTP服务器可以使用动态IP地址，使用动态IP地址时，服务器IP地址应配置为空，为空代表全部IP地址，<strong>服务器有多个IP地址时，IP地址为空比较方便（不需分别添加，空不是 0.0.0.0）</strong>。</li><li>新用户的添加与注册必须由管理员来操作，不能自行注册新用户。</li><li>FTP服务器的域创建完成之后需要添加用户才能被客户端访问，而用户中有命名用户和匿名用户的区别。添加匿名用户时用户名必须为&quot;anonymous&quot;，如果添加的是匿名用户，系统将不会要求输入密码。</li><li><strong>用户上传下载选项要求 FTP 客户端在下载信息的同时也要上传文件。（不是配置用户的上传和下载的速率）</strong></li></ul><h4 id="6-服务器技术">6. 服务器技术</h4><p>服务器组中常见的技术有：</p><ul><li>RAID：RAID是一种把多块独立的硬盘（物理硬盘）按不同的方式组合起来形成一个硬盘组（逻辑硬盘），从而提供更高的存储性能的技术</li><li>Cluster：Cluster集群是指一组连接起来的电脑，它们共同工作对外界来说就像一个电脑一样。在集群中当服务器组中一台主机出现故障之后，<strong>程序会立即转移到其它主机中运行</strong>。</li><li>RISC：精简指令集计算机系统</li><li>CISC：复杂指令集计算机系统</li></ul><p>而服务器可据此分类为：</p><ul><li>基于CISC处理器的Intel结构（IA）的PC服务器。</li><li>基于RISC处理器（大型服务器采用UNIX操作系统）的服务器。</li></ul><h4 id="7-服务器性能">7. 服务器性能</h4><div class="center"><table><thead><tr><th style="text-align:center">可用性</th><th style="text-align:center">停机时间（年）</th></tr></thead><tbody><tr><td style="text-align:center">99.9%</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo>≤</mo><mn>8.8</mn><mi>h</mi></mrow><annotation encoding="application/x-tex">time \le 8.8h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7955em;vertical-align:-0.136em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">8.8</span><span class="mord mathnormal">h</span></span></span></span></td></tr><tr><td style="text-align:center">99.99%</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo>≤</mo><mn>53</mn><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">time \le 53min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7955em;vertical-align:-0.136em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord">53</span><span class="mord mathnormal">min</span></span></span></span></td></tr><tr><td style="text-align:center">99.999%</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo>≤</mo><mn>5</mn><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">time \le 5min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7955em;vertical-align:-0.136em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord">5</span><span class="mord mathnormal">min</span></span></span></span></td></tr></tbody></table></div><p>其计算原理为：</p><blockquote><p>3个9：(1-99.9%)*365*24=8.76小时，表示该系统在连续运行1年时间里最多可能的业务中断时间是8.76小时。<br><br>4个9：(1-99.99%)*365*24=0.876小时=52.6分钟，表示该系统在连续运行1年时间里最多可能的业务中断时间是52.6分钟。<br><br>5个9：(1-99.999%)*365*24*60=5.26分钟，表示该系统在连续运行1年时间里最多可能的业务中断时间是5.26分钟。<br></p></blockquote><h3 id="八、路由器、路由表及其配置">八、路由器、路由表及其配置</h3><h4 id="1-路由器的性能指标">1. 路由器的性能指标</h4><ul><li>吞吐量：路由器的吞吐量是指它的包转发能力，这与路由器的端口数量和速率、包类型、包长度关系密切。</li><li>背板能力：背板是路由器输入端与输出端之间的物理通道，背板能力决定了路由器的吞吐量。高性能的路由器一般采用交换式结构，而传统的路由器采用的是共享背板的结构。</li><li>丢包率：丢包率一般用来衡量路由器在超负荷工作时的性能。</li><li>延时与抖动：延时是指数据包的第一个比特进入路由器到其最后一个比特离开路由器所经历的时间；而抖动则是指不同数据包之间延时的不同。抖动是高衰量高速路由器的主要指标。</li><li>突发处理能力：我们一般用以最小帧间隔发送数据包而不引发丢失的最大发送速率来衡量突发处理能力。</li></ul><h4 id="2-高端路由器的可用性指标">2. 高端路由器的可用性指标</h4><ul><li>无故障连续工作时间大于10万个小时</li><li>系统故障恢复时间小于30分钟</li><li>系统具有自动保护切换功能，主备用切换时间小于50ms</li><li>SDH与ATM接口有自动保护切换功能，切换时间小于50ms</li><li>路由器系统内部不存在单点故障</li><li>主要部件具有热插拔冗余备份</li></ul><h4 id="3-路由器的工作模式">3. 路由器的工作模式</h4><ul><li>用户模式：登录到路由器时，输入正确密码就可以进入用户模式。在此模式下只能执行ping、telnet和show version等简单命令。</li><li>特权模式：输入enable和超级用户密码就可以进入特权模式。在此模式下可以查看和保存配置文件、清除闪存、处理并完成路由的冷启动等。</li><li>路由协议配置模式：用于对路由协议的详细配置。</li><li>全局配置模式：可以配置路由器的主机名、超级用户口令、TFTP服务器、**静态路由（ip route）**等。</li></ul><h4 id="4-路由器的内存">4. 路由器的内存</h4><ul><li>只读存储器（ROM）：用于永久保存路由器的开机诊断程序、引导程序和操作系统软件。</li><li>随机存储器（RAM）：用于路由器操作系统运行期间，主要存储路由表、快速交换缓存、ARP缓存等。</li><li>非易失性随机存储器（NVRAM）：用于存储启动配置文件或备份配置文件。</li><li>闪存（Flash）：用于存储路由器当前使用的操作系统映像软件和一些微代码。</li></ul><h4 id="5-路由表的更新算法">5. 路由表的更新算法</h4><p>以官方给出的样题为例：</p><div class="center"><style>.klxxflfsiowj{}</style><img src="/2025/03/13/note06/note06_pic11.png" class="klxxflfsiowj"></div><p>由于我们的目的是要更新R1的路由表，所以我们要首先把图(b)这个R2视角的报文转换为R1视角。由于R1和R2是相邻的两个路由器，所以在新表中距离直接加一即可。此外，再在新表中再新加一列<code>下一跳路由器</code>，这里显然全部都是<code>R2</code>。得到的新表表©如下所示：</p><div class="center"><table><thead><tr><th style="text-align:center">目的网络</th><th style="text-align:center">距离</th><th style="text-align:center">下一跳路由器</th></tr></thead><tbody><tr><td style="text-align:center">10.0.0.0</td><td style="text-align:center">3</td><td style="text-align:center">R2</td></tr><tr><td style="text-align:center">20.0.0.0</td><td style="text-align:center">4</td><td style="text-align:center">R2</td></tr><tr><td style="text-align:center">30.0.0.0</td><td style="text-align:center">5</td><td style="text-align:center">R2</td></tr><tr><td style="text-align:center">40.0.0.0</td><td style="text-align:center">5</td><td style="text-align:center">R2</td></tr></tbody></table></div><p>将此表与原表表(a)对比，<strong>如果表©中的距离比表(a)中的短那么就更新，反之则保持不变</strong>。更新后的数值分别为0、4、4、3，说明①大于等于4。而②③的更新值都比表©中小，这就说明这两个值是保持不变的。<br><br>那么根据以上情况，只有C）5、4、3符合。</p><h4 id="6-琐碎知识点">6. 琐碎知识点</h4><ul><li>环回接口（loopback）是一个虚拟接口，没有一个实际的物理接口与之对应。如果要将其作为一台路由器的管理地址，网络管理员可以为其分配一个IP地址作为管理地址，<strong>其掩码应为255.255.255.255</strong>。此外，Loopback永远处于激活状态。</li></ul><h3 id="九、网络管理技术">九、网络管理技术</h3><h4 id="1-互联网控制消息协议ICMP">1. 互联网控制消息协议ICMP</h4><blockquote><p>一个新搭建好的网络，往往需要先进行一个简单的测试，来验证网络是否畅通；但是IP协议并不提供可靠传输。如果丢包了，IP协议并不能通知传输层是否丢包以及丢包的原因。所以我们就需要一种协议来完成这样的功能–ICMP协议。</p></blockquote><p>ICMP（Internet Control Message Protocol）的功能主要有：</p><ul><li>确认IP包是否成功到达目标地址</li><li>如果IP包未能成功到达目标地址，通知出发主机在发送过程中IP包被丢弃的原因<br>收到&quot;Echo请求&quot;报文的目的节点必须向源节点发出&quot;Echo应答&quot;报文。</li></ul><div class="center"><style>.bhmgddrjhgrw{}</style><img src="/2025/03/13/note06/note06_pic09.png" class="bhmgddrjhgrw"></div><p><strong>不难发现，ICMP消息是封装在IP数据包当中的</strong>。</p><h4 id="2-SNMP管理模型">2. SNMP管理模型</h4><p>SNMP（简单网络管理协议）管理模型是Internet组织用于管理TCP/IP互联网和以太网的标准框架，<strong>基于UDP传输</strong>。该模型由三个核心部分组成：</p><ul><li>管理站（Manager）：负责监控和控制网络设备，通常运行网络管理软件，向代理发送请求并接收响应。</li><li>代理（Agent）：驻留在被管理的网络设备（如路由器、交换机等）中，负责收集设备信息并响应管理站的请求。</li><li>管理信息库（MIB）：存储被管理设备的各种信息，管理站通过SNMP协议访问这些信息。</li></ul><p>SNMP管理模型采用Manager/Agent模型，类似于Client/Server模式。管理站通过SNMP定义的<strong>PDU</strong>向代理发送请求，而代理会将得到的MIB值返回给管理站。<br></p><h5 id="1）-管理信息库MIB-2">1） 管理信息库MIB-2</h5><p>MIB-2采用树形结构描述，相当于管理数据库，每个MIB-2对象都有一个唯一的对象标识符（OID）。而其中的对象值的数据类型有以下几种：</p><ul><li>简单类型：<ul><li>整数（32位）</li><li>8个一组的字符串和OID</li></ul></li><li>应用类型：<ul><li>IP地址</li><li>计数器类型：计数器类型是一个非负的整数，从0开始逐步增加但不能减少。可以一直增加到最大，然后回到0再从头开始。</li><li>计量器类型：这一类型和计数器类型类似，但其既可以增加也可以减小，而且增加到最大值以后并不归0，而是不再继续增大。</li><li>时钟类型：用来记录某个事件从开始发生到目前位置所经历的时间，单位是0.01s。</li></ul></li></ul><h5 id="2）-SNMP支持的操作">2） SNMP支持的操作</h5><ul><li>获取（get）：用于管理站向代理查询被管设备上的MIB数据。</li><li>设置（set）：用于管理站命令代理对被管设备上MIB库中的对象值进行设置，<strong>只有在read-write模式下才能够实现该操作</strong>。</li><li>通知（Notification）：用于代理主动向管理站报告被管理对象的某些变化。又可以继续分为以下两种类型：<ul><li>自陷（Trap）：管理站不会回复。</li><li>通知（Inform）：管理站会回复一条确认信息。</li></ul></li></ul><h2 id="综合题">综合题</h2><h3 id="一、IP表格的填写">一、IP表格的填写</h3><p>以样题为例：</p><div class="center"><style>.tzarqbikjmlh{}</style><img src="/2025/03/13/note06/note06_pic12.png" class="tzarqbikjmlh"></div><h4 id="1-地址类别">1. 地址类别</h4><div class="center"><table><thead><tr><th style="text-align:center">类别</th><th style="text-align:center">范围</th></tr></thead><tbody><tr><td style="text-align:center">A</td><td style="text-align:center">1~127</td></tr><tr><td style="text-align:center">B</td><td style="text-align:center">128~191</td></tr><tr><td style="text-align:center">C</td><td style="text-align:center">192~223</td></tr></tbody></table></div>划分依据为：<div class="center"><style>.jdpuhnptvbnf{}</style><img src="/2025/03/13/note06/note06_pic13.png" class="jdpuhnptvbnf"></div><h4 id="2-主机号">2. 主机号</h4><p>将IP地址中的网络号全部置为0得到的即为主机号。</p><h4 id="3-受限广播地址">3. 受限广播地址</h4><p>此外，受限广播地址指的是255.255.255.255，此答案是固定的。</p><h3 id="二、校园网部署">二、校园网部署</h3><div class="center"><style>.zwipfmaigkry{}</style><img src="/2025/03/13/note06/note06_pic15.jpg" class="zwipfmaigkry"></div><p>这一题一共有15个左右的考点，一般会从中抽取4~5个考点进行考察：</p><h4 id="1-crc-32">1. crc 32</h4><p>这个考点的形式一般如下图所示：</p><div class="center"><style>.yteyrwtduonl{}</style><img src="/2025/03/13/note06/note06_pic14.png" class="yteyrwtduonl"></div><p>当然也有可能是crc ___ 的形式，这时候只要确保整体是<code>crc 32</code>即可。<br><br>而需要知道的是，这一命令行是用来配置CRC的校验功能的，可以用来检测数据在传输过程中是否丢失。</p><h4 id="2-network-area-0-与-area-0-range">2. network ___ area 0 与 area 0 range</h4><p>这两个考点的形式一般如下图所示：</p><div class="center"><style>.yimbdnqqbfmo{}</style><img src="/2025/03/13/note06/note06_pic16.png" class="yimbdnqqbfmo"></div><p>在路由器的OSPF配置模式下（OSPF是一个分层路由协议，可以将网络划分为不同的区域），<code>network ip &lt;子网号&gt;&lt;通配符掩码&gt; area &lt;区域号&gt;</code>命令可以将子网分配到特定的OSPF区域当中。而子网号指的是IP地址和子网掩码按位与之后得到的结果。此外，<strong>通配符掩码(Wildcard Mask)和子网掩码正相反</strong>，用于指定哪些位需要匹配，哪些位可以忽略。<br><br>同一模式下，<code>area &lt;区域号&gt; range &lt;子网号&gt;&lt;子网掩码&gt;</code>命令则用来定义某一特定范围子网的聚合，可以减少路由表中的条目数，提高路由器的工作效率。<br></p><p>因此对于network ___ area 0类型的题目：</p><ul><li>若目标路由器在校园网内，则命令格式为<code>network &lt;校园网聚合后的ip地址&gt; &lt;校园网聚合后的通配符掩码&gt; area 0</code></li><li>若目标路由器在校园网外，则命令格式为<code>network &lt;该路由器的ip地址&gt; &lt;该路由器的通配符掩码&gt; area 0</code></li></ul><p>对于area 0 range ______类型的题目：</p><ul><li>若目标路由器在校园网内，则命令格式为<code>area 0 range &lt;校园网聚合后的ip地址&gt; &lt;校园网聚合后的子网掩码&gt;</code></li><li>若目标路由器在校园网外，则命令格式为<code>area 0 range &lt;该路由器的ip地址&gt; &lt;该路由器的通配符掩码&gt;</code></li></ul><h4 id="3-ip-dhcp-excluded-address">3. ip dhcp excluded address</h4><p>这个考点的形式一般如下图所示：</p><div class="center"><style>.unmrfzuumcfb{}</style><img src="/2025/03/13/note06/note06_pic17.png" class="unmrfzuumcfb"></div><p>配置子网时，如果不想让某些IP地址参与DHCP地址分配，可以使用<code>ip dhcp excluded address &lt;被排除的起始IP地址&gt; &lt;被排除的终止IP地址&gt;</code>命令将目标IP地址排除。<br><br>所以这一空应填<code>excluded address</code>。</p><h4 id="4-lease租赁命令">4. lease租赁命令</h4><p>这个考点的形式一般如下图所示：</p><div class="center"><style>.svvecqnhcfdx{}</style><img src="/2025/03/13/note06/note06_pic18.png" class="svvecqnhcfdx"></div><p>在默认情况下，用户在DHCP服务器中的租赁时间为1天。但是也可以在DHCP Pool配置模式下，使用<code>lease &#123;day [hours] [minutes] | infinite&#125;</code>命令来更改租用时长（infinite指的是无限时间）。<br><br>如果题目中要求的租赁时间为5小时30分钟，则这一空中就应该填上<code>0 5 30</code>。</p><p>接下来以一道有两个子网号的题为例：</p><div class="center"><style>.vdyskbkqjsry{}</style><img src="/2025/03/13/note06/note06_pic28.png" class="vdyskbkqjsry"></div><h4 id="5-pos-framing-帧格式">5. pos framing 帧格式</h4><p>在配置路由器时，<code>pos framing</code>命令可以用来设置POS端口的帧格式，而帧格式题目中都会给出。因此46题的答案为<code>framing</code>。</p><h4 id="6-pos-flag命令">6. pos flag命令</h4><p>该命令的格式为<code>pos flag s1s0 &lt;数值&gt;</code>，当s1s0=00时表示SONET帧的数据，当s1s0=10（十进制下的2）时表示SDH帧的数据，因此47题的答案为<code>s1s0 2</code>。</p><h4 id="7-router-ospf-65">7. router ospf 65</h4><p><strong><code>router ospf 65</code>命令是用于在路由器上启用并配置OSPF路由协议的命令</strong>。该题目的考察形式可能是router ospf <em><strong>，也有可能是</strong></em> 65，按情况填写即可。故48题答案为<code>router ospf</code>。</p><h4 id="8-ip-route">8. ip route</h4><p><code>ip route</code>命令用于在路由器或者三层交换机上手动配置静态路由，可以指定数据包从源到目的地的路径。其格式为<code>ip route &lt;目标网络的IP地址&gt; &lt;目标网络的子网掩码&gt; &lt;下一跳路由器的IP地址&gt;</code>。<br><br>而在计算机三级的考察中，这条命令一般有两条考察情景：</p><ul><li>一是要配置的路由器是校园网内的路由器，这时路由器们都处在同一个子网下，可以直接通信，无需配置路由，因此前两个参数可以设置为<code>0.0.0.0</code>，而下一跳地址即为子网外路由器的IP地址。故50题的答案为<code>0.0.0.0 0.0.0.0 202.112.8.197</code>。</li><li>二是要配置的路由器在校园网外，在给出的例题的这种校园网内有多个IP地址的情况下（不是路由器的IP地址，而是云状物里的IP地址），第一个参数<code>目标网络的IP地址</code>不需要聚合，因为可能要执行<code>ip route</code>命令多次。但第二个参数<code>目标网络的子网掩码</code>则要填聚合后的IP的子网掩码。（类似地，在49题中，此中要填的子网掩码或通配符掩码也要填聚合后的）</li></ul><h4 id="9-ip-address">9. ip address</h4><p>注意区分<code>ip address</code>和<code>ip route</code>:</p><ul><li>前者的命令格式是<code>ip address &lt;该路由ip&gt; &lt;该路由掩码&gt;</code></li><li>后者的命令格式是<code>ip route &lt;目标网络的IP地址&gt; &lt;目标网络的子网掩码&gt; &lt;下一跳路由器的IP地址&gt;</code></li></ul><p>也还有一种情况是带loopback的<code>ip address</code>，如下图所示：</p><div class="center"><style>.sthjhdxyqkyp{}</style><img src="/2025/03/13/note06/note06_pic43.png" class="sthjhdxyqkyp"><style>.mntnpztsegsl{}</style><img src="/2025/03/13/note06/note06_pic42.png" class="mntnpztsegsl"></div><p>则此时答案为<code>192.167.166.6 255.255.255.255</code>。</p><h4 id="10-bandwidth">10. bandwidth</h4><p><code>bandwidth</code>命令是用来配置带宽的，其单位为Kbps。而题目中一般会给出以Gbps为单位的带宽配置要求，这两者之间的转换进制为10^6，对应作答即可。</p><h4 id="11-打开端口">11. 打开端口</h4><p>这个考点的形式一般如下图所示：</p><div class="center"><style>.mecqcfeurrjy{}</style><img src="/2025/03/13/note06/note06_pic37.png" class="mecqcfeurrjy"></div><p><code>no shutdown</code>命令用来打开端口。</p><h4 id="12-async（异步）">12. async（异步）</h4><p>这个考点的形式一般如下图所示：</p><div class="center"><style>.ffbdoynlqgew{}</style><img src="/2025/03/13/note06/note06_pic38.png" class="ffbdoynlqgew"></div><p><code>async default ip address &lt;ip&gt;</code>命令用来配置异步串行接口命令。</p><h4 id="13-封禁端口号">13. 封禁端口号</h4><p>定义一条“封禁所有目的端口号为1034的UDP数据包进入校园网”的命令为：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">access list 130 deny udp any any eq 1034<br>access list 130 permit ip any any<br></code></pre></td></tr></table></figure><h3 id="三、校园网类天选题型一：Catalyst6500的命令解析">三、校园网类天选题型一：Catalyst6500的命令解析</h3><p>这个考点的形式一般如下图所示：</p><div class="center"><style>.glptcnruqzld{}</style><img src="/2025/03/13/note06/note06_pic44.png" class="glptcnruqzld"></div><ol start="46"><li>刚开机时交换机要进入特权模式，故此题答案为<code>enable</code>。</li><li>设置VLAN信息，先设置jszx140的，配置格式为<code>set vlan &lt;VLANID&gt; &lt;端口号&gt;</code>，故答案为<code>130 5/2</code>。</li><li>同上，答案为<code>222 5/8</code>。</li><li>这里是要启动IEEE 802.1q协议，配置格式为<code>set trunk &lt;交换机端口号&gt; on dot1q</code>，故答案为<code>3/8 on dot1q</code>。</li><li>这里是要配置运行两个计算机的信息通过，答案为<code>3/8 vlan 130,222</code>。</li></ol><h3 id="四、校园网类天选题型二：办公网与商务网的综合运用">四、校园网类天选题型二：办公网与商务网的综合运用</h3><p>这个考点的形式一般如下图所示：</p><div class="center"><style>.lwxwmibhofnc{}</style><img src="/2025/03/13/note06/note06_pic45.png" class="lwxwmibhofnc"></div><ol start="46"><li>这里是要排除IP地址，故答案为<code>ip dhcp excluded-address</code>。</li><li>这里是要为地址池命名，故答案为<code>ip dhcp pool</code>。</li><li>配置语句为<code>network &lt;地址池地址&gt; &lt;地址池子网掩码&gt;</code>。</li><li>这里是要配置缺省网关地址，故答案为<code>default-router</code>。</li><li>地址租用，不再赘述。</li></ol><p>注：如果要配置DNS服务器的域名，则配置命令为<code>dns-server &lt;DNS服务器地址&gt;</code>。</p><h3 id="五、DHCP报文分析">五、DHCP报文分析</h3><div class="center"><style>.whvpzbcbdtyh{}</style><img src="/2025/03/13/note06/note06_pic19.jpg" class="whvpzbcbdtyh"><style>.tkztuewhkkjc{}</style><img src="/2025/03/13/note06/note06_pic20.jpg" class="tkztuewhkkjc"></div><p>这道题一般有以下几个考点：</p><h4 id="1-DHCP的工作流程">1. DHCP的工作流程</h4><div class="center"><style>.ouxfigbthxtr{}</style><img src="/2025/03/13/note06/note06_pic21.png" class="ouxfigbthxtr"></div>对应这一流程填空即可。<br><h4 id="2-对第二条报文的分析">2. 对第二条报文的分析</h4><p>这个考点的形式一般如下图所示：</p><div class="center"><style>.npzovufvtuvk{}</style><img src="/2025/03/13/note06/note06_pic22.png" class="npzovufvtuvk"></div><ul><li>对于第52题，我们要知道offer命令是由DHCP服务器发往客户端的。而在之前的request命令中，客户端是采用<strong>广播</strong>的方式向DHCP服务器发送请求的。也就是说，此时的客户端地址即为其广播地址。而52题所在的位置是DLC（数据链路控制）头部，也就是说这一部分是在数据链路层传播的，而数据链路层的传播途径是基于MAC地址的。所以52题的答案为客户端的广播MAC地址，为<code>ffffffffffff</code>。</li><li>53题同理，也应该填入客户端的广播地址，但此时已经到达IP地址部分，所以应填入IP地址形式的广播地址，为<code>255.255.255.255</code>。</li><li>根据最开始的示意图不难发现，DHCP的工作过程是通过UDP实现的，而且端口为67和68，与54题是正好对应的。因此此处应填入<code>UDP</code>。</li><li>55题要求填入服务器的IP地址，而在offer命令当中服务器IP地址即为其源地址，根据上下报文不难发现答案为<code>192.168.0.1</code>。</li></ul><h4 id="3-一共有5条报文的情况">3. 一共有5条报文的情况</h4><p>这个考点的形式一般如下图所示：</p><div class="center"><style>.wdbwjhnhdfqc{}</style><img src="/2025/03/13/note06/note06_pic41.png" class="wdbwjhnhdfqc"></div><p>这种题型的特殊点在于在除了先前提到的4种报文之外，又多了一种<code>release</code>报文（编号1所示，此时报文的源地址和目标地址仍为正常的客户机地址和DHCP服务器地址）。当客户端不再需要当前分配的IP地址时就会发送一条这样的报文，而DHCP服务器在收到Release报文之后就会将该IP地址标记为可用状态，并更新自身的地址池。<br><br>而随后进行的正常环节种，由于客户端还没有配置IP地址，它就只能采用广播通信的方式来进行报文发送，因此源地址和目标地址分别为<code>0.0.0.0</code>和<code>255.255.255.255</code>，随后也一直采用的是广播通信。</p><ul><li>因此，51题和52题的答案均为<code>255.255.255.255</code>。</li><li></li></ul><h4 id="4-零碎知识点">4. 零碎知识点</h4><ul><li>Hardware address length：这一条指网络硬件地址的长度，即6 bytes的Mac地址，故答案形式应为<code>DHCP:Hardware address length = 6 bytes</code>。</li></ul><h3 id="六、sniffer抓包工具">六、sniffer抓包工具</h3><div class="center"><style>.mvqxeovjebsy{}</style><img src="/2025/03/13/note06/note06_pic23.jpg" class="mvqxeovjebsy"><style>.jyqogqrwhbcl{}</style><img src="/2025/03/13/note06/note06_pic24.jpg" class="jyqogqrwhbcl"><style>.jcojhhdsdgmu{}</style><img src="/2025/03/13/note06/note06_pic25.jpg" class="jcojhhdsdgmu"></div><p>以样题为例：</p><div class="center"><style>.cpncoinwbqpp{}</style><img src="/2025/03/13/note06/note06_pic26.png" class="cpncoinwbqpp"></div><ul><li><p>对于56题，我们首先需要知道前4条报文是进行DNS解析的，和前文中提到过的DHCP工作流程类似，第5条报文肯定是客户端向服务器发送需要解析DNS的请求，那么此时<code>Source Address</code>即为客户端地址，<code>Dest Address</code>即为服务器地址。此时它们分别为<code>202.113.64.137</code>和<code>202.113.64.129</code>，不难发现它们前28位相同，故此题答案为<code>28</code>。</p></li><li><p>57题要求填入执行的协议。我们首先要明白两点，一是该GUI下方的信息指的是阴影的第18条报文的具体信息；二是这道题一般会考察三种命令：</p><ul><li>tracert命令：当Summary中出现和题目中类似的<code>Time to live</code>（TTL，表示数据包在网络中可经过的最大跳数）字眼的时候我们可以确定执行的是<code>tracert</code>命令。这是由于该命令通过逐步增加TTL值，利用<strong>ICMP</strong>超时消息来追踪数据包的路径。当TTL衰减为0时，路由器就会丢弃此包，路由器上的ICMP就会发出一个“超时”的ICMP报文。</li><li>ping命令：当Summary中出现<code>echo reply</code>的字眼的时候可以确定执行的是<code>ping</code>命令（如下图所示）。这是由于ping命令的工作原理是通过发送<strong>ICMP</strong> Echo Request报文，并等待目标主机返回ICMP Echo Reply报文。</li></ul> <div class="center"> <style>.txtmqoixghiw{}</style><img src="/2025/03/13/note06/note06_pic27.png" class="txtmqoixghiw"> </div><p>因此这道题执行的协议是<code>ICMP</code>。</p><ul><li>ftp命令：执行<code>ftp</code>协议本身。</li></ul></li><li><p>58题应填入目标地址的域名，前4条报文结束对DNS服务器的访问之后即开始访问目标地址，根据第9条报文发现答案为<code>mail.tj.edu.cn</code>。</p></li><li><p>59题，域名服务器即为DNS服务器，其IP地址为第5条报文的目的地址<code>202.113.64.3</code>。</p></li><li><p>60题，<code>tracert mail.tj.edu.cn</code>。</p></li></ul><p>下面将继续根据真题分析还没提到的考点：</p><div class="center"><style>.kqlnimsxripj{}</style><img src="/2025/03/13/note06/note06_pic29.png" class="kqlnimsxripj"></div><ul><li><p>56题，URL的地址。这类题目要填出目标地址的域名并不困难，但URL和域名的不同之处在于其还有协议名。而要确定协议名是<code>http</code>，<code>https</code>还是<code>ftp</code>，可以根据端口号进行判断，它们的端口号依次为<code>80</code>, <code>443</code>和<code>21</code>。也可以在报文的详细信息中的<code>Destination port</code>一栏中找到对应的信息。故此题答案为<code>https://mail.lb.pku.edu.cn</code>。</p></li><li><p>58题，这里考察的是TCP的三次握手，其过程如下图所示：</p> <div class="center"> <style>.ocgdrcjunvmy{}</style><img src="/2025/03/13/note06/note06_pic30.png" class="ocgdrcjunvmy"> </div> 因此，①应该为第27条报文中的`SEQ`值加一，为`486042695`；②应该为第29条报文中的`ACK`值减一，为`1327742113`。</li><li><p>59题，考察的协议号与协议名的对应关系如下所示：</p> <div class="center"><table><thead><tr><th style="text-align:center">协议号</th><th style="text-align:center">协议名</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">IMCP</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">TCP</td></tr><tr><td style="text-align:center">17</td><td style="text-align:center">UDP</td></tr></tbody></table> </div> 故此题答案为`6`。</li></ul><div class="center"><style>.fvshyqxwwcnu{}</style><img src="/2025/03/13/note06/note06_pic35.png" class="fvshyqxwwcnu"></div><ul><li>58题，第18条报文是SYN报文，其对应的Flags是<code>02</code>，故答案为<code>02</code>。</li><li>60题，当需要回放捕获的数据包时，可以使用Sniffer内置的<code>数据包生成器</code>。</li></ul><div class="center"><style>.vvpwkgrdbogg{}</style><img src="/2025/03/13/note06/note06_pic39.png" class="vvpwkgrdbogg"><style>.hrrykxlwgyxn{}</style><img src="/2025/03/13/note06/note06_pic40.png" class="hrrykxlwgyxn"></div><p>这道题初看很难有思路，因为虽然直到这段报文是在一个Reply的过程中的，但具体是<code>offer</code>还是<code>ack</code>似乎就无从下手了。但实际上我们可以根据倒数第五行的<code>DHCP：Message Type=5</code>来判断具体的报文类型。以下是具体的参考：</p><div class="center"><table><thead><tr><th style="text-align:center">Message Type</th><th style="text-align:center">对应的报文类型</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">DHCP Discover</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">DHCP Offer</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">DHCP Request</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">DHCP Decline</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">DHCP Ack</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">DHCP Negative Acknowledgment</td></tr></tbody></table></div><p>因此不难判断此报文是<code>Ack</code>阶段的，其余的问题也就迎刃而解了。</p><h2 id="应用题">应用题</h2><h3 id="一、最常见的一种题型">一、最常见的一种题型</h3><h4 id="1-路由聚合">1. 路由聚合</h4><p>这道题的考察形式一般如下所示：</p><div class="center"><style>.mybhwnbprngu{}</style><img src="/2025/03/13/note06/note06_pic32.png" class="mybhwnbprngu"></div><p>首先简单介绍一下路由器中S端口和E端口的区别，前者是基于点对点或点对多点连接的，用于广域网连接；后者则是基于广播和多播通信的，用于局域网连接。<br><br>其次是目的网络的求法，其顺序如下图所示：</p><div class="center"><style>.vdteftjsrght{}</style><img src="/2025/03/13/note06/note06_pic33.png" class="vdteftjsrght"></div><p>分别将对应的IP网段聚合即可。<br><br>其中的三路由聚合比较特殊，有以下几个注意事项：</p><ul><li>子网掩码的最大长度为29位，高于29位时要限制在29位。</li><li>最后的被划分的区域不能全为0或者全为1，如果出现这种情况要对应地缩短子网掩码长度，直到满足条件为止。</li></ul><h4 id="2-设备功能">2. 设备功能</h4><ul><li>如果需要监听路由器A和B之间的所有流量，可以在该链路中串入一个<strong>分路器</strong>。</li><li>如果要检测发送到服务器群的数据包，如果发现恶意数据包，系统发出警报并阻断攻击，这种设备是<strong>IPS</strong>。</li><li>如果想将图中网络接入Internet，那么在跟路由器的上联口应串入专用设备，那么这个设备必须具有的功能是<strong>NAT功能</strong>。</li><li>如果该网络采用Windows 2003域用户管理功能来实现网络资源的访问控制，那么域用户信息应该存在区域控制器的<code>Active Directory</code>当中。</li><li>出现“第三方监控”和“某路由器的运行状态”，协议为<code>SNMP</code>。</li></ul><h4 id="3-设备的安装位置">3. 设备的安装位置</h4><p>这道题的考察形式一般如下所示：</p><div class="center"><style>.jrhedhonsuts{}</style><img src="/2025/03/13/note06/note06_pic34.png" class="jrhedhonsuts"></div>在题干图示中找到对应的网段并将对应的路由器和端口号填入即可。<h4 id="4-可新增路由器数量">4. 可新增路由器数量</h4><p>这道题的考察形式一般如下所示：</p><div class="center"><style>.jgmlywentlss{}</style><img src="/2025/03/13/note06/note06_pic46.png" class="jgmlywentlss"></div><p>如果要求路由器RF可再接入的路由器的数量的话，基本原理就是求出还剩多少个可用的IP地址：首先是进行三路由聚合，得到RF的E0口聚合后的IP地址为<code>10.7.1.72/29</code>，也就是说主机地址的位数有3位。那么除去RF、RC和RD已经占有的三位，以及全0和全1不可用的两位，那么答案就是<code>8-3-2=3</code>。</p><h4 id="5-防火墙的配置">5. 防火墙的配置</h4><ul><li>部分内网需要访问外网，需要使用的两个配置命令依次是<code>nat</code>和<code>global</code>。</li><li>若允许内网的FTP服务器向外网提供服务，需要使用的配置命令为<code>fixup protocol ftp</code>。</li><li>若需要为内网的一个服务器配置一个公网IP，配置命令为<code>static</code>。</li></ul><h3 id="二、天选题型">二、天选题型</h3><p>这道题的考察形式一般如下所示：</p><div class="center"><style>.qemctznkefbl{}</style><img src="/2025/03/13/note06/note06_pic47.png" class="qemctznkefbl"></div><ol start="61"><li>显然是<code>路由器</code>，因为路由器能够根据IP地址进行数据包的路由选择，这是连接到互联网所必需的。</li><li><code>位置2</code>，在网络架构中，防火墙通常放置在网络的边界上，即局域网与外部网络的连接点，这样可以确保所有流量都能经过防火墙的检查。</li><li><code>Gi2/16</code>。</li><li><code>新增集线器或TAP分流</code>，不再赘述。</li></ol>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机网络</tag>
      
      <tag>计算机等级考试</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>学习笔记_25_03_12</title>
    <link href="/2025/03/12/note05/"/>
    <url>/2025/03/12/note05/</url>
    
    <content type="html"><![CDATA[<h1>学习笔记_25_03_12</h1><p>本次笔记将分为两部分，Python练习（全部来源于洛谷）和PHP语法学习</p><h2 id="Reference">Reference</h2><ul><li><a href="https://www.runoob.com/php/php-coalescing-operator.html">PHP NULL 合并运算符</a></li><li><a href="https://blog.csdn.net/WinstonLau/article/details/88537552">input标签的value属性详解</a></li></ul><h2 id="Python练习">Python练习</h2><h3 id="P2404-自然数的拆分问题"><a href="https://www.luogu.com.cn/problem/P2404">P2404 自然数的拆分问题</a></h3><h4 id="题目描述">题目描述</h4><p>任何一个大于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 的自然数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，总可以拆分成若干个小于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 的自然数之和。现在给你一个自然数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，要求你求出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 的拆分成一些数字的和。每个拆分后的序列中的数字从小到大排序。然后你需要输出这些序列，其中字典序小的序列需要优先输出。</p><h4 id="输入格式">输入格式</h4><p>输入：待拆分的自然数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>。</p><h4 id="输出格式">输出格式</h4><p>输出：若干数的加法式子。</p><h4 id="输入输出样例-1">输入输出样例 #1</h4><h5 id="输入-1">输入 #1</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">7<br></code></pre></td></tr></table></figure><h5 id="输出-1">输出 #1</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs txt">1+1+1+1+1+1+1<br>1+1+1+1+1+2<br>1+1+1+1+3<br>1+1+1+2+2<br>1+1+1+4<br>1+1+2+3<br>1+1+5<br>1+2+2+2<br>1+2+4<br>1+3+3<br>1+6<br>2+2+3<br>2+5<br>3+4<br></code></pre></td></tr></table></figure><h4 id="说明-提示">说明/提示</h4><p>数据保证，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">2\leq n\le 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span>。</p><h4 id="问题解决">问题解决</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">MyPrint</span>(<span class="hljs-params">t</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, t):<br>        <span class="hljs-built_in">print</span>(a[i], end=<span class="hljs-string">&#x27;+&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(a[t], end=<span class="hljs-string">&#x27;\n&#x27;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">s, t</span>): <span class="hljs-comment"># s表示要拆分的数，t来确定a数组的索引</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(a[t-<span class="hljs-number">1</span>], s+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> i &lt; n: <span class="hljs-comment"># 防止输出n自身</span><br>            a[t] = i<br>            s -= i<br>            <span class="hljs-keyword">if</span> s == <span class="hljs-number">0</span>:<br>                MyPrint(t)<br>            <span class="hljs-keyword">else</span>:<br>                dfs(s, t+<span class="hljs-number">1</span>)<br>            s += i  <span class="hljs-comment"># 进行回溯以输出所有可能的结果</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    a = [<span class="hljs-number">1</span>] * <span class="hljs-number">1000</span> <span class="hljs-comment"># 开辟储存拆分结果的数组</span><br><br>    dfs(n, <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h3 id="P1596-USACO10OCT-Lake-Counting-S"><a href="https://www.luogu.com.cn/problem/P1596">P1596 [USACO10OCT] Lake Counting S</a></h3><h4 id="题目描述-2">题目描述</h4><p>Due to recent rains, water has pooled in various places in Farmer John’s field, which is represented by a rectangle of N x M (1 &lt;= N &lt;= 100; 1 &lt;= M &lt;= 100) squares. Each square contains either water (‘W’) or dry land (‘.’). Farmer John would like to figure out how many ponds have formed in his field. A pond is a connected set of squares with water in them, where a square is considered adjacent to all eight of its neighbors. Given a diagram of Farmer John’s field, determine how many ponds he has.</p><h4 id="输入格式-2">输入格式</h4><p>Line 1: Two space-separated integers: N and M * Lines 2…N+1: M characters per line representing one row of Farmer John’s field. Each character is either ‘W’ or ‘.’. The characters do not have spaces between them.</p><h4 id="输出格式-2">输出格式</h4><p>Line 1: The number of ponds in Farmer John’s field.</p><h4 id="输入输出样例-1-2">输入输出样例 #1</h4><h5 id="输入-1-2">输入 #1</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs txt">10 12<br>W........WW.<br>.WWW.....WWW<br>....WW...WW.<br>.........WW.<br>.........W..<br>..W......W..<br>.W.W.....WW.<br>W.W.W.....W.<br>.W.W......W.<br>..W.......W.<br></code></pre></td></tr></table></figure><h5 id="输出-1-2">输出 #1</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">3<br></code></pre></td></tr></table></figure><h4 id="说明-提示-2">说明/提示</h4><p>OUTPUT DETAILS: There are three ponds: one in the upper left, one in the lower left, and one along the right side.</p><h4 id="解决方案">解决方案</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br>sys.setrecursionlimit(<span class="hljs-number">10000</span> + <span class="hljs-number">13</span>)  <span class="hljs-comment">#限制递归层数，否则有一个点RE</span><br><br>dir_x = [-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]<br>dir_y = [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x, y</span>):<br>    geo[x][y] = <span class="hljs-string">&#x27;.&#x27;</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">8</span>):<br>        nx = x + dir_x[i]<br>        ny = y + dir_y[i]<br>        <span class="hljs-keyword">if</span> nx &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> nx &gt;= n <span class="hljs-keyword">or</span> ny &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> ny &gt;= m <span class="hljs-keyword">or</span> geo[nx][ny] == <span class="hljs-string">&#x27;.&#x27;</span>:<br>            <span class="hljs-keyword">continue</span><br>        dfs(nx, ny)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    n, m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().split())<br>    geo = [[<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">101</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">101</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        string = <span class="hljs-built_in">input</span>()<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            geo[i][j] = string[j]<br><br>    count = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-keyword">if</span> geo[i][j] == <span class="hljs-string">&#x27;W&#x27;</span>:<br>                dfs(i, j)<br>                count += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>首先要介绍的是<code>setrecursionlimit()</code>函数，这个函数可以用来设置最大递归深度，可以用来避免<code>RuntimeError: Maximum recursion depth exceeded</code>类型的报错。<br><br>其次是想写一些我对P1596类型题目的理解，这些问题的本质其实都是染色问题，题目要求出的不是路径或解决方案的个数，而是“色块”的个数，这个时候就往往只需要有搜索并标记的过程而不需要有回溯的步骤，类似的题目还有<a href="https://www.luogu.com.cn/problem/P1101">P1101 单词方阵</a>和<a href="https://www.luogu.com.cn/problem/P1162">P1162 填涂颜色</a>。<br><br>而关于求解决方案数的题目，例如迷宫中点与点之间有多少种路可以走、一个数字能有多少种拆分和的方法等，这些问题往往都可以用树来表示，那么在我们进行深度优先搜索的时候，我们往往需要在一条枝干上走到头的时候重新走到另一条枝干上，这种时候我们就需要进行回溯。这种类型的题目有<a href="https://www.luogu.com.cn/problem/P1605">P1605 迷宫</a>和<a href="https://www.luogu.com.cn/problem/P2404">P2404 自然数的拆分问题</a>等。<br></p><h2 id="PHP学习">PHP学习</h2><h3 id="NULL合并运算符">NULL合并运算符</h3><p>NULL合并运算符会判断变量是否存在且值不为NULL，如果是，它将返回自身的值，否则将返回它的第二个操作数。<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">// 获取 $_GET[&#x27;site&#x27;] 的值，如果不存在返回 &#x27;菜鸟教程&#x27;</span><br><span class="hljs-variable">$site</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;site&#x27;</span>] ?? <span class="hljs-string">&#x27;菜鸟教程&#x27;</span>;<br><br><span class="hljs-keyword">print</span>(<span class="hljs-variable">$site</span>);<br><span class="hljs-keyword">print</span>(PHP_EOL); <span class="hljs-comment">// PHP_EOL 为换行符</span><br><br><br><span class="hljs-comment">// 以上代码等价于</span><br><span class="hljs-variable">$site</span> = <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;site&#x27;</span>]) ? <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;site&#x27;</span>] : <span class="hljs-string">&#x27;菜鸟教程&#x27;</span>;<br><br><span class="hljs-keyword">print</span>(<span class="hljs-variable">$site</span>);<br><span class="hljs-keyword">print</span>(PHP_EOL);<br><span class="hljs-comment">// ?? 链</span><br><span class="hljs-variable">$site</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;site&#x27;</span>] ?? <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;site&#x27;</span>] ?? <span class="hljs-string">&#x27;菜鸟教程&#x27;</span>;<br><br><span class="hljs-keyword">print</span>(<span class="hljs-variable">$site</span>);<br><span class="hljs-meta">?&gt;</span><br><br><span class="hljs-comment">// 输出：</span><br><span class="hljs-comment">// 菜鸟教程</span><br><span class="hljs-comment">// 菜鸟教程</span><br><span class="hljs-comment">// 菜鸟教程</span><br></code></pre></td></tr></table></figure><h3 id="errors数组的使用">$errors数组的使用</h3><h4 id="完整表单的验证">完整表单的验证</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">include_once</span> <span class="hljs-string">&#x27;includes/header.php&#x27;</span>;<br><span class="hljs-variable">$errors</span> = [];<br><br><span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;submit&#x27;</span>]))<br>&#123;<br>    <span class="hljs-comment">// 点击&quot;Submit&quot;按钮之后就到了这一步</span><br>    <span class="hljs-comment">// 如果下边代码为空的话页面将会崩溃</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$errors</span> == <span class="hljs-number">0</span>))<br>    &#123;<br>        <span class="hljs-comment">// 如果没有错误就正常运行，处理表单数据</span><br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-comment">// 如果有错误就重新加载表单，重新输入正确数据</span><br>        <span class="hljs-keyword">include_once</span> <span class="hljs-string">&#x27;includes/data_form.php&#x27;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>    <span class="hljs-keyword">include_once</span> <span class="hljs-string">&#x27;includes/data_form.php&#x27;</span>;<br>&#125;<br><span class="hljs-keyword">include_once</span> <span class="hljs-string">&#x27;includes/footer.php&#x27;</span>;<br><br><span class="hljs-comment">// 不难发现其实所有要被引用的文件都不会丢失</span><br><span class="hljs-comment">// 这样写的好处是相当于写了个While True循环直到问题被解决为止</span><br></code></pre></td></tr></table></figure><h4 id="报错功能的实现">报错功能的实现</h4><p>如果在有需求的输入场景下，例如表单中要求用户输入自己的姓名，但他输入了一串数字，这显然是不能接受的，我们需要通过一种方式来提醒他按照目标格式进行输入。那么我们就要尝试实现报错功能。<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$errors</span> = []; <span class="hljs-comment">//创建一个error数组用来存储错误信息</span><br><span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;submit&#x27;</span>]))<br>&#123;<br>    <span class="hljs-variable">$fname</span> = <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;fname&#x27;</span>]??<span class="hljs-string">&#x27;&#x27;</span>); <span class="hljs-comment">// 在不输入特定字符的情况下，trim()函数用来删除字符串两侧的空格</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$fname</span>) == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-variable">$errors</span>[<span class="hljs-string">&#x27;fname&#x27;</span>] = <span class="hljs-string">&#x27;Missing the first name!&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">ctype_alpha</span>(<span class="hljs-variable">$fname</span>)) <span class="hljs-comment">// Ctype是PHP中实现判断字符串类型的函数</span><br>    &#123;<br>        <span class="hljs-variable">$errors</span>[<span class="hljs-string">&#x27;fname&#x27;</span>] = <span class="hljs-string">&#x27;Please enter alpha charactors!&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>在实际应用中我们可以将PHP嵌入到HTML当中：<br></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>First Name:<br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;error&quot;</span>&gt;</span><br>        &lt;?=$errors[&#x27;fname&#x27;]??&#x27;&#x27;;?&gt;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;fname&quot;</span> <span class="hljs-attr">maxlength</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&lt;?=$fname??&#x27;&#x27;;?&gt;&quot;</span> /&gt;</span><br>// 在HTML当中，input标签中的value属性的用法是与type属性紧密相关的<br>// 详细用法请移步Reference中给出的友情链接<br></code></pre></td></tr></table></figure><p>这样一来，当用户输入不合规范的内容之后，网页将会输出报错信息。<br></p><h3 id="可选择的表单控件的实现">可选择的表单控件的实现</h3><h4 id="可下拉菜单的实现">可下拉菜单的实现</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;label&gt;请选择你的校区：&lt;/label&gt;<br>&lt;small <span class="hljs-class"><span class="hljs-keyword">class</span>=&#x27;<span class="hljs-title">error</span>&#x27;&gt;</span><br><span class="hljs-class">    &lt;?= $<span class="hljs-title">errors</span>[&#x27;<span class="hljs-title">campus</span>&#x27;]??&#x27;&#x27;; ?&gt;</span><br><span class="hljs-class">&lt;/<span class="hljs-title">small</span>&gt;</span><br><span class="hljs-class">&lt;<span class="hljs-title">select</span> <span class="hljs-title">name</span>=&quot;<span class="hljs-title">campus</span>&quot;&gt;</span><br><span class="hljs-class">    &lt;?<span class="hljs-title">php</span></span><br><span class="hljs-class">    $<span class="hljs-title">campuses</span> = [&quot;&quot;, &quot;明伦校区&quot;, &quot;金明校区&quot;, &quot;龙子湖校区&quot;];</span><br><span class="hljs-class">    <span class="hljs-title">foreach</span> ($<span class="hljs-title">campuses</span> <span class="hljs-title">as</span> $<span class="hljs-title">value</span>)</span><br><span class="hljs-class">    </span>&#123;<br>        <span class="hljs-variable">$campus</span> = <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;campus&#x27;</span>] ?? <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-variable">$select</span> = (<span class="hljs-variable">$value</span> == <span class="hljs-variable">$campus</span>) ? <span class="hljs-string">&#x27;selected&#x27;</span> : <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;option value=&#x27;<span class="hljs-subst">$value</span>&#x27; <span class="hljs-subst">$select</span>&gt;<span class="hljs-subst">$value</span>&lt;/option&gt;&quot;</span>;<br>    &#125;<br>    <span class="hljs-meta">?&gt;</span><br>&lt;/select&gt;<br></code></pre></td></tr></table></figure><h4 id="单选按钮的实现">单选按钮的实现</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;label&gt;年级：<br>    &lt;span <span class="hljs-class"><span class="hljs-keyword">class</span>=&#x27;<span class="hljs-title">error</span>&#x27;&gt;</span><br><span class="hljs-class">        &lt;?= $<span class="hljs-title">errors</span>[&#x27;<span class="hljs-title">grade</span>&#x27;] ?? &#x27;&#x27;; ?&gt;</span><br><span class="hljs-class">    &lt;/<span class="hljs-title">span</span>&gt;</span><br><span class="hljs-class">&lt;/<span class="hljs-title">label</span>&gt;</span><br><span class="hljs-class">&lt;?<span class="hljs-title">php</span></span><br><span class="hljs-class">$<span class="hljs-title">grades</span> = [&quot;大一&quot;, &quot;大二&quot;, &quot;大三&quot;, &quot;大四&quot;];</span><br><span class="hljs-class"><span class="hljs-title">foreach</span> ($<span class="hljs-title">grades</span> <span class="hljs-title">as</span> $<span class="hljs-title">g</span>)</span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-variable">$grade</span> = <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;grade&#x27;</span>] ?? <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-variable">$checked</span> = (<span class="hljs-variable">$g</span> == <span class="hljs-variable">$grade</span>) ? <span class="hljs-string">&#x27;checked&#x27;</span> : <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;label class=radio-inline&gt;&lt;input type=&#x27;radio&#x27; name=&#x27;grade&#x27; value=&#x27;<span class="hljs-subst">$g</span>&#x27; <span class="hljs-subst">$checked</span>&gt;<span class="hljs-subst">$g</span>&lt;/label&gt;&quot;</span>;<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dfs</tag>
      
      <tag>python</tag>
      
      <tag>洛谷</tag>
      
      <tag>php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>学习笔记_25_03_11</title>
    <link href="/2025/03/11/note04/"/>
    <url>/2025/03/11/note04/</url>
    
    <content type="html"><![CDATA[<h1>学习笔记_25_03_11</h1><p>  以下是关于VUC中class activities中的一些问题。<br></p><h2 id="Reference">Reference</h2><ul><li><a href="https://www.php.net/manual/zh/reserved.variables.server.php">$_SERVER数组</a></li><li><a href="https://www.w3schools.com/php/php_form_validation.asp">PHP表单验证</a></li><li><a href="https://www.runoob.com/php/func-string-htmlspecialchars.html">PHP htmlspecialchars() 函数</a></li></ul><h2 id="SERVER数组、PHP-SELF变量和action的安全性">$_SERVER数组、PHP_SELF变量和action的安全性</h2><blockquote><p>$_SERVER 是一个包含了诸如头信息（header）、路径（path）、以及脚本位置（script locations）等信息的 array。这个数组中的条目由 Web 服务器创建，所以不能保证每个 Web 服务器都提供全部条目；服务器可能会忽略一些，或者提供此处没有列举出来的其它内容。然而，大部分变量在 » CGI 1.1 规范中都有说明，并且很可能会定义。</p></blockquote><p>  其中，PHP_SELF就是其中包含的一个变量，其返回当前执行脚本的文件名。通过使用这一变量，我们可以在编写PHP文件时获得一种更加通用的架构，就如同相对路径一样，更加广泛，不再拘泥于不同的文件名。这也使得我们在修改文件名时不必再更改具体的代码。<br><br>  比如说：<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;form action=<span class="hljs-string">&quot;&lt;?=<span class="hljs-subst">$_SERVER</span>[&#x27;PHP_SELF&#x27;]; ?&gt;&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span>&gt;<br><span class="hljs-comment">// 在PHP语法中, &lt;?= ... ?&gt; 是一种&lt;?php echo ...; ?&gt;的简写形式</span><br><span class="hljs-comment">// 它将输出$_SERVER[&#x27;PHP_SELF&#x27;]的值</span><br></code></pre></td></tr></table></figure><p>  而如果要考虑action变量的安全性的话，我们可以使用<code>htmlspecialchars()</code>函数，例如：<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;form action=<span class="hljs-string">&quot;&lt;?=htmlspecialchars(<span class="hljs-subst">$_SERVER</span>[&#x27;PHP_SELF&#x27;]); ?&gt;&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span>&gt;<br></code></pre></td></tr></table></figure><p>  这里我们要防范的是跨站点脚本(XSS)攻击，这是一种黑客在表单中提交恶意代码来使得表单将提交到另一个地址来窃取用户数据的攻击方法。<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// 例如我们现在在test_form.php文件中有以下表单</span><br>&lt;form method=<span class="hljs-string">&quot;post&quot;</span> action=<span class="hljs-string">&quot;&lt;?=<span class="hljs-subst">$_SERVER</span>[&#x27;PHP_SELF&#x27;];?&gt;&quot;</span>&gt;<br><br><span class="hljs-comment">// 如果现在user在其中提交了一个正常的URL</span><br><span class="hljs-comment">// 例如：“http://www.example.com/test_form.php”</span><br><span class="hljs-comment">// 则这段代码将被转换为：</span><br>&lt;form method=<span class="hljs-string">&quot;post&quot;</span> action=<span class="hljs-string">&quot;test_form.php&quot;</span>&gt;<br><br><span class="hljs-comment">// 但如果hacker输入一段恶意代码，例如：</span><br><span class="hljs-comment">// http://www.example.com/test_form.php/%22%3E%3Cscript%3Ealert(&#x27;hacked&#x27;)%3C/script%3E</span><br><span class="hljs-comment">// 那么这段代码将被转换为：</span><br>&lt;form method=<span class="hljs-string">&quot;post&quot;</span> action=<span class="hljs-string">&quot;test_form.php/&quot;</span>&gt;&lt;script&gt;<span class="hljs-title function_ invoke__">alert</span>(<span class="hljs-string">&#x27;hacked&#x27;</span>)&lt;/script&gt;<br><span class="hljs-comment">// 这就将造成偏离网站创造者本意的活动</span><br></code></pre></td></tr></table></figure><p>  而<code>htmlspecialchars()</code>函数是一种将预定义的字符<code>&lt;</code>、<code>&gt;</code>等转换为HTML实体的函数。<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$str</span> = <span class="hljs-string">&quot;This is some &lt;b&gt;bold&lt;/b&gt; text.&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">htmlspecialchars</span>(<span class="hljs-variable">$str</span>);<br><span class="hljs-meta">?&gt;</span><br><br><span class="hljs-comment">// HTML输出：</span><br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;body&gt;<br>This is some &amp;lt;b&amp;gt;bold&amp;lt;/b&amp;gt; text.<br>&lt;/body&gt;<br>&lt;/html&gt;<br><br><span class="hljs-comment">// 网页输出：</span><br>This is some &lt;b&gt;bold&lt;/b&gt; text.<br></code></pre></td></tr></table></figure><p>  那么上边提到的恶意代码就将被转换为：<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;form method=<span class="hljs-string">&quot;post&quot;</span> action=<span class="hljs-string">&quot;test_form.php/&amp;quot;&amp;gt;&amp;lt;script&amp;gt;alert(&#x27;hacked&#x27;)&amp;lt;/script&amp;gt;&quot;</span>&gt;<br></code></pre></td></tr></table></figure><p>  这将不会造成任何损失。<br></p>]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PHP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>学习笔记_25_03_08</title>
    <link href="/2025/03/08/note03/"/>
    <url>/2025/03/08/note03/</url>
    
    <content type="html"><![CDATA[<style>.center {  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><h1>学习笔记_25_03_08</h1><p>  关于VUC上<a href="https://vucollaborate.vu.edu.au/d2l/lms/quizzing/user/quiz_summary.d2l?qi=517533&amp;ou=2139027">Topic 1 - Reviosn Quiz</a>, <a href="https://vucollaborate.vu.edu.au/d2l/lms/quizzing/user/quiz_summary.d2l?qi=517534&amp;ou=2139027">Topic 2 - Reviosn Quiz</a>和<a href="https://vucollaborate.vu.edu.au/d2l/lms/quizzing/user/quiz_summary.d2l?qi=517535&amp;ou=2139027">Topic 3 - Reviosn Quiz</a>的错题总结和相关知识点的整理。<br></p><h2 id="number-format-函数">number_format()函数</h2><p class="note note-light">&emsp;&emsp;Qus 01:<br>&emsp;&emsp;To round and format the value of a variable named $number to 3 decimal places anostore it in a variable named $number formatted, you code ...<br>&emsp;&emsp;a) \$number_formatted = number_format(\$number, 3);<br>&emsp;&emsp;b) \$number_formatted = number_format($number, 3, round);<br>&emsp;&emsp;c) \$number_formatted = format_number(\$number, 3);<br>&emsp;&emsp;d) \$number_formatted = format_number(\$number, 3, round);<br></p><hr>&emsp;&emsp;这道题涉及到了PHP中的number_format()函数，其语法为：<br><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">number_format(number,decimals,decimalpoint,separator)<br></code></pre></td></tr></table></figure><div class="center"><table><thead><tr><th style="text-align:center">参数</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">number</td><td style="text-align:center">必需，用来填充需要被格式化的变量或数字。</td></tr><tr><td style="text-align:center">decimals</td><td style="text-align:center">可选，规定保留几位小数</td></tr><tr><td style="text-align:center">decimalpoint</td><td style="text-align:center">可选，规定用作小数点的字符串</td></tr><tr><td style="text-align:center">separator</td><td style="text-align:center">可选，规定用作千位分隔符的字符串</td></tr></tbody></table></div>&emsp;&emsp;综上所述，这道题的答案为a）<br><br><br><h2 id="PHP中的转义字符">PHP中的转义字符</h2><p class="note note-light">&emsp;&emsp;Qus 02:<br>&emsp;&emsp;lf you need to print the following line using the echo statement with **double quotes**.<br>&emsp;&emsp;I paid a "ransom" of $rent for my \'landlord \'<br>&emsp;&emsp;What should be the 3rd line in the following code fragment?<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$rent</span> = <span class="hljs-number">5000</span>;<br><br></code></pre></td></tr></table></figure><p class="note note-light">&emsp;&emsp;a) echo "l paid a "ransom" of \\$rent for my \\'landlord \\'";<br>&emsp;&emsp;b) echo "l paid a \\"ransom\\" of \\$rent for my \\'landlord \\'";<br>&emsp;&emsp;c) echo "l paid a \\"ransom" of $rent for my \\'landlord \\'";<br>&emsp;&emsp;d) echo "l paid a \\"ransom\\" of $rent for my \\\\'landlord \\\\'";<br></p><hr>&emsp;&emsp;首先需要明确的是在PHP中双引号和单引号用法上的区别：<br>&emsp;&emsp;单引号中的内容会被识别为纯文本，即PHP不会解析其中的变量或者特殊字符。<br>&emsp;&emsp;双引号则相反，它将允许PHP解析字符串中的特殊字符。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$name</span> = <span class="hljs-string">&quot;world&quot;</span><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;Hello $name!&#x27;</span>; <span class="hljs-comment">//输出：Hello $name!</span><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Hello <span class="hljs-subst">$name</span>!&quot;</span>; <span class="hljs-comment">//输出：Hello world！</span><br></code></pre></td></tr></table></figure><p>  因此，在题目中要求我们采用双引号进行输出的时候，为了避免PHP解析其中的变量和特殊字符，我们需要使用转义字符，即<code>\</code>。即在需要输出的语句中的<code>$</code>,<code>'</code>,<code>&quot;</code>等特殊字符前依次添加一个<code>\</code>即可。<br><br>  综上所述，这道题的答案为b）<br></p><p><br><br></p><h2 id="foreach循环">foreach循环</h2><p class="note note-light">&emsp;&emsp;Qus 03:<br> &emsp;&emsp;Which of the following loop constructs in PHP will print out each team in the array $nbaTeams<br> &emsp;&emsp;a) for ($i= 0; $i< count($nbaTeams); $i++) echo $nbaTeams[ ]."< br>";<br> &emsp;&emsp;b) foreach ($team as $nbaTeams) echo $team."< br>";<br> &emsp;&emsp;c) foreach ($nbaTeams as $team) echo $team."< br>";<br> &emsp;&emsp;d) for ($i= 0; $i< count(nbaTeams); $i++) echo $nbaTeams[ $i]."< br>";<br> </p><hr>&emsp;&emsp;foreach循环只适用于数组，并用于遍历数组中的每个键值对，其语法为：<br> <figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">foreach($array as $value)<br>&#123;<br>    code to be executed;<br>&#125;<br></code></pre></td></tr></table></figure><p>  其有以下几种基本用法：<br><br>  <strong>一、遍历数组的值</strong><br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$xvs</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;GCC&quot;</span>, <span class="hljs-string">&quot;ZBN&quot;</span>, <span class="hljs-string">&quot;YZY&quot;</span>, <span class="hljs-string">&quot;JYH&quot;</span>, <span class="hljs-string">&quot;XF&quot;</span>);<br><span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$cars</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$value</span>)<br>&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$value</span>&lt;br&gt;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>  输出：<br></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">GCC<br>ZBN<br>YZY<br>JYH<br>XF<br></code></pre></td></tr></table></figure><p>  此处的语法和Python中的For循环就很像，可以辅助理解：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">xvs = [<span class="hljs-string">&quot;GCC&quot;</span>, <span class="hljs-string">&quot;ZBN&quot;</span>, <span class="hljs-string">&quot;YZY&quot;</span>, <span class="hljs-string">&quot;JYH&quot;</span>, <span class="hljs-string">&quot;XF&quot;</span>]<br><span class="hljs-keyword">for</span> xv <span class="hljs-keyword">in</span> xvs:<br>    <span class="hljs-built_in">print</span>(xv)<br></code></pre></td></tr></table></figure><p>  <strong>二、遍历数组的键值对</strong><br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$xvs</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;GCC&quot;</span> =&gt; <span class="hljs-string">&quot;8&quot;</span>, <span class="hljs-string">&quot;ZBN&quot;</span> =&gt; <span class="hljs-string">&quot;8&quot;</span>, <span class="hljs-string">&quot;YZY&quot;</span> =&gt; <span class="hljs-string">&quot;8&quot;</span>, <span class="hljs-string">&quot;JYH&quot;</span> =&gt; <span class="hljs-string">&quot;8&quot;</span>, <span class="hljs-string">&quot;XF&quot;</span> =&gt; <span class="hljs-string">&quot;19&quot;</span>);<br><span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$xvs</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$name</span> =&gt; <span class="hljs-variable">$age</span>)<br>&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Name=<span class="hljs-subst">$name</span>, Age=<span class="hljs-subst">$age</span>&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>  输出：<br></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs txt">Name=GCC, Age=8<br>Name=ZBN, Age=8<br>Name=YZY, Age=8<br>Name=JYH, Age=8<br>Name=XF, Age=19<br></code></pre></td></tr></table></figure><p>  <strong>三、反过来修改数组中的值</strong><br><br>  从PHP5开始，可以通过在<code>$value</code>前加一个<code>&amp;</code>来实现修改原数组中的值。<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$array</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br><span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> &amp;<span class="hljs-variable">$value</span>)<br>&#123;<br>    <span class="hljs-variable">$value</span> *= <span class="hljs-number">2</span>;<br>&#125;<br><span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$value</span>)<br>&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$value</span> &quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>  输出：<br></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">2 4 6 8 10<br></code></pre></td></tr></table></figure><p>  综上所述，答案选c)<br></p><p><br> <br></p><h2 id="GET函数的用法">$_GET函数的用法</h2><p>  Questions in this section uses the following URL:<br><br>  <a href="http://localhost/Day2/day2lecture.php?name=John&amp;lname=Smith&amp;title=Mr">http://localhost/Day2/day2lecture.php?name=John&amp;lname=Smith&amp;title=Mr</a><br></p><p class="note note-light">&emsp;&emsp;Qus 04:<br> &emsp;&emsp;When the URL contains a query string, an HTTP GET request is generated.<br> &emsp;&emsp;With the GET request, the super global array $_GET gets populated with keys andvalues of the URL parameters.<br> &emsp;&emsp;a) True<br> &emsp;&emsp;b) False<br> </p><br> <p class="note note-light">&emsp;&emsp;Qus 05:<br>&emsp;&emsp;Consider the URL:<br>&emsp;&emsp;localhost/Day3/index.php?fname=John&name=Smith&title=Mr<br>&emsp;&emsp;What the values in the URL could be retrieved as?<br></p><br> <p class="note note-light">&emsp;&emsp;Qus 06:<br>&emsp;&emsp;Select all correct answers.<br>&emsp;&emsp;Value 'John' can be retrieved using the keys and values in super global array:<br>&emsp;&emsp;a) $_REQUEST<br>&emsp;&emsp;b) $_GET<br>&emsp;&emsp;c) $_POST<br>&emsp;&emsp;d) $_SERVER<br></p><hr>&emsp;&emsp;在 PHP 中，预定义的 $_GET 变量用于收集来自 method="get" 的表单中的值。此外，使用这种方法进行传递的信息是对任何人都可见的。这是因为其信息都被包含在URL（Unifrom Resource Locator, 统一资源定位符，会显示在浏览器的地址栏中）里，任何人都可以进行解读。由于URL的限制，GET方法能够传递的信息量是有限的。<br>&emsp;&emsp;在URL被发送到服务器端之后，PHP就可以对其进行解读，表单域的名称及其对应的值就会自动成为$_GET数组中的键值对。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;get&#x27;</span>])<br>&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$_GET</span>[&#x27;id&#x27;]&lt;br&gt;&quot;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$_GET</span>[&#x27;password&#x27;]&lt;br&gt;&quot;</span>; <br>&#125;<br><span class="hljs-meta">?&gt;</span><br>&lt;form action=<span class="hljs-string">&quot;get.php&quot;</span>&gt; <span class="hljs-comment">// action选项中填入get.php意味着这份表单将被发送到此文件中进行处理。</span><br>                        <span class="hljs-comment">// 此外，form表单中的method变量默认为get</span><br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;账号：&lt;/label&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;id&quot;</span>&gt; <span class="hljs-comment">// for属性规定标签绑定到哪个表单元素</span><br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;密码：&lt;/label&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;password&quot;</span>&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> name=<span class="hljs-string">&quot;get&quot;</span> value=<span class="hljs-string">&quot;提交&quot;</span>&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure><p>  和$_GET相对的，PHP中还有$_POST的用法。前者通常用于从服务器中检索信息，而后者则是用于向服务器中发送数据。特别要注意的是，POST请求会把数据放在HTTP请求的主体当中，故其传递的信息不会在URL中显示。在没有了URL的限制之后，可传递的信息量及其安全性都显著提高。<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;post&#x27;</span>]) &#123;<br><span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$_POST</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$index</span> = &gt; <span class="hljs-variable">$value</span>) <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$_POST</span>[<span class="hljs-subst">$index</span>] = <span class="hljs-subst">$value</span>&quot;</span>, <span class="hljs-string">&quot;&lt;BR&gt;&quot;</span>;<br>&#125;<br><span class="hljs-meta">?&gt;</span><br>&lt;form action=<span class="hljs-string">&quot;post.php&quot;</span> method=<span class="hljs-string">&quot;post&quot;</span>&gt; <span class="hljs-comment">// 在这里明确了要采用POST的方法</span><br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;账号：&lt;/label&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;id&quot;</span>&gt;<br>    &lt;label <span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;密码：&lt;/label&gt;&lt;input type=<span class="hljs-string">&quot;text&quot;</span> name=<span class="hljs-string">&quot;password&quot;</span>&gt;<br>    &lt;input type=<span class="hljs-string">&quot;submit&quot;</span> name=<span class="hljs-string">&quot;post&quot;</span> value=<span class="hljs-string">&quot;提交&quot;</span>&gt;<br>&lt;/form&gt;<br></code></pre></td></tr></table></figure><p>  此外，PHP中还有一种$_REQUEST数组，其默认包含了$_GET, $_POST,$_COOKIE数组的内容，即其可以访问GET和POST方法以及Cookie传递的数据。但是，$_RESQUET数组的安全性并不可靠，应当谨慎使用。<br><br>  综上所述，问题456的答案依次为：<br><br>  Q4：True<br><br>  Q5：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$first_name</span> = <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;fname&#x27;</span>];<br><span class="hljs-variable">$last_name</span> = <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;lname&#x27;</span>];<br><span class="hljs-variable">$title</span> = <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;title&#x27;</span>];<br></code></pre></td></tr></table></figure><p>  Q6：$_REQUEST和$_GET<br></p><p><br><br></p><h2 id="PHP中的表格">PHP中的表格</h2><p class="note note-light">&emsp;&emsp;Qus 07:<br>&emsp;&emsp;Study the following code:<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$html</span> = <span class="hljs-string">&quot;&lt;table&gt;&quot;</span>;<br><span class="hljs-variable">$html</span> .= <span class="hljs-string">&quot;&lt;tr&gt;&lt;td&gt;Jack&lt;/td&gt;&lt;/tr&gt;&quot;</span>;<br><span class="hljs-variable">$html</span> .= <span class="hljs-string">&quot;&lt;tr&gt;&lt;td&gt;Smith&lt;/td&gt;&lt;/tr&gt;&quot;</span>;<br><span class="hljs-variable">$html</span> 》= <span class="hljs-string">&quot;&lt;/table&gt;&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$html</span>;<br></code></pre></td></tr></table></figure><p>  What will be the output?<br><br>  a) Error MEssage<br><br>  b) Jack<br>   Smith<br><br>  c) Jack Smith<br><br>  d) <img src="/2025/03/08/note03/pic01.png" class=""></p><hr><p>  首先是在php中<code>.=</code>的含义大概相当于<code>+=</code><br><br>  其次是这段代码显然将要输出一个表格，但其没有边框线。这是由于HTML表格默认是没有边框的，如果想要添加边框还需要做进一步的修改。<br><br>  综上所述，这一题的答案为b）<br></p><p><br><br></p><h2 id="PHP中的数据类型">PHP中的数据类型</h2><p class="note note-light">&emsp;&emsp;Which of the following is NOT a supported Data Type in PHP?<br>&emsp;&emsp;a) Resource<br>&emsp;&emsp;b) String<br>&emsp;&emsp;c) Char<br>&emsp;&emsp;d) Boolean<br>&emsp;&emsp;e) Float<br></p><hr><p>  事实上，由于PHP是一种弱类型语言，其中并没有专门的<code>char</code>数据类型。如果要实现类C语言中的<code>char</code>数据类型的功能，在PHP中可以使用<code>string</code>数据类型来代替。此外，PHP存在一种比较少见的<code>resource</code>数据类型，其用来表示外部资源。PHP本身无法直接操作这些资源，但可以通过<code>resource</code>类型的变量来引用它们。<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$file</span> = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-string">&quot;example.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>); <span class="hljs-comment">// $file是一个文件资源</span><br><span class="hljs-variable">$conn</span> = <span class="hljs-title function_ invoke__">mysqli_connect</span>(<span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>, <span class="hljs-string">&quot;database&quot;</span>); <span class="hljs-comment">// coon是一个数据库连接资源</span><br><span class="hljs-comment">// .......</span><br></code></pre></td></tr></table></figure><p>  综上所述，这道题的答案为c）<br></p>]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PHP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>学习笔记_25_03_05</title>
    <link href="/2025/03/06/note01/"/>
    <url>/2025/03/06/note01/</url>
    
    <content type="html"><![CDATA[<h1>洛谷P1101 单词方阵</h1><span id="more"></span><ul><li><a href="https://www.luogu.com.cn/problem/P1101">P1101 单词方阵</a></li></ul><!-- more --><h2 id="Reference">Reference</h2><ul><li><a href="https://www.luogu.com.cn/article/oepy6mmy">题解 P1101 【单词方阵】 By @fy1234567ok</a></li></ul><h2 id="题目描述">题目描述</h2><p>  给一 n×n 的字母方阵，内可能蕴含多个 yizhong 单词。单词在方阵中是沿着同一方向连续摆放的。摆放可沿着 8 个方向的任一方向，同一单词摆放时不再改变方向，单词与单词之间可以交叉，因此有可能共用字母。输出时，将不是单词的字母用 * 代替，以突出显示单词。<br></p><h2 id="输入格式">输入格式</h2><p>  第一行输入一个数 n。(7≤n≤100)。<br><br>  第二行开始输入 n×n 的字母矩阵。<br></p><h2 id="输出格式">输出格式</h2><p>  突出显示单词的 n×n 矩阵。<br></p><h2 id="输入输出样例">输入输出样例</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs text">输入 #1<br><br>7<br>aaaaaaa<br>aaaaaaa<br>aaaaaaa<br>aaaaaaa<br>aaaaaaa<br>aaaaaaa<br>aaaaaaa<br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs text">输出 #1<br><br>*******<br>*******<br>*******<br>*******<br>*******<br>*******<br>*******<br><br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs text">输入 #2<br><br>8<br>qyizhong<br>gydthkjy<br>nwidghji<br>orbzsfgz<br>hhgrhwth<br>zzzzzozo<br>iwdfrgng<br>yyyygggg<br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs text">输出 #2<br><br>*yizhong<br>gy******<br>n*i*****<br>o**z****<br>h***h***<br>z****o**<br>i*****n*<br>y******g<br></code></pre></td></tr></table></figure><h2 id="解题思路">解题思路</h2><p>  本题显然是一道搜索题目，我们重点应该考虑的是如何实现“yizhong”中7个字母的连续搜索。要实现连续搜索的功能，显然我们需要有一个用以验证的数组，在Python中我们可以使用<code>string = &quot;yizhong&quot;</code>这个字符串来逐个验证第<code>i</code>个字母，若有错误就即刻回溯。<br><br>  另一个要实现的功能是正确的字母原样输出，不正确的字母输出为<code>*</code>，这个通过开辟副本数组就可以轻松实现，不再赘述。<br><br>  以上，再加上DFS算法的基本框架即可实现本题。<br></p><h2 id="解题代码">解题代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><br>dxs = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>]<br>dys = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]<br><br>GoalString = <span class="hljs-string">&quot;yizhong&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">8</span>): <span class="hljs-comment"># 枚举8个方向</span><br>        flag = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">7</span>): <span class="hljs-comment"># 从GoalSting[1]到GoalSting[6]</span><br>            nx = x + j * dxs[i] <span class="hljs-comment"># 这里最妙的是这样保证了朝着一个方向连续搜索</span><br>            ny = y + j * dys[i] <span class="hljs-comment"># 而非8个方向螺旋式地搜索</span><br>            <span class="hljs-keyword">if</span> nx &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> nx &gt;= n <span class="hljs-keyword">or</span> ny &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> ny &gt;= n:<br>                flag = <span class="hljs-number">0</span><br>                <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">if</span> arr[nx][ny] != GoalString[j]:<br>                flag = <span class="hljs-number">0</span><br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">if</span> flag == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">continue</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">7</span>): <span class="hljs-comment"># 从GoalSting[0]到GoalSting[6]</span><br>            nx = x + j * dxs[i] <br>            ny = y + j * dys[i]<br>            ans[nx][ny] = arr[nx][ny] <span class="hljs-comment"># 将目标数据存到副本数组当中</span><br><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    arr = [[<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    ans = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        InputString = <span class="hljs-built_in">input</span>()<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            arr[i][j] = InputString[j] <span class="hljs-comment"># 这里要注意不要把input写到最里层</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">if</span> arr[i][j] == <span class="hljs-string">&#x27;y&#x27;</span>: <span class="hljs-comment"># 如果遇到y就开始搜索</span><br>                dfs(i, j)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">if</span> ans[i][j] == <span class="hljs-number">0</span>:<br>                ans[i][j] = <span class="hljs-string">&#x27;*&#x27;</span><br>            <span class="hljs-built_in">print</span>(ans[i][j],end=<span class="hljs-string">&#x27;&#x27;</span>)<br>        <span class="hljs-built_in">print</span>(end=<span class="hljs-string">&#x27;\n&#x27;</span>)<br></code></pre></td></tr></table></figure><p>  成功AC！<br></p><img src="/2025/03/06/note01/note01_pic01.png" class="">]]></content>
    
    
    <categories>
      
      <category>学习笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dfs</tag>
      
      <tag>python</tag>
      
      <tag>洛谷</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MarkDown中无法正确插入图片的解决方案</title>
    <link href="/2025/03/05/md01/"/>
    <url>/2025/03/05/md01/</url>
    
    <content type="html"><![CDATA[<h1>MarkDown中无法正确插入图片的解决方案</h1><p>  今天在写博客的时候第一次有插入图片的需求，但是最开始反复修改都无法在远端成功部署图片，以下是亲测有效的解决方案。<br></p><h2 id="Reference">Reference</h2><ul><li><a href="https://blog.csdn.net/lengcs/article/details/143816877">[2024] hexo图片无法加载究极解决方案</a><br><br></li></ul><h2 id="修改-config-yml文件">修改_config.yml文件</h2><p>  先将 _config.yml 文件中的 post_asset_folder 选项设为 true。<br></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># _config.yml</span><br><br><span class="hljs-comment"># Writing</span><br><span class="hljs-attr">new_post_name:</span> <span class="hljs-string">:title.md</span> <span class="hljs-comment"># File name of new posts</span><br><span class="hljs-attr">default_layout:</span> <span class="hljs-string">post</span><br><span class="hljs-attr">titlecase:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># Transform title into titlecase</span><br><span class="hljs-attr">external_link:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Open external links in new tab</span><br>  <span class="hljs-attr">field:</span> <span class="hljs-string">site</span> <span class="hljs-comment"># Apply to the whole site</span><br>  <span class="hljs-attr">exclude:</span> <span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-attr">filename_case:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">render_drafts:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">post_asset_folder:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">relative_link:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">future:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">syntax_highlighter:</span> <span class="hljs-string">highlight.js</span><br><span class="hljs-attr">highlight:</span><br>  <span class="hljs-attr">line_number:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">auto_detect:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">tab_replace:</span> <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-attr">wrap:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">hljs:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">prismjs:</span><br>  <span class="hljs-attr">preprocess:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">line_number:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">tab_replace:</span> <span class="hljs-string">&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>  此步骤使得我们在使用<code>hexo n xxx</code>指令新建文章时，相同路径下会自动新建一个同名文件夹，用以专门存放我们将要使用到的图片。<br><br>  注：对于更改设置前已经创建过的md文件，手动新建一个同名文件夹的效果是一样的，已测试。<br></p><h2 id="安装插件">安装插件</h2><p>  笔者操作过程中的错误就出现在这一步。<br><br>  在大多数教程中介绍的都是要安装hexo-asset-image插件，但事实上由于年久失修，这个插件已经失效。因此，我们实际要安装的是<strong>hexo-asset-img</strong>插件，所需命令如下所示。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-asset-img --save<br></code></pre></td></tr></table></figure><p>  注：如果先前已经安装过hexo-asset-image插件的话，需要前往/node_modules中找到同名文件夹并删除。<br></p><h2 id="文内代码">文内代码</h2><p>  随后在md文件中想要插入图片的位置键入下方类似代码即可实现图片插入功能。<br></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">! [](<span class="hljs-link">md01/md01_pic01.png</span>)<br><br>&lt;!-- Markdown支持html语法，因此也可以写成以下形式 --&gt;<br><br>&lt; img align=middle src=&quot;md01/md01<span class="hljs-emphasis">_pic01.png&quot; /&gt;</span><br></code></pre></td></tr></table></figure><p>  注：上述示例代码的第一个字符后的空格在实际应用时都不应存在。示例中若无空格即出现乱码，尚无解决方案故出此下策，请读者注意甄别。<br></p>]]></content>
    
    
    <categories>
      
      <category>疑难杂症解决方案</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MarkDown</tag>
      
      <tag>Solutions</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
